<!DOCTYPE html><html><head><title>modulo_psi</title><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><style>.small-caps{text-transform:uppercase;font-size:70%;letter-spacing:.075em}#backstage .panel h2{margin:0}#backstage .panel h2 button{text-align:left;background:none;border:none;width:100%;font-weight:400;text-transform:uppercase;font-size:70%;letter-spacing:.075em;font-size:11px;padding:0 8px}#backstage .panel h2 button:before{content:"\25BA";display:inline-block;width:1.25em}#backstage .panel h2 button:hover{color:#495057}#backstage .panel.open h2 button:before{content:"\25BC"}
#backstage table.history td.actions{width:2.5em}#backstage table.history td.go{border-right:1px solid #000}
#backstage ul.tabs{list-style:none;margin:8px;padding:0;display:flex;border:1px solid #000;font-size:12px}#backstage ul.tabs li{flex-grow:1;border-right:1px solid #000;text-align:center}#backstage ul.tabs li:last-child{border-right:none}#backstage ul.tabs li button{color:#000;text-decoration:none;display:block;width:100%;height:28px;padding:8px;border:none;border-radius:0}#backstage ul.tabs li button.active{background:#000;color:#dee2e6}#backstage .tab-content{max-height:calc(100vh - $backstage-tab-height);overflow:auto}
.small-caps{text-transform:uppercase;font-size:70%;letter-spacing:.075em}body.backstage-visible #backdrop{justify-content:flex-start;max-width:67vw}#backstage{position:fixed;top:0;right:0;bottom:0;width:33vw;max-height:100vh;font-size:18px;background:#dee2e6;color:#000;transform:translateX(100%);box-shadow:inset 2px 0 3px rgba(0,0,0,.25);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu Cantarell,Helvetica Neue,sans-serif;font-size:80%}#backstage:before{content:"";position:absolute;z-index:2;top:calc(50% - 25px);right:calc(100% - 4px);height:50px;width:4px;background:#dee2e6}@media screen and (max-width:425px){#backstage{width:calc(100vw - 25px)}}#backstage.open{transform:none}#backstage .toggle-visibility{position:absolute;z-index:1;top:calc(50% - 25px);right:100%;width:25px;height:50px;padding:0;background:#dee2e6;color:#000;border:none;border-top-left-radius:25px;border-bottom-left-radius:25px;border-top-right-radius:0;border-bottom-right-radius:0;box-shadow:inset 2px 0 3px rgba(0,0,0,.25);font-size:18px}#backstage button{color:#000;background:transparent;padding:8px;border-radius:16px;border:1px solid #000}#backstage button:hover{background:#e9ecef}#backstage p{padding:0 8px}#backstage li,#backstage p,#backstage td{font-size:12px}#backstage input,#backstage select{color:#000;background:transparent;border:1px solid #000;padding:8px}#backstage table{background:transparent;table-layout:fixed;border-collapse:collapse;width:calc(100% - 16px);margin:8px}#backstage th{text-align:left}#backstage td{position:relative;border:1px solid #000;padding:8px;vertical-align:top}#backstage td:first-child{border-left:none}#backstage td:last-child{border-right:none}#backstage td button,#backstage td input{background:none;border:none;border-radius:0;position:absolute;top:0;left:0;bottom:0;width:100%;padding:8px}#backstage textarea{background:transparent;border:1px solid #000;color:#000;padding:8px;width:100%;height:7.75em}#backstage .block{display:block;margin:8px;width:calc(100% - 16px)}#backstage .disabled{color:#868e96}#backstage .indented-input{margin-left:calc(10em + 8px);font-size:12px}#backstage .input-group{display:flex;align-items:center}#backstage .input-group label:first-child{text-align:right;margin-right:8px;width:10em}#backstage .input-group input,#backstage .input-group select{flex-grow:1}#backstage .segmented-button{display:flex}#backstage .segmented-button button{border-left:none;border-radius:0;margin:0;flex-grow:1}#backstage .segmented-button button:first-child{border-left:1px solid #000;border-top-left-radius:16px;border-bottom-left-radius:16px}#backstage .segmented-button button:last-child{border-top-right-radius:16px;border-bottom-right-radius:16px}#backstage .segmented-button .fixed{flex-grow:0;min-width:24px}#backstage .tab-content{max-height:calc(100vh - 28px);overflow:auto}
.fade-in{opacity:0;animation:fade-in 1s ease-out forwards}.fade-out{animation:fade-in 1s ease-out reverse forwards}.skip-animation{animation-delay:0s!important}@keyframes fade-in{0%{opacity:0}to{opacity:1}}
#page .warnings{list-style-type:none;padding-left:0;margin-left:0}
.small-caps{text-transform:uppercase;font-size:70%;letter-spacing:.075em}#backdrop{min-height:100vh;align-items:center}#backdrop,#page{display:flex;justify-content:center}#page{flex-direction:column;width:40em;min-height:calc(100vh - 2em);max-width:calc(100vw - 2em);line-height:150%;margin:1em;padding:4em 4em 2em;position:relative}#page article{flex-grow:1;display:flex}#page article>:first-child{margin-top:0;width:100%}#page footer,#page header{display:flex}#page footer>div,#page header>div{flex-grow:1}#page footer p,#page header p{margin:.5em 0 0}#page footer .center,#page header .center{text-align:center}#page footer .right p,#page header .right p{text-align:right}#page header{margin-top:0}#page header.has-content{border-bottom:1px solid #000}#page header.has-content+article>article>div>p:first-child,#page header.has-content+article>div>p:first-child{margin-top:1em}#page footer{margin-bottom:0}#page footer.has-content{border-top:1px solid #000}#page hr{border:none}#page hr:after{content:"* \A0   * \A0   *";display:block;text-align:center}#page .error,#page .warning{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu Cantarell,Helvetica Neue,sans-serif;font-size:80%;background:#fff5f5;color:#c92a2a;padding:.5em;border-left:4px solid #ffa8a8;position:relative;margin-bottom:1em;overflow:auto}#page .error :first-child,#page .warning :first-child{margin-top:0}#page .error :last-child,#page .warning :last-child{margin-bottom:0}#page .error a,#page .warning a{color:#c92a2a}#page .warning{background:#fff9db;color:#e67700}#page .warning a{color:#e67700}#page .fork p{display:flex;flex-direction:column;width:100%}#page .fork p a{display:block;flex-grow:1;text-align:center;padding:.5em}@media screen and (max-width:768px){#page{margin:0;width:100vw;max-width:100vw;min-height:100vh;padding:1em}}#spinner{position:absolute;bottom:0;right:0;opacity:0;transition:opacity .25s ease-in-out;pointer-events:none}#spinner.visible{display:block;opacity:1}
*{box-sizing:border-box}body{margin:0;padding:0}img{max-width:100%;height:auto}input[type=text],select{padding:.25em}pre{white-space:pre-wrap}tw-storydata{display:none}</style></head><body><form id="cb-validation" action="javascript:void(0)"><button id="cb-validation-tester" hidden></button> <button id="cb-block-enter-key" hidden></button><div id="backdrop"><div id="page" aria-live="polite"><header><div class="left"></div><div class="center"></div><div class="right"></div></header><article></article><ul class="warnings"></ul><footer><div class="left"></div><div class="center"></div><div class="right"></div></footer><div id="spinner"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgICB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmlld0JveD0iMCAwIDEwMCAxMDAiPgogICAgPHJlY3QgeD0iMzEiIHk9IjE0IiB3aWR0aD0iMzgiIGhlaWdodD0iNzIiIHJ4PSI0IiBmaWxsPSJ3aGl0ZSIgLz4KICAgIDxjaXJjbGUgY3g9IjUwIiBjeT0iNTAiIHI9IjI4IiBmaWxsPSJ3aGl0ZSIgLz4KCTxyZWN0IHg9IjM1IiB5PSIxOCIgd2lkdGg9IjMwIiBoZWlnaHQ9IjY0IiByeD0iNCIgZmlsbD0id2hpdGUiIHN0cm9rZS13aWR0aD0iMnB4IiBzdHJva2U9ImJsYWNrIiAvPgogICAgPGNpcmNsZSBjeD0iNTAiIGN5PSI1MCIgcj0iMjAiIHN0cm9rZT0iYmxhY2siIGZpbGw9IndoaXRlIiBzdHJva2Utd2lkdGg9IjJweCIgLz4KCTxsaW5lIHgxPSI1MCIgeTE9IjUwIiB4Mj0iNTAiIHkyPSIzNyIgc3Ryb2tlPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIycHgiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+CiAgICAgICAgPGFuaW1hdGVUcmFuc2Zvcm0KICAgICAgICAgICAgYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIgogICAgICAgICAgICBiZWdpbj0iMHMiCiAgICAgICAgICAgIGR1cj0iMjBzIgogICAgICAgICAgICB0eXBlPSJyb3RhdGUiCiAgICAgICAgICAgIGZyb209IjAgNTAgNTAiCiAgICAgICAgICAgIHRvPSIzNjAgNTAgNTAiCiAgICAgICAgICAgIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIgogICAgICAgIC8+Cgk8L2xpbmU+Cgk8bGluZSB4MT0iNTAiIHkxPSI1MCIgeDI9IjQyIiB5Mj0iNTAiIHN0cm9rZT0iYmxhY2siIHN0cm9rZS13aWR0aD0iMnB4IiBzdHJva2UtbGluZWNhcD0icm91bmQiPgogICAgICAgIDxhbmltYXRlVHJhbnNmb3JtCiAgICAgICAgICAgIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIKICAgICAgICAgICAgYmVnaW49IjBzIgogICAgICAgICAgICBkdXI9IjEyMHMiCiAgICAgICAgICAgIHR5cGU9InJvdGF0ZSIKICAgICAgICAgICAgZnJvbT0iMCA1MCA1MCIKICAgICAgICAgICAgdG89IjM2MCA1MCA1MCIKICAgICAgICAgICAgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiCiAgICAgICAgLz4KCTwvbGluZT4KPC9zdmc+" width="40" height="40" alt=""></div></div></div></form><tw-storydata name="modulo_psi" startnode="1" creator="Twine" creator-version="2.3.16" ifid="268096C2-829D-45CD-8F74-2FD22E1DBB67" zoom="0.6" format="Chapbook" format-version="1.2.1" options="" hidden><style role="stylesheet" id="twine-user-stylesheet" type="text/twine-css">span.listacirculo {
  background: #003488;
  border-radius: 0.8em;
  -moz-border-radius: 0.8em;
  -webkit-border-radius: 0.8em;
  color: #ffffff;
  display: inline-block;
  font-weight: bold;
  line-height: 1.6em;
  margin-right: 15px;
  text-align: center;
  width: 1.6em;
}

table.cuadro, th.cuadro, td.cuadro, tr.cuadro {
  border: 1px solid #003488;
  border-collapse: collapse;
}

::marker {
  content: "»";
  font-size: 1.5em;
  color: #003488;
}

h4.pregunta{
	color:#003488;
}

h3.titulo{
	color:#003488;
}
</style><script role="script" id="twine-user-script" type="text/twine-javascript"></script><tw-passagedata pid="1" name="Módulo de Psicosis (PSI)" tags="" position="390,18" size="100,100">config.header.left: &quot;Módulo Psicosis (PSI) - Panorama Breve&quot;
config.header.right: &quot;[[Acerca de...]]&quot; 
config.footer.left: &quot;{back link , label : &#39;Devolverse&#39; }&quot; 
config.footer.right: &quot;{restart link, label: &#39;Reiniciar Ruta&#39;}&quot;
$vinculoOtroModulo: &quot;http://mhgap.analisis.info&quot;
--
&lt;center&gt;
&lt;h3 class=&quot;titulo&quot;&gt;
Módulo Psicosis (PSI)
&lt;/h3&gt;
&lt;h3&gt;{embed image: &#39;imgs/evaluacion32.png&#39;, alt: &#39;Evaluación&#39;} 
[[Clic para Comenzar la Evaluación|Ir a Evaluación]]&lt;/h3&gt;
&lt;/center&gt;
&lt;span style=&quot;font-size:small&quot;&gt;

&lt;ul&gt;Panorama Breve:
 &lt;li&gt;&lt;b&gt;Investigue otras explicaciones de los 
síntomas.&lt;/b&gt;&lt;/li&gt;
 &lt;ul&gt;
 	&lt;li&gt;INVESTIGUE SI HAY TRASTORNOS MÉDICOS: por ejemplo, descarte el delirio, los medicamentos y anomalías metabólicas &lt;/li&gt;
	&lt;li&gt;INVESTIGUE SI EXISTEN OTROS TRATORNOS MNS PERTINENTES.&lt;/li&gt;
 &lt;/ul&gt;
 &lt;li&gt;&lt;b&gt;Determine si hay episodios maníacos agudos.&lt;/b&gt;&lt;/li&gt;
 &lt;li&gt;&lt;b&gt;Evalúe la posibilidad de que la persona sufra psicosis.&lt;/b&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/span&gt;

&lt;center&gt;
&lt;h3&gt;{embed image: &#39;imgs/manejo32.png&#39;, alt: &#39;Manejo&#39;}[[Clic para Continuar con el Manejo|Ir a Manejo]]


&lt;/h3&gt;
&lt;/center&gt;
&lt;span style=&quot;font-size:small&quot;&gt;
&lt;ul&gt;Panorama Breve:
 &lt;li&gt;&lt;b&gt;Protocolos de manejo&lt;/b&gt;&lt;/li&gt;
 &lt;ol&gt;
 	&lt;li&gt;Trastorno bipolar, episodio maníaco&lt;/li&gt;
	&lt;li&gt;Psicosis&lt;/li&gt;
	&lt;li&gt;Grupos especiales de población: mujeres durante el embarazo o la lactancia, adolescentes y adultos mayores.&lt;/li&gt;
 &lt;/ol&gt;
 &lt;li&gt;&lt;b&gt;Intervenciones psicosociales&lt;/b&gt;&lt;/li&gt;
 &lt;li&gt;&lt;b&gt;Intervenciones farmacológicas.&lt;/b&gt; &amp;#10071;&lt;span style=&quot;color:red&quot;&gt;Solamente las puede realizar un Médico.&lt;/span&gt;&lt;/li&gt;
 &lt;ol&gt;
 	&lt;li&gt;Psicosis: iniciación de la medicación con antipsicóticos.&lt;/li&gt;
	&lt;li&gt;Episodio maníaco: iniciación de la medicación estabilizadora del estado de ánimo o antipsicótica; evite los antidepresivos&lt;/li&gt;
 &lt;/ol&gt;
&lt;/ul&gt;
&lt;/span&gt;

&lt;center&gt;
&lt;h3&gt;{embed image: &#39;imgs/seguimiento32.png&#39;, alt: &#39;Seguimiento&#39;}#[[Clic para Continuar con el Seguimiento|Ir a Seguimiento]]&lt;/h3&gt;
&lt;/center&gt;

</tw-passagedata><tw-passagedata pid="2" name="Acerca de..." tags="" position="165,168" size="100,100">config.header.left:&quot;&amp;#10024; Acerca de ...&quot;
--
&lt;ul&gt;
&lt;li&gt;
Desarrollo basado en la &lt;i&gt;&quot;Guía de intervención mhGAP
para los trastornos mentales, neurológicos y por consumo 
de sustancias en el nivel de atención de salud no especializada. 
Versión 2.0&quot;&lt;/i&gt; de la Organización Panamericana de la Salud y la Organización Mundial de la Salud.
&lt;/li&gt;
&lt;li&gt;
Desarrollado para la &lt;a href=&quot;http://saludpublica.udea.edu.co&quot; title=&quot;Facultad Nacional de Salud Pública&quot; target=&quot;_blank&quot;&gt;Facultad Nacional de Salud Pública&lt;/a&gt; de la Universidad de Antioquia.
&lt;/li&gt;
&lt;li&gt;
Desarrollado por el grupo de investigación &lt;a href=&quot;http://senda.group&quot; title=&quot;SENDA R&amp;D Group&quot; target=&quot;_blank&quot;&gt;SENDA R&amp;D Group: Software Engineering and Data Science Research and Development Group&lt;/a&gt; de la Universidad Nacional de Colombia. Sede Medellín.
&lt;/li&gt;
&lt;/ul&gt;

&lt;table style=&quot;width:100%&quot;&gt;
  &lt;tr&gt;
    &lt;td style=&quot;text-align:left&quot;&gt;&amp;#128073;{back link, label: &#39;Devolverse&#39;}&amp;#128072;&lt;/td&gt;
    &lt;td style=&quot;text-align:right&quot;&gt;&amp;#128073;{restart link, label: &#39;Reiniciar Ruta&#39;}&amp;#128072;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;

 &lt;div style=&quot;font-size:x-small&quot;&gt;Iconos diseñados por &lt;a href=&quot;https://www.flaticon.es/autores/mikan933&quot; title=&quot;mikan933&quot; target=&quot;_blank&quot;&gt;mikan933&lt;/a&gt;,
    &lt;a href=&quot;https://www.flaticon.es/autores/flat-icons&quot; title=&quot;Flat Icons&quot; target=&quot;_blank&quot;&gt;Flat Icons&lt;/a&gt;,&lt;a href=&quot;https://www.freepik.com&quot; title=&quot;Freepik&quot; target=&quot;_blank&quot;&gt;Freepik&lt;/a&gt;,  
    &lt;a href=&quot;https://www.flaticon.es/autores/eucalyp&quot; title=&quot;Eucalyp&quot; target=&quot;_blank&quot;&gt;Eucalyp&lt;/a&gt; from &lt;a href=&quot;https://www.flaticon.es/&quot; title=&quot;Flaticon&quot; target=&quot;_blank&quot;&gt;www.flaticon.es&lt;/a&gt;&lt;/div&gt;</tw-passagedata><tw-passagedata pid="3" name="Ir a Evaluación" tags="" position="315,167" size="100,100">config.header.left:&quot;{embed image: &#39;imgs/evaluacion32.png&#39;, alt: &#39;Evaluación&#39;} Módulo Psicosis (PSI) - Evaluación&quot;
--
&lt;center&gt;&lt;h3 class=&quot;titulo&quot;&gt;
Manifestaciones Comunes de la Psicosis
&lt;/h3&gt;&lt;/center&gt;
&lt;ul&gt;
&lt;li&gt;
 Cambios pronunciados de la conducta, descuido de las responsabilidades habituales relacionadas con el trabajo, la escuela, las actividades domésticas o sociales.&lt;/li&gt;
&lt;li&gt;Comportamiento agitado, agresivo; aumento o disminución de la actividad.&lt;/li&gt;
&lt;li&gt;Creencias falsas fijas no compartidas por otros en la cultura de la persona.&lt;/li&gt;
&lt;li&gt;Oye voces o ve cosas que no existen.&lt;/li&gt;
&lt;li&gt; No se da cuenta que tiene problemas de salud mental.&lt;/li&gt;
&lt;/ul&gt;
&lt;hr/&gt;

&lt;h4 class=&quot;pregunta&quot;&gt;
&lt;span class=&quot;listacirculo&quot;&gt;1&lt;/span&gt; ¿Hay otras explicaciones para los síntomas?
&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;
&lt;b&gt;EVALÚE SI EXISTEN TRASTORNOS FÍSICOS:&lt;/b&gt;  De acuerdo con la historia clínica, el examen clínico o los resultados de laboratorio, &amp;#11088;¿hay signos y síntomas que indiquen &lt;b&gt;delirio&lt;/b&gt;  debido a una enfermedad física aguda, por ejemplo, infección, malaria cerebral, deshidratación, anomalías metabólicas (como hipoglucemia o hiponatremia), o &lt;b&gt;efectos secundarios de la medicación&lt;/b&gt;, por ejemplo, acausa de algún medicamento antimalárico o esteroideo? 
&lt;/li&gt;
&lt;/ul&gt;

&lt;table style=&quot;width:100%&quot;&gt;
  &lt;tr&gt;
    &lt;td style=&quot;text-align:left&quot;&gt;&amp;#128073;[[Responder NO|Ir a Pregunta 1.2]]&amp;#128072;&lt;/td&gt;
    &lt;td style=&quot;text-align:right&quot;&gt;&amp;#128073;[[Responder SI|Evalúe enfermedad fisica]]&amp;#128072;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
&lt;br /&gt;</tw-passagedata><tw-passagedata pid="4" name="Ir a Manejo" tags="" position="435,167" size="100,100">config.header.left:&quot;{embed image: &#39;imgs/manejo32.png&#39;, alt: &#39;Manejo&#39;} Módulo Psicosis (PSI) - Manejo&quot;
--
&lt;center&gt;
&lt;h4 class=&quot;pregunta&quot;&gt;
&amp;#128204;
[[Ir al Protocolo 1 de Manejo. Episodio Maníaco en el Trastorno Bipolar.|Manejo Protocolo 1]]
&lt;/h4&gt;
&lt;h4 class=&quot;pregunta&quot;&gt;
&amp;#128204;
[[Ir al Protocolo 2 de Manejo. Psicosis.|Manejo Protocolo 2]]
&lt;/h4&gt;
&lt;/center&gt;


&lt;h4 class=&quot;pregunta&quot;&gt;&amp;#128203;Grupos especiales de población.&lt;/h4&gt;
&lt;i&gt;Observe que las intervenciones pueden diferir para estos grupos de población.&lt;/i&gt;


&lt;table style=&quot;width:100%&quot;&gt;
  &lt;tr&gt;
    &lt;td style=&quot;text-align:center&quot; class=&quot;cuadro&quot;&gt;
	&lt;b&gt;Mujeres durante el embarazo o la lactancia:&lt;/b&gt;
	&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;

&lt;ul&gt;
  &lt;li&gt;
  &lt;b&gt;Sirva de enlace con especialistas en salud materna para organizar la atención.&lt;/b&gt;
  &lt;/li&gt;
    &lt;li&gt;
	&lt;b&gt;	 Considere la consulta con un especialista en salud mental si es factible&lt;/b&gt;
  &lt;/li&gt;
    &lt;li&gt;
	Explique el riesgo de consecuencias adversas para la madre y su bebé, incluidas.
  &lt;/li&gt;
  &lt;li&gt;
  &lt;b&gt;Considere una intervención farmacológica&lt;/b&gt; cuando sea apropiado y disponga de ella. Vea las indicaciones a continuación.
  &lt;/li&gt;
&lt;/ul&gt;


&lt;h4 class=&quot;pregunta&quot;&gt;&amp;#128206;Intervenciones Farmacológicas: Psicosis.&lt;/h4&gt;

&lt;ul&gt;
	&lt;li&gt;
	En las mujeres con psicosis que están
planificando un embarazo, ya están
embarazadas o que amamantan, se puede
considerar recetar haloperidol por vía oral en
dosis bajas, o clorpromazina. 
  	&lt;/li&gt;
	&lt;li&gt;
	  &amp;#10060;NO se deben prescribir anticolinérgicos a las
mujeres que están embarazadas debido a los
efectos secundarios extrapiramidales de los
medicamentos antipsicóticos, excepto en los
casos agudos, a corto plazo.
  	&lt;/li&gt;
	&lt;li&gt;
	No se deben recetar sistemáticamente
antipsicóticos de depósito (de efecto retardado)
a las mujeres con trastornos psicóticos que están
planificando un embarazo, están embarazadas o
amamantan, porque hay relativamente poca
información sobre su seguridad en este grupo de
población.
  	&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 class=&quot;pregunta&quot;&gt;&amp;#128206;Intervenciones Farmacológicas: Episodio maníaco en el trastorno bipolar.&lt;/h4&gt;

&lt;ul&gt;
	&lt;li&gt;
&amp;#10060;&lt;b&gt;EVITE USAR VALPROATO, LITIO  
y CARBAMAZEPINA&lt;/b&gt; durante el embarazo y la
lactancia materna debido al riesgo de que se
produzcan malformaciones congénitas. 
  	&lt;/li&gt;
	&lt;li&gt;
Considere el empleo de &lt;b&gt;haloperidol en dosis
bajas&lt;/b&gt; con precaución y en consulta con un
especialista, si es factible. 
  	&lt;/li&gt;
	&lt;li&gt;
 Sopese los riesgos y los beneficios de los
medicamentos en las mujeres en edad fecunda.
  	&lt;/li&gt;
		&lt;li&gt;
  Si en una embarazada se presenta manía aguda
mientras toma estabilizadores del estado de
ánimo, considere la posibilidad de cambiar a
haloperidol en dosis bajas.
  	&lt;/li&gt;
&lt;/ul&gt;

&lt;table style=&quot;width:100%&quot;&gt;
  &lt;tr&gt;
    &lt;td style=&quot;text-align:center&quot; class=&quot;cuadro&quot;&gt;
	&lt;b&gt;Adolescentes&lt;/b&gt;
	&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
&lt;ul&gt;
  &lt;li&gt;
  Considere la consulta con un especialista en salud mental.
  &lt;/li&gt;
    &lt;li&gt;
	 En los adolescentes con trastorno psicótico
o bipolar, se puede recetar &lt;b&gt;risperidona&lt;/b&gt;
como una opción de tratamiento solo bajo
la supervisión de un especialista. 
  &lt;/li&gt;
    &lt;li&gt;
	Si el tratamiento con risperidona no es
factible, se puede usar &lt;b&gt;haloperidol o
clorpromazina&lt;/b&gt; solo bajo la supervisión de
un especialista
  &lt;/li&gt;
&lt;/ul&gt;

&lt;table style=&quot;width:100%&quot;&gt;
  &lt;tr&gt;
    &lt;td style=&quot;text-align:center&quot; class=&quot;cuadro&quot;&gt;
	&lt;b&gt;Adultos Mayores&lt;/b&gt;
	&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
&lt;ul&gt;
  &lt;li&gt;
    Use dosis &lt;b&gt;inferiores&lt;/b&gt; de la medicación.
  &lt;/li&gt;
    &lt;li&gt;
	  Prevea un mayor riesgo de interacciones
medicamentosas.  
  &lt;/li&gt;
    &lt;li&gt;
	&lt;b&gt;&amp;#10071;Precauciones:&lt;/b&gt;  Los antipsicóticos conllevan un mayor riesgo de episodios cerebrovasculares y
muerte en los adultos mayores con
psicosis relacionada con demencia.
  &lt;/li&gt;
&lt;/ul&gt;

</tw-passagedata><tw-passagedata pid="5" name="Ir a Seguimiento" tags="" position="635,166" size="100,100">config.header.left:&quot;{embed image: &#39;imgs/seguimiento32.png&#39;, alt: &#39;Evaluación&#39;} Módulo Psicosis (PSI) - Seguimiento&quot;
--

&lt;center&gt;&lt;h3 class=&quot;titulo&quot;&gt;
&amp;#128204;[[Seguimiento. Psicosis|Seguimiento Psicosis]]
&lt;/h3&gt;&lt;/center&gt;
&lt;br/&gt;&lt;br/&gt;
&lt;center&gt;&lt;h3 class=&quot;titulo&quot;&gt;
&amp;#128204;[[Seguimiento. Episodio Maniaco en el Trastorno Bipolar|Seguimiento Episocio Maniatico]]
&lt;/h3&gt;&lt;/center&gt;


</tw-passagedata><tw-passagedata pid="6" name="Ir a Pregunta 1.2" tags="" position="214,312" size="100,100">config.header.left:&quot;{embed image: &#39;imgs/evaluacion32.png&#39;, alt: &#39;Evaluación&#39;} Módulo Psicosis (PSI) - Evaluación&quot;
--
&lt;ul&gt;
&lt;li&gt;
&amp;#11088;EVALÚE PARA DETERMINAR SI SE TRATA DE DEMENCIA, DEPRESIÓN, INTOXICACIÓN O  ABSTINENCIA DEL CONSUMO DE DROGAS O ALCOHOL. 
&lt;/li&gt;
&lt;/ul&gt;

&lt;table style=&quot;width:100%&quot;&gt;
  &lt;tr&gt;
    &lt;td style=&quot;text-align:left&quot;&gt;&amp;#128073;[[Responder NO|Evaluacion Paso 2]]&amp;#128072;&lt;/td&gt;
    &lt;td style=&quot;text-align:right&quot;&gt;&amp;#128073;[[Responder SI|Ir a Pregunta 1.3]]&amp;#128072;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
&lt;br /&gt;</tw-passagedata><tw-passagedata pid="7" name="Evalúe enfermedad fisica" tags="" position="390,317" size="100,100">config.header.left:&quot;{embed image: &#39;imgs/evaluacion32.png&#39;, alt: &#39;Evaluación&#39;} Módulo Psicosis (PSI) - Evaluación&quot;
--
&lt;center&gt;&lt;h3 class=&quot;titulo&quot;&gt;
Existen Trastornos Físicos
&lt;/h3&gt;&lt;/center&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;b&gt;Evalúe y trate&lt;/b&gt; la enfermedad física aguda y &lt;b&gt;derive al paciente a servicios de urgencia o a un especialista según sea necesario.&amp;#128657;&lt;/b&gt;&lt;/li&gt;
&lt;li&gt; Si los síntomas persisten después del tratamiento de la causa aguda,  
&amp;#128073;[[Ir al Paso 2|Evaluacion Paso 2]]&amp;#128072;
&lt;/li&gt;
&lt;/ul&gt;

&lt;table style=&quot;width:100%&quot;&gt;
  &lt;tr&gt;
    &lt;td style=&quot;text-align:left&quot;&gt;&amp;nbsp;&lt;/td&gt;
    &lt;td style=&quot;text-align:right&quot;&gt;&amp;#128073;[[Ir al Paso 2|Evaluacion Paso 2]]&amp;#128072;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
&lt;br /&gt;</tw-passagedata><tw-passagedata pid="8" name="Evaluacion Paso 2" tags="" position="366,454" size="100,100">config.header.left:&quot;{embed image: &#39;imgs/evaluacion32.png&#39;, alt: &#39;Evaluación&#39;} Módulo Psicosis (PSI) - Evaluación&quot;
--
&lt;h4 class=&quot;pregunta&quot;&gt;
&lt;span class=&quot;listacirculo&quot;&gt;2&lt;/span&gt; ¿Está teniendo la persona un episodio maníaco agudo?
&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;
&lt;b&gt;&amp;#11088;¿Se han presentado simultáneamente varios de los síntomas mencionados a continuación y han durado al menos una semana con gravedad suficiente para interferir considerablemente en el trabajo y las actividades sociales o requerir reclusión u hospitalización?&lt;/b&gt;
&lt;/li&gt;
&lt;ul&gt;
  &lt;li&gt;Estado de ánimo elevado o irritable
  &lt;/li&gt;
  &lt;li&gt;Disminución de la necesidad de sueño
  &lt;/li&gt;
  &lt;li&gt;Aumento de la actividad, sentimiento de mayor energía, habla mucho o con rapidez
  &lt;/li&gt;
  &lt;li&gt;Pérdida de inhibiciones sociales normales, como indiscreciones sexuales
  &lt;/li&gt;
  &lt;li&gt;Comportamientos impulsivos o temerarios, como gastos de dinero excesivos, toma de decisiones importantes sin reflexionar
  &lt;/li&gt;
  &lt;li&gt;Se distrae fácilmente
  &lt;/li&gt;
  &lt;li&gt;Aumento injustificado de la autoestima
  &lt;/li&gt;
&lt;/ul&gt;
&lt;/ul&gt;

&lt;table style=&quot;width:100%&quot;&gt;
  &lt;tr&gt;
    &lt;td style=&quot;text-align:left&quot;&gt;&amp;#128073;[[Responder NO|Segumiento Paso 3]]&amp;#128072;&lt;/td&gt;
    &lt;td style=&quot;text-align:right&quot;&gt;&amp;#128073;[[Responder SI|Sospecha Bipolar]]&amp;#128072;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
&lt;br /&gt;</tw-passagedata><tw-passagedata pid="9" name="Ir a Pregunta 1.3" tags="" position="165,443" size="100,100">config.header.left:&quot;{embed image: &#39;imgs/evaluacion32.png&#39;, alt: &#39;Evaluación&#39;} Módulo Psicosis (PSI) - Evaluación&quot;
--
&lt;ul&gt;
&lt;li&gt;
&lt;b&gt; Considere efectuar una consulta con un especialista en salud mental para el tratamiento de los trastornos Si la persona presenta agitación aguda o agresividad aguda concurrentes. &lt;/b&gt;&amp;#128657;&lt;/b&gt;&lt;/li&gt;
&lt;li&gt;  Trate los trastornos concurrentes. Vaya a los módulos pertinentes.
&lt;/li&gt;
&lt;li&gt;
&amp;#128204;&lt;b&gt;MANEJO DE LA AGITACIÓN AGUDA O LA AGRESIÓN.&lt;/b&gt; Si la persona presenta agitación aguda o agresividad aguda: &amp;#128204; Vaya al cuadro [[“Manejo de las personas con conducta agitada o agresiva”|Cuadro 5 comportamientos agresivos]] en este módulo antes de
proseguir.
&lt;/li&gt;
&lt;/ul&gt;

&lt;table style=&quot;width:100%&quot;&gt;
  &lt;tr&gt;
    &lt;td style=&quot;text-align:left&quot;&gt;&amp;nbsp;&lt;/td&gt;
    &lt;td style=&quot;text-align:right&quot;&gt;&amp;#128073;[[Ir al Paso 2|Evaluacion Paso 2]]&amp;#128072;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
&lt;br /&gt;</tw-passagedata><tw-passagedata pid="10" name="Segumiento Paso 3" tags="" position="292,603" size="100,100">config.header.left:&quot;{embed image: &#39;imgs/evaluacion32.png&#39;, alt: &#39;Evaluación&#39;} Módulo Psicosis (PSI) - Evaluación&quot;
--
&lt;h4 class=&quot;pregunta&quot;&gt;
&lt;span class=&quot;listacirculo&quot;&gt;3&lt;/span&gt; ¿Sufre la persona de psicosis?
&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;
&lt;b&gt;&amp;#11088;¿Tiene la persona al menos dos de los síntomas siguientes?&lt;/b&gt;
&lt;/li&gt;
&lt;ul&gt;
  &lt;li&gt; Estados delirantes, creencias fijas falsas no compartidas por otros en la cultura de la persona.
  &lt;/li&gt;
  &lt;li&gt;Alucinaciones, oye voces o ve cosas que no existen
  &lt;/li&gt;
  &lt;li&gt;Lenguaje o conducta desorganizados, por ejemplo, habla incoherente o ilógicamente, como murmurar o reírse solo, apariencia extraña, signos de descuido de sí mismo o apariencia descuidada.
  &lt;/li&gt;
&lt;/ul&gt;
&lt;/ul&gt;

&lt;table style=&quot;width:100%&quot;&gt;
  &lt;tr&gt;
    &lt;td style=&quot;text-align:left&quot;&gt;&amp;#128073;[[Responder NO|Consulta Especialista]]&amp;#128072;&lt;/td&gt;
    &lt;td style=&quot;text-align:right&quot;&gt;&amp;#128073;[[Responder SI|Sospecha Psicosis]]&amp;#128072;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
&lt;br /&gt;</tw-passagedata><tw-passagedata pid="11" name="Sospecha Bipolar" tags="" position="511,440" size="100,100">config.header.left:&quot;{embed image: &#39;imgs/evaluacion32.png&#39;, alt: &#39;Evaluación&#39;} Módulo Psicosis (PSI) - Evaluación&quot;
--
&lt;center&gt;&lt;h3 class=&quot;titulo&quot;&gt;
Sospeche que hay un episodio maníaco del TRASTORNO BIPOLAR
&lt;/h3&gt;&lt;/center&gt;
&lt;ul&gt;
&lt;li&gt;
&amp;#128204;&lt;b&gt;CONSEJO CLÍNICO:&lt;/b&gt; Las personas con trastorno bipolar pueden experimentar a lo largo de su vida solo episodios maníacos o una combinación de episodios maníacos y depresivos. &amp;#128206;Para aprender a evaluar y controlar el episodio depresivo del trastorno bipolar, &amp;#128204;
&lt;a href=&#39;{$vinculoOtroModulo}/Depresion_DEP&#39; target=&quot;_blank&quot;&gt;vaya al Módulo de Módulo de Depresión (DEP).&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;&amp;#10071;&lt;b&gt;SI HAY RIESGO INMINENTE DE SUICIDIO, EVALÚELO Y TRÁTELO&lt;/b&gt; 
antes de proseguir. &amp;#128204;&lt;a href=&#39;{$vinculoOtroModulo}/modulo_autolesion&#39; target=&quot;_blank&quot;&gt;Vaya al módulo Autolesión / Suicidio (SUI).&lt;/a&gt;.
&lt;/li&gt;
&lt;/ul&gt;

&lt;table style=&quot;width:100%&quot;&gt;
  &lt;tr&gt;
    &lt;td style=&quot;text-align:left&quot;&gt;&amp;nbsp;&lt;/td&gt;
    &lt;td style=&quot;text-align:right&quot;&gt;&amp;#128073;[[Ir al Protocolo 1 de Manejo|Manejo Protocolo 1]]&amp;#128072;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
&lt;br /&gt;</tw-passagedata><tw-passagedata pid="12" name="Cuadro 5 comportamientos agresivos" tags="" position="82,593" size="100,100">config.header.left:&quot;{embed image: &#39;imgs/evaluacion32.png&#39;, alt: &#39;Evaluación&#39;} Módulo Psicosis (PSI) - Evaluación&quot;
--
&lt;center&gt;&lt;h3 class=&quot;titulo&quot;&gt;
&amp;#128203;EVALUACIÓN
&lt;/h3&gt;&lt;/center&gt;
&lt;ul&gt;
&lt;li&gt;Intente comunicarse con la persona.&lt;/li&gt;
&lt;li&gt;Evalúela para determinar la causa subyacente:&lt;/li&gt;
&lt;ul&gt;
  &lt;li&gt;Determine la glucemia. Si es baja, suministre glucosa. &lt;/li&gt;
  &lt;li&gt;Compruebe los signos vitales, incluidas la temperatura y la saturación de oxígeno. Administre oxígeno de ser necesario.&lt;/li&gt;
  &lt;li&gt;Descarte el delirio y causas físicas, incluida la intoxicación.&lt;/li&gt;
  &lt;li&gt;Descarte el consumo de drogas y alcohol. Considere específicamente la intoxicación con estimulantes o la abstinencia de alcohol o sedantes. &amp;#128204;&lt;a href=&#39;{$vinculoOtroModulo}/modulo_sus&#39; target=&quot;_blank&quot;&gt;Vaya al Módulo de Trastornos por el Consumo de Sustancias (SUS).&lt;/a&gt;  &lt;/li&gt;
  &lt;li&gt;Descarte la agitación debida a la psicosis o a un episodio maníaco en el trastorno bipolar. &amp;#128204;&lt;a href=&#39;{$vinculoOtroModulo}/modulo_psi&#39; target=&quot;_blank&quot;&gt;Vaya al Módulo de Psicosis (PSI)&lt;/a&gt;, “Evaluación”. &lt;/li&gt;
&lt;/ul&gt;
&lt;/ul&gt;

&lt;center&gt;&lt;h3 class=&quot;titulo&quot;&gt;
&amp;#128173;COMUNICACIÓN
&lt;/h3&gt;&lt;/center&gt;
&lt;ul&gt;
&lt;li&gt;¡Primero la seguridad!&lt;/li&gt;
&lt;li&gt;Manténgase tranquilo y aliente al paciente a que hable sobre sus inquietudes.  &lt;/li&gt;
&lt;li&gt;Use un tono de voz tranquilo y trate de abordar las inquietudes si es posible&lt;/li&gt;
&lt;li&gt;Escuche atentamente. Dedique tiempo a la persona.  &lt;/li&gt;
&lt;li&gt;Nunca se ría de la persona.  &lt;/li&gt;
&lt;li&gt;No responda agresivamente a la provocación del paciente. &lt;/li&gt;
&lt;li&gt;Trate de encontrar la fuente del problema y las soluciones
para la persona.&lt;/li&gt;
&lt;li&gt;Haga participar a los cuidadores y otros integrantes del personal.&lt;/li&gt;
&lt;li&gt;Excluya de la situación a quien pueda ser un factor desencadenante de la agresión.&lt;/li&gt;
&lt;li&gt;Si se han agotado todas las posibilidades y la persona sigue siendo agresiva, puede ser necesario usar medicación (si la hay) para prevenir lesiones.&lt;/li&gt;
&lt;/ul&gt;
&lt;center&gt;&lt;h3 class=&quot;titulo&quot;&gt;
&amp;#128137;SEDACIÓN Y USO DE MEDICACIÓN
&lt;/h3&gt;&lt;/center&gt;
&lt;ul&gt;
&lt;li&gt;Sede a la persona según sea apropiado para prevenir lesiones. &lt;/li&gt;
&lt;li&gt;Para la agitación debida a la psicosis o la manía, considere el uso del haloperidol por vía oral o intramuscular, 2mg por hora hasta 5 dosis (un máximo de 10 mg). Precaución: las dosis elevadas de haloperidol pueden causar reacciones distónicas. Use biperideno para tratar las reacciones agudas.&lt;/li&gt;
&lt;li&gt;Para la agitación debida al consumo de sustancias, como la
abstinencia de alcohol o sedantes, o la intoxicación con
estimulantes, use diazepam, 10-20 mg administrados por vía oral y
repetidos según sea necesario.&amp;#128204;&lt;a href=&#39;{$vinculoOtroModulo}/modulo_sus&#39; target=&quot;_blank&quot;&gt;Vaya al Módulo de Trastornos por el Consumo de Sustancias (SUS).&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;b&gt;En caso de violencia extrema.&lt;/b&gt;
	&lt;ul&gt;
	&lt;li&gt;Busque ayuda de la policía o el personal.&lt;/li&gt;
	&lt;li&gt;Use haloperidol en una dosis de 5 mg administrada por vía intramuscular, repetida a los 15-30 minutos de ser necesario (15mg como máximo).&lt;/li&gt;
	&lt;li&gt;Consulte a un especialista.&amp;#128657;&lt;/li&gt;
	&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;b&gt;Si la persona sigue agitada,&lt;/b&gt; vuelva a verificar la saturación de
oxígeno, los signos vitales y la glucemia. Considere la posibilidad de
que sienta dolor. Derive a la persona al hospital.&amp;#128657;&lt;/li&gt;
&lt;li&gt;&lt;b&gt;Una vez que cede la agitación, vaya a la página principal y seleccione los módulos pertinentes para la evaluación.&lt;/b&gt;&lt;/li&gt;
&lt;li&gt;&amp;#10071;&lt;b&gt;Grupos de población especiales:&lt;/b&gt; Consulte a un especialista para el tratamiento.&amp;#128657;&lt;/li&gt;
&lt;/ul&gt;

&lt;table style=&quot;width:100%&quot;&gt;
  &lt;tr&gt;
    &lt;td style=&quot;text-align:left&quot;&gt;&amp;#128073;{back link , label : &#39;Devolverse&#39; }&amp;#128072;&lt;/td&gt;
    &lt;td style=&quot;text-align:right&quot;&gt;&amp;nbsp;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
&lt;br /&gt;</tw-passagedata><tw-passagedata pid="13" name="Manejo Protocolo 1" tags="" position="662,429" size="100,100">config.header.left:&quot;{embed image: &#39;imgs/manejo32.png&#39;, alt: &#39;Evaluación&#39;} Módulo Psicosis (PSI) - Manejo&quot;
--
&lt;center&gt;
&lt;h4 class=&quot;pregunta&quot;&gt;
MANEJO. PROTOCOLO &amp;#10102;. &lt;br/&gt;Episodio maníaco en el trastorno bipolar.
&lt;/h4&gt;
&lt;/center&gt;
&lt;ul&gt;
&lt;li&gt;Proporcione psicoeducación a la persona y los cuidadores.&amp;#128204;[[Ver Recomendaciones|Intervencion 2.1 Psicoeducación]]
&lt;/li&gt;
&lt;li&gt;  &lt;b&gt;Intervención farmacológica.&lt;/b&gt;&amp;#128204;[[Ver Recomendaciones|Recomendaciones 2.6]] &amp;#10071;&lt;span style=&quot;color:red&quot;&gt;Solamente las puede realizar un Médico.&lt;/span&gt;
&lt;ul&gt;
&lt;li&gt;&amp;#10071;&lt;b&gt;Si el paciente está siendo tratado con antidepresivos, DESCONTINÚE la medicación&lt;/b&gt; para prevenir un mayor riesgo de manía.&lt;/li&gt;
&lt;li&gt;&lt;b&gt;Empiece el tratamiento&lt;/b&gt; con litio, valproato, carbamazepina o antipsicóticos. Considere usar benzodiazepina a corto plazo (2 a 4 semanas como máximo) para el trastorno conductual o la agitación. &lt;/li&gt;
&lt;/ul&gt;

&lt;/li&gt;
&lt;li&gt;Promueva el funcionamiento adecuado en las actividades diarias. &amp;#128204;[[Ver Recomendaciones|Intervenciones 2.3 Actividades Cotidianas]]
&lt;/li&gt;
&lt;li&gt;Garantice la seguridad de la persona y la seguridad de otros.
&lt;/li&gt;
&lt;li&gt;Efectúe un seguimiento periódico.
&lt;/li&gt;
&lt;li&gt;Apoye la rehabilitación en la comunidad.&lt;/li&gt;
&lt;li&gt;Reduzca el estrés y fortalezca los apoyos sociales.&amp;#128204;[[Ver Recomendaciones|Intervencion 2.2 Reducir Estres]]&lt;/li&gt;
&lt;li&gt;&amp;#128204;[[Siga estos Consejos Generales para los Cuidadores.|Intervencion 2.4 Consejos Generales]]&lt;/li&gt;
&lt;/ul&gt;


&lt;table style=&quot;width:100%&quot;&gt;
  &lt;tr&gt;
    &lt;td style=&quot;text-align:left&quot;&gt;&amp;#128073;{restart link, label: &#39;Fin de la Ruta. Ir a Inicio.&#39;}&amp;#128072;&lt;/td&gt;
    &lt;td style=&quot;text-align:right&quot;&gt;&amp;#128073;[[Ir a Seguimiento|Ir a Seguimiento]]&amp;#128072;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
</tw-passagedata><tw-passagedata pid="14" name="Consulta Especialista" tags="" position="172,751" size="100,100">config.header.left:&quot;{embed image: &#39;imgs/evaluacion32.png&#39;, alt: &#39;Evaluación&#39;} Módulo Psicosis (PSI) - Evaluación&quot;
--
&lt;ul&gt;
&lt;li&gt; &lt;h3&gt;Considere la necesidad de consultar a un especialista para examinar otras causas posibles de psicosis.&lt;/h3&gt;
&lt;/li&gt;
&lt;/ul&gt;



&lt;h3 class=&quot;titulo&quot;&gt;&amp;#128681;Fin de esta Ruta&lt;/h3&gt;
&lt;table style=&quot;width:100%&quot;&gt;
  &lt;tr&gt;
    &lt;td style=&quot;text-align:left&quot;&gt;&amp;#128073;{back link, label: &#39;Devolverse&#39;}&amp;#128072;&lt;/td&gt;
    &lt;td style=&quot;text-align:right&quot;&gt;&amp;#128073;{restart link, label: &#39;Reiniciar Ruta&#39;}&amp;#128072;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;</tw-passagedata><tw-passagedata pid="15" name="Sospecha Psicosis" tags="" position="412,753" size="100,100">config.header.left:&quot;{embed image: &#39;imgs/evaluacion32.png&#39;, alt: &#39;Evaluación&#39;} Módulo Psicosis (PSI) - Evaluación&quot;
--
&lt;center&gt;&lt;h3 class=&quot;titulo&quot;&gt;
Sospeche que se trata de un caso de PSICOSIS
&lt;/h3&gt;&lt;/center&gt;
&lt;ul&gt;
&lt;li&gt;&amp;#10071;&lt;b&gt;SI HAY RIESGO INMINENTE DE SUICIDIO, EVALÚELO Y TRÁTELO&lt;/b&gt; 
antes de proseguir. &amp;#128204;&lt;a href=&#39;{$vinculoOtroModulo}/modulo_autolesion&#39; target=&quot;_blank&quot;&gt;Vaya al módulo Autolesión / Suicidio (SUI).&lt;/a&gt;.
&lt;/li&gt;
&lt;/ul&gt;

&lt;table style=&quot;width:100%&quot;&gt;
  &lt;tr&gt;
    &lt;td style=&quot;text-align:left&quot;&gt;&amp;nbsp;&lt;/td&gt;
    &lt;td style=&quot;text-align:right&quot;&gt;&amp;#128073;[[Ir al Protocolo 2 de Manejo|Manejo Protocolo 2]]&amp;#128072;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
&lt;br /&gt;</tw-passagedata><tw-passagedata pid="16" name="Manejo Protocolo 2" tags="" position="598,795" size="100,100">config.header.left:&quot;{embed image: &#39;imgs/manejo32.png&#39;, alt: &#39;Evaluación&#39;} Módulo Psicosis (PSI) - Manejo&quot;
--
&lt;center&gt;
&lt;h4 class=&quot;pregunta&quot;&gt;
MANEJO. PROTOCOLO &amp;#10103;. Psicosis.&lt;/h4&gt;
&lt;/center&gt;
&lt;ul&gt;
&lt;li&gt;Proporcione psicoeducación a la persona y los cuidadores.&amp;#128204;[[Ver Recomendaciones|Intervencion 2.1 Psicoeducación]]
&lt;/li&gt;
&lt;li&gt;  &lt;b&gt;Empiece la medicación antipsicótica. &amp;#128204;&lt;/b&gt;[[Ver Recomendaciones|Intervenciones 2.5 Psicosis]]. Comience con una dosis baja dentro del margen terapéutico y auméntela lentamente hasta alcanzar la dosis eficaz más baja, a fin de reducir el riesgo de padecer efectos secundarios.
&lt;/li&gt;
&lt;li&gt;Promueva el funcionamiento adecuado en las actividades diarias. &amp;#128204;[[Ver Recomendaciones|Intervenciones 2.3 Actividades Cotidianas]]
&lt;/li&gt;
&lt;li&gt;Garantice la seguridad de la persona y la seguridad de otros.
&lt;/li&gt;
&lt;li&gt;Efectúe un seguimiento periódico.
&lt;/li&gt;
&lt;li&gt;Apoye la rehabilitación en la comunidad.&lt;/li&gt;
&lt;li&gt;Reduzca el estrés y fortalezca los apoyos sociales.&amp;#128204;[[Ver Recomendaciones|Intervencion 2.2 Reducir Estres]]&lt;/li&gt;
&lt;li&gt;&amp;#128204;[[Siga estos Consejos Generales para los Cuidadores.|Intervencion 2.4 Consejos Generales]]&lt;/li&gt;
&lt;/ul&gt;


&lt;table style=&quot;width:100%&quot;&gt;
  &lt;tr&gt;
    &lt;td style=&quot;text-align:left&quot;&gt;&amp;#128073;{restart link, label: &#39;Fin de la Ruta. Ir a Inicio.&#39;}&amp;#128072;&lt;/td&gt;
    &lt;td style=&quot;text-align:right&quot;&gt;&amp;#128073;[[Ir a Seguimiento|Ir a Seguimiento]]&amp;#128072;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
</tw-passagedata><tw-passagedata pid="17" name="Intervencion 2.1 Psicoeducación" tags="" position="1096,303" size="100,100">config.header.left:&quot;{embed image: &#39;imgs/evaluacion32.png&#39;, alt: &#39;Evaluación&#39;} Módulo Psicosis (PSI) - Manejo&quot;
--
&lt;center&gt;&lt;h3 class=&quot;titulo&quot;&gt;
&amp;#128588;Intervenciones Psicosociales. Psicoeducación.
&lt;/h3&gt;&lt;/center&gt;

&lt;b&gt;Mensajes clave para la persona y sus cuidadores:&lt;/b&gt;
&lt;ul&gt;
&lt;li&gt;
Explique que los síntomas se deben a un trastorno de salud
mental, que la psicosis y los trastornos bipolares pueden ser
tratados y que la persona puede recuperarse. Aclare las
ideas erróneas comunes acerca de la psicosis y el trastorno
bipolar. 
&lt;/li&gt;
&lt;li&gt;&amp;#10060;No culpe a la persona o a su familia ni los acuse de ser la causa de los síntomas. &lt;/li&gt;
&lt;li&gt;Señale a la persona y a la familia que la persona tiene que
tomar los medicamentos prescritos y regresar para el
seguimiento periódicamente.
&lt;/li&gt;
&lt;li&gt;Explique que la reaparición o el empeoramiento de los
síntomas son comunes y que es importante reconocerlos
tempranamente y concurrir al establecimiento de salud
cuanto antes.&lt;/li&gt;
&lt;li&gt; Planifique un calendario sistemático de trabajo o actividades
escolares que &lt;b&gt;evite la privación del sueño y el estrés&lt;/b&gt; tanto
a la persona como a los cuidadores. Aliente a la persona a
solicitar consejos en relación con decisiones importantes,
especialmente las concernientes a dinero o compromisos
esenciales.&lt;/li&gt;
&lt;li&gt;Recomiende &lt;b&gt;evitar el consumo de alcohol, cannabis u otras drogas no recetadas&lt;/b&gt;, ya que pueden empeorar los síntomas psicóticos o bipolares.&lt;/li&gt;
&lt;li&gt;Informe a la persona sobre cómo mantener un modo de vida
saludable, por ejemplo, una alimentación equilibrada,
actividad física, sueño regular, buena higiene personal y
ningún factor estresante. El estrés puede empeorar los
síntomas psicóticos. Nota: Los cambios del modo de vida
deben continuar tanto tiempo como sea necesario,
posiblemente de manera indefinida. Estos cambios se deben
planificar y llevar a cabo de tal modo que se logre su
sostenibilidad.&lt;/li&gt;
&lt;li&gt;
&lt;b&gt;&amp;#128657;CONSEJO CLINICO: Establezca una relación de armonía con la persona.&lt;/b&gt; La confianza mutua entre la persona y el 
prestador de atención de salud es fundamental 
para garantizar la observancia terapéutica y los
resultados a largo plazo. 
&lt;/li&gt;
&lt;/ul&gt;

&lt;table style=&quot;width:100%&quot;&gt;
  &lt;tr&gt;
    &lt;td style=&quot;text-align:left&quot;&gt;&amp;#128073;{back link , label : &#39;Devolverse&#39;}&amp;#128072;&lt;/td&gt;
    &lt;td style=&quot;text-align:right&quot;&gt;&amp;#128073;[[Ir a Seguimiento]]&amp;#128072;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
&lt;br /&gt;</tw-passagedata><tw-passagedata pid="18" name="Recomendaciones 2.6" tags="" position="1159,883" size="100,100">config.header.left:&quot;{embed image: &#39;imgs/evaluacion32.png&#39;, alt: &#39;Evaluación&#39;} Módulo Psicosis (PSI) - Manejo&quot;
--
&lt;center&gt;&lt;h3 class=&quot;titulo&quot;&gt;
&amp;#128137;Intervenciones Farmacológicas. Episodio maníaco en el trastorno bipolar. &amp;#10071;&lt;span style=&quot;color:red&quot;&gt;Solamente las puede realizar un Médico.&lt;/span&gt;
&lt;/h3&gt;&lt;/center&gt;
&lt;b&gt; Si el paciente está en tratamiento con antidepresivos:&lt;/b&gt;
&lt;ul&gt;
&lt;li&gt;&lt;b&gt;DESCONTINUAR LOS ANTIDEPRESIVOS&lt;/b&gt; para prevenir un
riesgo mayor de padecer manía.
&lt;/li&gt;
&lt;li&gt;
&lt;b&gt; Empezar el tratamiento con litio, valproato,
carbamazepina o con antipsicóticos.&lt;/b&gt;&amp;#128204;[[Ver Estabilizadores del estado de ánimo|Cuadro 3 Estabilizadores Animo]]. 
&lt;ul&gt;
&lt;li&gt;&amp;#128138;&lt;b&gt;Litio:&lt;/b&gt; considere la posibilidad de usar litio como tratamientode primera línea del trastorno bipolar solo si es factible el
seguimiento clínico y de laboratorio y prescriba el litio solo
con la supervisión de especialistas. Si no son factibles los
exámenes de laboratorio, hay que evitar el litio y se debe
considerar la administración de valproato o carbamazepina.
Si es imprevisible el cumplimiento del tratamiento con litio o
este puede ser interrumpido repentinamente, puede
aumentar el riesgo de recaída. No prescriba litio cuando el
abastecimiento del medicamento puede ser interrumpido
con frecuencia. Si es factible, obtenga estudios de la función
renal y tiroidea, pruebas de recuento sanguíneo completo,
ECG y pruebas de embarazo antes de empezar el
tratamiento. 
 &lt;/li&gt;
&lt;li&gt;&amp;#128138;&lt;b&gt;Valproato y carbamazepina:&lt;/b&gt; Considere recetar estos
medicamentos si no es factible el seguimiento clínico o de
laboratorio para el litio o si no se dispone de un especialista
para supervisar la prescripción de litio.&lt;/li&gt;
&lt;li&gt;&amp;#128138;&lt;b&gt;Haloperidol y risperidona:&lt;/b&gt; considere recetar haloperidol y risperidona solo si no es factible ningún seguimiento clínico
o de laboratorio para comenzar la administración de litio o
valproato. La risperidona se puede usar como una opción al
haloperidol en las personas con manía bipolar si se puede
garantizar la disponibilidad del medicamento y su costo no
es una limitación.&lt;/li&gt;
&lt;li&gt;&amp;#10071;&lt;b&gt;PRECAUCIONES:&lt;/b&gt; En el caso de las mujeres durante el embarazo o la lactancia, evite recetar valproato, litio y carbamazepina. Se recomienda usar &lt;b&gt;haloperidol&lt;/b&gt; en dosis bajas, con precaución y bajo la
supervisión de un especialista, si es factible.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;b&gt;Considere administrar benzodiazepina a corto plazo&lt;/b&gt; (2
a 4 semanas como máximo) para los trastornos
conductuales o la agitación:
&lt;ul&gt;
&lt;li&gt;Las personas con manía que están experimentando agitación pueden beneficiarse con el uso a corto plazo (2 a 4 semanas como máximo) de una benzodiazepina, como el diazepam. &lt;/li&gt;
&lt;li&gt; Se deben descontinuar gradualmente las benzodiazepinas 
     tan pronto como mejoren los síntomas, ya que se puede  
     desarrollar tolerancia. &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;b&gt;Continúe el tratamiento de mantenimiento&lt;/b&gt;  por al menos 2
años después del último episodio bipolar.
&lt;ul&gt;
&lt;li&gt;Se puede dar litio o valproato para el tratamiento de 
    mantenimiento del trastorno bipolar. Si el tratamiento con 
    uno de estos agentes no es factible, se pueden usar   
    haloperidol, clorpromazina o carbamazepina. &lt;b&gt;&lt;i&gt;Brinde  
    tratamiento de mantenimiento en los entornos de  
    atención primaria bajo la supervisión de     
         especialistas.&lt;/i&gt;&lt;/b&gt; &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;

&lt;table style=&quot;width:100%&quot;&gt;
  &lt;tr&gt;
    &lt;td style=&quot;text-align:left&quot;&gt;&amp;#128073;{back link , label : &#39;Devolverse&#39;}&amp;#128072;&lt;/td&gt;
    &lt;td style=&quot;text-align:right&quot;&gt;&amp;#128073;[[Ir a Seguimiento]]&amp;#128072;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
&lt;br /&gt;</tw-passagedata><tw-passagedata pid="19" name="Intervenciones 2.3 Actividades Cotidianas" tags="" position="1083,540" size="100,100">config.header.left:&quot;{embed image: &#39;imgs/evaluacion32.png&#39;, alt: &#39;Evaluación&#39;} Módulo Psicosis (PSI) - Manejo&quot;
--
&lt;center&gt;&lt;h3 class=&quot;titulo&quot;&gt;
&amp;#128588;Intervenciones Psicosociales. Promover el funcionamiento
adecuado en las actividades cotidianas de la vida.
&lt;/h3&gt;&lt;/center&gt;

&lt;ul&gt;
&lt;li&gt;
Haga que la persona continúe en la medida de lo posible sus
actividades sociales, educativas y ocupacionales habituales. Es
mejor para la persona tener un trabajo o estar ocupado en
otras cosas importantes. 
&lt;/li&gt;
&lt;li&gt;
Facilite la inclusión de la persona en actividades económicas,
como el empleo con apoyo culturalmente apropiado. 
&lt;/li&gt;
&lt;li&gt;
Brinde a la persona capacitación en aptitudes para la vida o
aptitudes sociales que mejoren las habilidades para la vida
independiente de las personas con psicosis y trastorno bipolar y
las de sus familias o cuidadores.   
&lt;/li&gt;
&lt;li&gt;
Facilite, si es factible y necesario, una vida independiente y una
vivienda con apoyo que sea cultural y contextualmente apropiada
en la comunidad.
&lt;/li&gt;
&lt;/ul&gt;

&lt;table style=&quot;width:100%&quot;&gt;
  &lt;tr&gt;
    &lt;td style=&quot;text-align:left&quot;&gt;&amp;#128073;{back link , label : &#39;Devolverse&#39;}&amp;#128072;&lt;/td&gt;
    &lt;td style=&quot;text-align:right&quot;&gt;&amp;#128073;[[Ir a Seguimiento]]&amp;#128072;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
&lt;br /&gt;</tw-passagedata><tw-passagedata pid="20" name="Intervencion 2.2 Reducir Estres" tags="" position="1104,429" size="100,100">config.header.left:&quot;{embed image: &#39;imgs/evaluacion32.png&#39;, alt: &#39;Evaluación&#39;} Módulo Psicosis (PSI) - Manejo&quot;
--
&lt;center&gt;&lt;h3 class=&quot;titulo&quot;&gt;
&amp;#128588;Intervenciones Psicosociales. Reducir el estrés y fortalecer 
los apoyos sociales.
&lt;/h3&gt;&lt;/center&gt;

&lt;ul&gt;
&lt;li&gt;
Establezca la coordinación con las instancias sanitarias y sociales 
disponibles para satisfacer las necesidades de salud física, social
y mental de la familia. 
&lt;/li&gt;
&lt;li&gt;
Determine las actividades sociales previas de la persona que,
de reiniciarse, tendrían el potencial de prestarle apoyo
psicológico y social directo o indirecto; por ejemplo, reuniones
de familia, salidas con amigos, visitas a vecinos, actividades
sociales en el lugar de trabajo, deportes y actividades de la
comunidad. Aliente a la persona a que reanude estas
actividades sociales y asesore a los familiares acerca de esto.
&lt;/li&gt;
&lt;li&gt;
Aliente a la persona y a los cuidadores a que mejoren los
sistemas de apoyo social.
&lt;/li&gt;
&lt;li&gt;
&lt;b&gt;&amp;#128657;CONSEJO CLINICO.&lt;/b&gt; Garantice que las personas con psicosis 
sean tratadas con respeto y dignidad. Para mayores detalles &amp;#128204;&lt;a href=&#39;{$vinculoOtroModulo}/modulo_ape&#39; target=&quot;_blank&quot;&gt;vaya al Módulo Sobre la Atención y Prácticas Esenciales de Salud (APE).&lt;/a&gt;
&lt;/li&gt;
&lt;/ul&gt;

&lt;table style=&quot;width:100%&quot;&gt;
  &lt;tr&gt;
    &lt;td style=&quot;text-align:left&quot;&gt;&amp;#128073;{back link , label : &#39;Devolverse&#39;}&amp;#128072;&lt;/td&gt;
    &lt;td style=&quot;text-align:right&quot;&gt;&amp;#128073;[[Ir a Seguimiento]]&amp;#128072;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
&lt;br /&gt;</tw-passagedata><tw-passagedata pid="21" name="Intervenciones 2.5 Psicosis" tags="" position="1025,788" size="100,100">config.header.left:&quot;{embed image: &#39;imgs/evaluacion32.png&#39;, alt: &#39;Evaluación&#39;} Módulo Psicosis (PSI) - Manejo&quot;
--
&lt;center&gt;&lt;h3 class=&quot;titulo&quot;&gt;
&amp;#128137;Intervenciones Farmacológicas. Psicosis.
&lt;/h3&gt;&lt;/center&gt;

&lt;ul&gt;
&lt;li&gt;
Se debe recetar sistemáticamente antipsicóticos a una
persona con psicosis.
&lt;/li&gt;
&lt;li&gt;
&lt;b&gt;Comience la medicación antipsicótica de inmediato.&lt;/b&gt;&amp;#128204;[[Ver Medicamentos antipsicóticos|Cuadro 1 Med Antipsicoticos]]
&lt;/li&gt;
&lt;li&gt;
Recete solo un antipsicótico a la vez.  
&lt;/li&gt;
&lt;li&gt;Comience con la dosis más baja y aumente gradual y
lentamente la dosis para reducir el riesgo de efectos
secundarios.
&lt;/li&gt;
&lt;li&gt;
Pruebe la medicación en &lt;b&gt;una dosis normalmente eficaz
por al menos 4 a 6 semanas&lt;/b&gt; antes de considerarla ineficaz
&lt;/li&gt;
&lt;li&gt;
Siga vigilando esa dosis con la mayor frecuencia posible y según
sea necesario durante las 4 a 6 primeras semanas de
tratamiento. Si no hay ninguna mejoría, vea el &amp;#128204;[[Seguimiento|Ir a Seguimiento]] y &amp;#128204;[[Evalúe la observancia del tratamiento|Cuadro 4 Evaluar Observancia]].
&lt;/li&gt;
&lt;li&gt;Vigile, si es posible, el peso, la presión arterial, el azúcar en
ayunas, el colesterol y el ECG en las personas con medicación
antipsicótica (lea las siguientes precauciones).
&lt;/li&gt;
&lt;li&gt;
&amp;#10071;&lt;b&gt;PRECAUCIONES. Observe si se presentan los siguientes efectos  
    secundarios:&lt;/b&gt; 
&lt;ul&gt;
	&lt;li&gt;&lt;b&gt;Efectos secundarios extrapiramidales:&lt;/b&gt; acatisia,reacciones distónicas agudas, temblor, respiración en ruedadentada, rigidez muscular y discinesia tardía. Trate con medicamentos anticolinérgicos cuando estén indicados y
disponibles &amp;#128204;[[ver Medicamentos anticolinérgicos|Cuadro 2 Med anticolinergicos]].
&lt;/li&gt;
	&lt;li&gt;
	&lt;b&gt;Cambios metabólicos:&lt;/b&gt; aumento de peso, hipertensión,  
     glucemia y colesterol elevados.
	&lt;/li&gt;
	&lt;li&gt;
	&lt;b&gt;Cambios electrocardiográficos (intervalo QT 
    prolongado):&lt;/b&gt; monitoree los ECG si es posible.
	&lt;/li&gt;
	&lt;li&gt;
	&lt;b&gt;Síndrome neuroléptico maligno:&lt;/b&gt; un trastorno raro y 
    potencialmente mortal caracterizado por la rigidez muscular, 
    la temperatura elevada y la hipertensión.
	&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;

&lt;table style=&quot;width:100%&quot;&gt;
  &lt;tr&gt;
    &lt;td style=&quot;text-align:left&quot;&gt;&amp;#128073;{back link , label : &#39;Devolverse&#39;}&amp;#128072;&lt;/td&gt;
    &lt;td style=&quot;text-align:right&quot;&gt;&amp;#128073;[[Ir a Seguimiento]]&amp;#128072;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
&lt;br /&gt;</tw-passagedata><tw-passagedata pid="22" name="Intervencion 2.4 Consejos Generales" tags="" position="1047,651" size="100,100">config.header.left:&quot;{embed image: &#39;imgs/evaluacion32.png&#39;, alt: &#39;Evaluación&#39;} Módulo Psicosis (PSI) - Manejo&quot;
--
&lt;center&gt;&lt;h3 class=&quot;titulo&quot;&gt;
&amp;#128588;Intervenciones Psicosociales. Consejos generales para los
cuidadores.
&lt;/h3&gt;&lt;/center&gt;

&lt;ul&gt;
&lt;li&gt;
&amp;#10060;No trate de convencer a la persona de que sus creencias o 
experiencias son falsas o irreales. Trate de ser neutral y
prestar apoyo, aun cuando la persona muestre una conducta
extraña. 
&lt;/li&gt;
&lt;li&gt;
&amp;#10060;Evite expresar críticas u hostilidad severas o constantes hacia la persona con psicosis.
&lt;/li&gt;
&lt;li&gt;
De a la persona libertad de movimiento. Evite restringirla y
también garantice su seguridad básica y la de otras personas.  
&lt;/li&gt;
&lt;li&gt;
En general es mejor que la persona viva con su familia o
miembros de la comunidad en un entorno propicio, fuera del 
entorno hospitalario. Se debe evitar la hospitalización a largo 
plazo.
&lt;/li&gt;
&lt;/ul&gt;

&lt;table style=&quot;width:100%&quot;&gt;
  &lt;tr&gt;
    &lt;td style=&quot;text-align:left&quot;&gt;&amp;#128073;{back link , label : &#39;Devolverse&#39;}&amp;#128072;&lt;/td&gt;
    &lt;td style=&quot;text-align:right&quot;&gt;&amp;#128073;[[Ir a Seguimiento]]&amp;#128072;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
&lt;br /&gt;</tw-passagedata><tw-passagedata pid="23" name="Cuadro 1 Med Antipsicoticos" tags="" position="1343,477" size="100,100">config.header.left:&quot;{embed image: &#39;imgs/manejo32.png&#39;, alt: &#39;Manejo&#39;} Módulo Psicosis (PSI) - Manejo&quot;
--
&lt;h4 class=&quot;pregunta&quot;&gt;
    &amp;#127775;Intervenciones Farmacológicas - Medicamentos antipsicóticos
    &lt;/h4&gt;
    &lt;ul&gt;
	&lt;li&gt;&lt;b&gt;&amp;#128138;&amp;#128137;HALOPERIDOL.&lt;/b&gt;&lt;/li&gt;
      &lt;li&gt; &lt;b&gt;Dosificación:&lt;/b&gt;
            &lt;ul&gt;
            &lt;li&gt;&lt;b&gt;Comience&lt;/b&gt; con 1,5-3 mg/día.
            &lt;/li&gt;
            &lt;li&gt;&lt;b&gt;Aumente&lt;/b&gt; según sea necesario (hasta 20 mg/día como máximo).
            &lt;/li&gt;
            &lt;li&gt;&lt;b&gt;Vía de administración:&lt;/b&gt;  oral o intramuscular (i.m.). 
            &lt;/li&gt;
            &lt;/ul&gt;
        &lt;/li&gt;
      &lt;li&gt; &lt;b&gt;Efectos Secundarios:&lt;/b&gt;
            &lt;ul&gt;
            &lt;li&gt;
            &lt;b&gt;Comunes:&lt;/b&gt;  sedación, mareo, visión borrosa, sensación de sequedad en la boca, retención urinaria, estreñimiento. 
            &lt;/li&gt;
            &lt;li&gt;&lt;b&gt;Graves:&lt;/b&gt; hipotensión ortostática, efectos secundarios
                extrapiramidales, alteraciones electrocardiográficas
                (intervalo QT prolongado), aumento de peso, galactorrea,
                amenorrea, síndrome neuroléptico maligno.                
            &lt;/li&gt;
            &lt;/ul&gt;
        &lt;/li&gt;
		&lt;li&gt; &lt;b&gt;Contraindicaciones / Precauciones:&lt;/b&gt; 
            &lt;ul&gt;
            &lt;li&gt;
            &lt;b&gt;Precaución en los pacientes con: &lt;/b&gt;enfermedades renales, hepatopatías,
                cardiopatías, síndrome del intervalo QT prolongado o que toman
                medicamentos que prolongan el intervalo QT. Monitoree los ECG si es
                posible. 
            &lt;/li&gt;            
            &lt;/ul&gt;
        &lt;/li&gt;
    &lt;/ul&gt;
    &lt;br/&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;b&gt;&amp;#128138;RISPERIDONA.&lt;/b&gt;&lt;/li&gt;
      &lt;li&gt; &lt;b&gt;Dosificación:&lt;/b&gt;
            &lt;ul&gt;
            &lt;li&gt;&lt;b&gt;Comience&lt;/b&gt; con 1 mg/día.
            &lt;/li&gt;
            &lt;li&gt;&lt;b&gt;Aumente&lt;/b&gt; a 2-6 mg/día (hasta 10 mg como máximo).                
            &lt;/li&gt;
            &lt;li&gt;&lt;b&gt;Vía de administración:&lt;/b&gt;  oral. 
            &lt;/li&gt;
            &lt;/ul&gt;
        &lt;/li&gt;
      &lt;li&gt; &lt;b&gt;Efectos Secundarios:&lt;/b&gt;
            &lt;ul&gt;
            &lt;li&gt;
            &lt;b&gt;Comunes:&lt;/b&gt; sedación, mareo, taquicardia. 
            &lt;/li&gt;
            &lt;li&gt;&lt;b&gt;Graves:&lt;/b&gt;  hipotensión ortostática, efectos metabólicos
                (aumento de lípidos, resistencia a la insulina, aumento de
                peso), efectos secundarios extrapiramidales, prolactina
                elevada, disfunción sexual, síndrome neuroléptico maligno.               
            &lt;/li&gt;
            &lt;/ul&gt;
        &lt;/li&gt;
        &lt;li&gt; &lt;b&gt;Contraindicaciones / Precauciones:&lt;/b&gt; 
            &lt;ul&gt;
            &lt;li&gt;
            &lt;b&gt;Precaución en los pacientes con: &lt;/b&gt;cardíopatías
            &lt;/li&gt; 
            &lt;li&gt;
                &lt;b&gt;Interacciones medicamentos:&lt;/b&gt;la carbamazepina puede reducir los
                niveles de risperidona, mientras que la fluoxetina puede aumentar esos
                niveles. 
                &lt;/li&gt;            
            &lt;/ul&gt;
        &lt;/li&gt;
    &lt;/ul&gt;
&lt;br/&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;b&gt;&amp;#128138;CLORPROMAZINA.&lt;/b&gt;&lt;/li&gt;
      &lt;li&gt; &lt;b&gt;Dosificación:&lt;/b&gt;
            &lt;ul&gt;
            &lt;li&gt;&lt;b&gt;Comience&lt;/b&gt; con 25-50 mg/día.
            &lt;/li&gt;
            &lt;li&gt;&lt;b&gt;Aumente&lt;/b&gt;  75-300 mg/día (hasta 1.000 mg pueden ser necesarios en los casos graves).                                
            &lt;/li&gt;
            &lt;li&gt;&lt;b&gt;Vía de administración:&lt;/b&gt;  oral. 
            &lt;/li&gt;
            &lt;/ul&gt;
        &lt;/li&gt;
      &lt;li&gt; &lt;b&gt;Efectos Secundarios:&lt;/b&gt;
            &lt;ul&gt;
            &lt;li&gt;
            &lt;b&gt;Comunes:&lt;/b&gt; sedación, mareo, visión borrosa, sensación de
            sequedad en la boca, retención urinaria, estreñimiento,
            taquicardia.
            &lt;/li&gt;
            &lt;li&gt;&lt;b&gt;Graves:&lt;/b&gt;   hipotensión ortostática, síncope, efectos
                secundarios extrapiramidales, fotosensibilidad, aumento
                de peso, galactorrea, amenorrea, disfunción sexual,
                priapismo, síndrome neuroléptico maligno ,
                agranulocitosis, ictericia.               
            &lt;/li&gt;
            &lt;/ul&gt;
        &lt;/li&gt;
        &lt;li&gt; &lt;b&gt;Contraindicaciones / Precauciones:&lt;/b&gt; 
            &lt;ul&gt;
                &lt;li&gt;&lt;b&gt;Contraindicaciones: &lt;/b&gt; pérdida de conciencia, depresión de la médula
                    ósea, feocromocitoma. &lt;/li&gt;
            &lt;li&gt;
            &lt;b&gt;Precaución en los pacientes con: &lt;/b&gt;enfermedades respiratorias,
            enfermedades renales, hepatopatías, glaucoma, retención urinaria,
            cardiopatías, síndrome del intervalo QT prolongado o que toman
            medicamentos que prolongan el intervalo QT. Monitoree los ECG si es
            posible. 
            &lt;/li&gt; 
            &lt;li&gt;
                &lt;b&gt;Interacciones medicamentos:&lt;/b&gt;
                &lt;ul&gt;
                    &lt;li&gt;
                        Aumenta los efectos de los medicamentos para disminuir la presión  
                        arterial.
                    &lt;/li&gt;
                    &lt;li&gt;Baja la presión arterial si se combina con la epinefrina.
                    &lt;/li&gt;
                    &lt;li&gt; Los niveles en sangre pueden ser mayores cuando se toman 
                        medicamentos antimaláricos como la quinina. &lt;/li&gt;
                &lt;/ul&gt;
                &lt;/li&gt;            
            &lt;/ul&gt;
        &lt;/li&gt;
    &lt;/ul&gt;
	&lt;br/&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;b&gt;&amp;#128137;FLUFENAZINA de depósito/de acción
        prolongada&lt;/b&gt;&lt;/li&gt;
      &lt;li&gt; &lt;b&gt;Dosificación:&lt;/b&gt;
            &lt;ul&gt;
            &lt;li&gt;&lt;b&gt;Comience&lt;/b&gt; con 12,5 mg.
            &lt;/li&gt;
            &lt;li&gt;&lt;b&gt;Use&lt;/b&gt;  12,5-50 mg cada 2-4 semanas.                               
            &lt;/li&gt;
            &lt;li&gt;&lt;b&gt;Vía de administración:&lt;/b&gt; i.m. en la región glútea. 
            &lt;/li&gt;
            &lt;li&gt;&amp;#10060;Evite usarla en las mujeres durante el embarazo o la lactancia.
                &lt;/li&gt;
            &lt;li&gt;&amp;#10060; No la use en niños o adolescentes.&lt;/li&gt;
            &lt;/ul&gt;
        &lt;/li&gt;
      &lt;li&gt; &lt;b&gt;Efectos Secundarios:&lt;/b&gt;
            &lt;ul&gt;
            &lt;li&gt;
            &lt;b&gt;Comunes:&lt;/b&gt;  sedación, mareo, visión borrosa, sensación de
            sequedad en la boca, retención urinaria, estreñimiento,
            taquicardia. 
            &lt;/li&gt;
            &lt;li&gt;&lt;b&gt;Graves:&lt;/b&gt;   hipotensión ortostática, síncope, efectos
                secundarios extrapiramidales, fotosensibilidad, aumento
                de peso, galactorrea, amenorrea, disfunción sexual,
                priapismo, síndrome neuroléptico maligno, agranulocitosis,
                ictericia.                
            &lt;/li&gt;
            &lt;/ul&gt;
        &lt;/li&gt;
        &lt;li&gt; &lt;b&gt;Contraindicaciones / Precauciones:&lt;/b&gt; 
            &lt;ul&gt;
                &lt;li&gt;&lt;b&gt;Contraindicaciones: &lt;/b&gt;pérdida de conciencia, parkinsonismo. &lt;/li&gt;
            &lt;li&gt;
            &lt;b&gt;Precaución en los pacientes con: &lt;/b&gt;cardiopatías, enfermedades renales,
            hepatopatías. Úsela con cuidado en los adultos mayores. 
            &lt;/li&gt; 
            &lt;li&gt;
                &lt;b&gt;Interacciones medicamentos:&lt;/b&gt;
                &lt;ul&gt;
                    &lt;li&gt;
                        Aumenta los efectos de los medicamentos hipotensores.
                    &lt;/li&gt;
                    &lt;li&gt;Puede bajar la presión arterial si se usa junto con epinefrina.
                    &lt;/li&gt;
                &lt;/ul&gt;
                &lt;/li&gt;            
            &lt;/ul&gt;
        &lt;/li&gt;
    &lt;/ul&gt;
	
&lt;h3 class=&quot;titulo&quot;&gt;&amp;#128681;Fin de esta Ruta&lt;/h3&gt;
&lt;table style=&quot;width:100%&quot;&gt;
  &lt;tr&gt;
    &lt;td style=&quot;text-align:left&quot;&gt;&amp;#128073;{back link , label : &#39;Devolverse&#39;}&amp;#128072;&lt;/td&gt;
    &lt;td style=&quot;text-align:right&quot;&gt;&amp;nbsp;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
&lt;br/&gt;</tw-passagedata><tw-passagedata pid="24" name="Cuadro 4 Evaluar Observancia" tags="" position="1270,738" size="100,100">config.header.left:&quot;{embed image: &#39;imgs/manejo32.png&#39;, alt: &#39;Manejo&#39;} Módulo Psicosis (PSI) - Manejo&quot;
--
&lt;h4 class=&quot;pregunta&quot;&gt;
    &amp;#127775;Evalúe la observancia del tratamiento, los efectos secundarios y la dosificación basándose en la situación y las manifestaciones clínicas
    &lt;/h4&gt;
&lt;table style=&quot;width:100%&quot; class=&quot;cuadro&quot;&gt;
    &lt;tr class=&quot;cuadro&quot;&gt;
        &lt;td class=&quot;cuadro&quot; style=&quot;text-align:left;width:30%&quot;&gt;&lt;b&gt;Situación Clínica&lt;/b&gt;&lt;/td&gt;
        &lt;td class=&quot;cuadro&quot; style=&quot;text-align:center;width:70%&quot;&gt;&lt;b&gt;Acción&lt;/b&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr class=&quot;cuadro&quot;&gt;
        &lt;td class=&quot;cuadro&quot; style=&quot;text-align:left;width:30%;vertical-align: top;&quot;&gt;
        &lt;b&gt;La persona no está tolerando 
            la medicación antipsicótica, es decir, la
            persona tiene síntomas extrapiramidalesu otros graves efectos secundarios.&lt;/b&gt;
        &lt;/td&gt;
        &lt;td class=&quot;cuadro&quot; style=&quot;text-align:left;width:70%&quot;&gt;
        &lt;ul&gt;
            &lt;li&gt;
                Reduzca las dosis de la medicación antipsicótica.
            &lt;/li&gt;
            &lt;li&gt;
Si persisten los efectos secundarios, considere la posibilidad de cambiar a otros medicamentos antipsicóticos.
            &lt;/li&gt;
            &lt;li&gt;
    Considere la posibilidad de agregar medicamentos anticolinérgicos para uso a corto plazo a fin de tratar los síntomas extrapiramidales si
    fracasan esas estrategias o si los síntomas son graves, &amp;#128204;[[ver Medicamentos anticolinérgicos|Cuadro 2 Med anticolinergicos]].
            &lt;/li&gt;
        &lt;/ul&gt;
        &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr class=&quot;cuadro&quot;&gt;
        &lt;td class=&quot;cuadro&quot; style=&quot;text-align:left;width:30%;vertical-align: top;&quot;&gt;
        &lt;b&gt;La observancia del régimen terapéutico
            no es satisfactoria.
            &lt;/b&gt;
        &lt;/td&gt;
        &lt;td class=&quot;cuadro&quot; style=&quot;text-align:left;width:70%&quot;&gt;
        &lt;ul&gt;
            &lt;li&gt;
                Aborde con la persona y los cuidadores las razones de la falta  de observancia.
            &lt;/li&gt;
            &lt;li&gt;
                Suministre información con respecto a la importancia de la medicación. 
            &lt;/li&gt;
            &lt;li&gt;
                Considere usar medicamentos antipsicóticos inyectables de acción retardada o de acción prolongada como una opción después de examinar
                los posibles efectos secundarios de la medicación oral en comparación con las preparaciones de acción retardada.
            &lt;/li&gt;
        &lt;/ul&gt;
        &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td class=&quot;cuadro&quot; style=&quot;text-align:left;width:30%;vertical-align: top;&quot;&gt;
        &lt;b&gt;La respuesta al tratamiento es inadecuada
            (es decir, los síntomas persisten 
            o empeoran) a pesar de la observancia 
            de la medicación.
            &lt;/b&gt;
        &lt;/td&gt;
        &lt;td class=&quot;cuadro&quot; style=&quot;text-align:left;width:70%&quot;&gt;
        &lt;ul&gt;
            &lt;li&gt;
                Compruebe que la persona está recibiendo una dosis eficaz de los medicamentos. Si la dosis es baja, auméntela gradualmente hasta la dosis eficaz
más baja para reducir el riesgo de efectos secundarios.
            &lt;/li&gt;
            &lt;li&gt;
                Pregunte acerca del consumo de alcohol o sustancias y adopte las medidas para reducirlo. &amp;#128204;&lt;a href=&#39;{$vinculoOtroModulo}/modulo_sus&#39; target=&quot;_blank&quot;&gt;Vaya al Módulo de Trastornos por el Consumo de Sustancias (SUS).&lt;/a&gt;
            &lt;/li&gt;
            &lt;li&gt;
                Considere usar medicamentos antipsicóticos inyectables de acción retardada o de acción prolongada como una opción después de examinar
                los posibles efectos secundarios de la medicación oral en comparación con las preparaciones de acción retardada.
            &lt;/li&gt;
            &lt;li&gt;Examine los síntomas para descartar enfermedades físicas u otro tipo de trastornos MNS prioritarios. &amp;#128204;&lt;a href=&#39;{$vinculoOtroModulo}/modulo_psi&#39; target=&quot;_blank&quot;&gt;Vaya al Módulo Módulo de Psicosis (PSI).&lt;/a&gt;, vea el PASO 1.
            &lt;/li&gt;
            &lt;li&gt;Considere usar risperidona como una opción para el haloperidol o la clorpromazina, si el costo y la disponibilidad no constituyen una restricción.
            &lt;/li&gt;
            &lt;li&gt; Si la persona no responde a la dosis y la duración adecuadas de más de un medicamento antipsicótico, usando un solo medicamento a la vez, se
                puede considerar el tratamiento antipsicótico combinado, preferentemente bajo la supervisión de un especialista y con un seguimiento clínico muy
                de cerca.
                &lt;/li&gt;
            &lt;li&gt; Considere la consulta con un especialista para el uso de clozapina en los pacientes que no han respondido a otros medicamentos antipsicóticos
                con dosis y duraciones adecuadas. Use clozapina solo bajo la supervisión de un especialista y solo si dispone de un seguimiento ordinario con      
                pruebas de laboratorio, debido al riesgo de aparición de agranulocitosis en potencia mortal. &lt;/li&gt;
        &lt;/ul&gt;
        &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/table&gt;
  
 &lt;h3 class=&quot;titulo&quot;&gt;&amp;#128681;Fin de esta Ruta&lt;/h3&gt;
&lt;table style=&quot;width:100%&quot;&gt;
  &lt;tr&gt;
    &lt;td style=&quot;text-align:left&quot;&gt;&amp;#128073;{back link , label : &#39;Devolverse&#39;}&amp;#128072;&lt;/td&gt;
    &lt;td style=&quot;text-align:right&quot;&gt;&amp;nbsp;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
&lt;br/&gt;</tw-passagedata><tw-passagedata pid="25" name="Cuadro 2 Med anticolinergicos" tags="" position="1491,539" size="100,100">config.header.left:&quot;{embed image: &#39;imgs/manejo32.png&#39;, alt: &#39;Manejo&#39;} Módulo Psicosis (PSI) - Manejo&quot;
--
&lt;h4 class=&quot;pregunta&quot;&gt;
    &amp;#127775;Intervenciones Farmacológicas - Medicamentos anticolinérgicos
    &lt;/h4&gt;
	&lt;b&gt;Observaciones:&lt;/b&gt;Medicamentos anticolinérgico, para el tratamiento de efectos secundarios extrapiramidales. &amp;#10060;Si es posible, evite usarlos en mujeres durante el embarazo o la lactancia.
    &lt;ul&gt;
	&lt;li&gt;&lt;b&gt;&amp;#128138;&amp;#128137;BIPERIDENO.&lt;/b&gt;&lt;/li&gt;
      &lt;li&gt; &lt;b&gt;Dosificación:&lt;/b&gt;
            &lt;ul&gt;
            &lt;li&gt;&lt;b&gt;Comience&lt;/b&gt; con 1mg dos veces al día.
            &lt;/li&gt;
            &lt;li&gt;&lt;b&gt;Aumente&lt;/b&gt;  a 3-12 mg/día.
            &lt;/li&gt;
            &lt;li&gt;&lt;b&gt;Vía de administración:&lt;/b&gt;  oral o intravenosa. 
            &lt;/li&gt;
            &lt;/ul&gt;
        &lt;/li&gt;
      &lt;li&gt; &lt;b&gt;Efectos Secundarios:&lt;/b&gt;
            &lt;ul&gt;
            &lt;li&gt;
            &lt;b&gt;Comunes:&lt;/b&gt;   sedación, confusión y alteración de la
memoria (especialmente en adultos mayores), taquicardia,
sensación de sequedad en la boca, retención urinaria y
estreñimiento.
            &lt;/li&gt;
            &lt;li&gt;&lt;b&gt;Rara vez,&lt;/b&gt; glaucoma de ángulo cerrado, miastenia gravis
y obstrucción gastrointestinal.                 
            &lt;/li&gt;
            &lt;/ul&gt;
        &lt;/li&gt;
		&lt;li&gt; &lt;b&gt;Contraindicaciones / Precauciones:&lt;/b&gt; 
            &lt;ul&gt;
            &lt;li&gt;
            &lt;b&gt;Precaución en los pacientes con: &lt;/b&gt; enfermedades cardíacas, hepáticas o renales.
            &lt;/li&gt;  
			&lt;li&gt;
            &lt;b&gt;Interacciones medicamentos: &lt;/b&gt;  Tenga cuidado cuando se combina con otros medicamentos anticolinérgicos.
            &lt;/li&gt; 
            &lt;/ul&gt;
        &lt;/li&gt;
    &lt;/ul&gt;
    &lt;br/&gt;
	   &lt;ul&gt;
	&lt;li&gt;&lt;b&gt;&amp;#128138;TRIHEXIFENIDILO (Benzhexol).&lt;/b&gt;&lt;/li&gt;
      &lt;li&gt; &lt;b&gt;Dosificación:&lt;/b&gt;
            &lt;ul&gt;
            &lt;li&gt;&lt;b&gt;Comience&lt;/b&gt; con 1 mg/día. 
            &lt;/li&gt;
            &lt;li&gt;&lt;b&gt;Aumente&lt;/b&gt; a 4-12 mg/día en 3-4 dosis divididas (20 mg/día como máximo).
            &lt;/li&gt;
            &lt;li&gt;&lt;b&gt;Vía de administración:&lt;/b&gt;  oral. 
            &lt;/li&gt;
            &lt;/ul&gt;
        &lt;/li&gt;
      &lt;li&gt; &lt;b&gt;Efectos Secundarios:&lt;/b&gt;
            &lt;ul&gt;
            &lt;li&gt;
            &lt;b&gt;Comunes:&lt;/b&gt;   sedación, confusión y alteración de la
memoria (especialmente en adultos mayores), taquicardia,
sensación de sequedad en la boca, retención urinaria y
estreñimiento.
            &lt;/li&gt;
            &lt;li&gt;&lt;b&gt;Rara vez,&lt;/b&gt; glaucoma de ángulo cerrado, miastenia gravis
y obstrucción gastrointestinal.                 
            &lt;/li&gt;
            &lt;/ul&gt;
        &lt;/li&gt;
		&lt;li&gt; &lt;b&gt;Contraindicaciones / Precauciones:&lt;/b&gt; 
            &lt;ul&gt;
            &lt;li&gt;
            &lt;b&gt;Precaución en los pacientes con: &lt;/b&gt; enfermedades cardíacas, hepáticas o renales.
            &lt;/li&gt;  
			&lt;li&gt;
            &lt;b&gt;Interacciones medicamentos: &lt;/b&gt;  Tenga cuidado cuando se combina con otros medicamentos anticolinérgicos.
            &lt;/li&gt; 
            &lt;/ul&gt;
        &lt;/li&gt;
    &lt;/ul&gt;
    &lt;br/&gt;
&lt;h3 class=&quot;titulo&quot;&gt;&amp;#128681;Fin de esta Ruta&lt;/h3&gt;
&lt;table style=&quot;width:100%&quot;&gt;
  &lt;tr&gt;
    &lt;td style=&quot;text-align:left&quot;&gt;&amp;#128073;{back link , label : &#39;Devolverse&#39;}&amp;#128072;&lt;/td&gt;
    &lt;td style=&quot;text-align:right&quot;&gt;&amp;nbsp;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
&lt;br/&gt;</tw-passagedata><tw-passagedata pid="26" name="Cuadro 3 Estabilizadores Animo" tags="" position="1622,805" size="100,100">config.header.left:&quot;{embed image: &#39;imgs/manejo32.png&#39;, alt: &#39;Manejo&#39;} Módulo Psicosis (PSI) - Manejo&quot;
--
&lt;h4 class=&quot;pregunta&quot;&gt;
    &amp;#127775;Intervenciones Farmacológicas - Estabilizadores del estado de ánimo.
    &lt;/h4&gt;
&lt;b&gt;Observaciones:&lt;/b&gt;&amp;#10060;Si es posible, evite usarlos en mujeres durante el embarazo o la lactancia.
    &lt;ul&gt;
	&lt;li&gt;&lt;b&gt;&amp;#128138;LITIO.&lt;/b&gt;&lt;/li&gt;
      &lt;li&gt; &lt;b&gt;Dosificación:&lt;/b&gt;
            &lt;ul&gt;
            &lt;li&gt;&lt;b&gt;Comience&lt;/b&gt; con 300 mg/día. 
            &lt;/li&gt;
            &lt;li&gt;&lt;b&gt;Aumente&lt;/b&gt; gradualmente
cada 7 días hasta alcanzar el nivel en sangre proyectado
(600-1200 mg/día como máximo). Monitoree cada 2 ó 3
meses.
            &lt;/li&gt;
            &lt;li&gt;&lt;b&gt;Vía de administración:&lt;/b&gt;  oral. 
            &lt;/li&gt;
			&lt;li&gt;&lt;b&gt;Niveles en sangre deseados: &lt;/b&gt; 0,6-1,0 mEq/litro.
			&lt;ul&gt;
			&lt;li&gt;En el &lt;b&gt;episodio maníaco agudo n&lt;/b&gt;: 0,8-1,0 mEq/litro&lt;/li&gt;
			&lt;li&gt;&lt;b&gt;Para el tratamiento de mantenimiento:&lt;/b&gt; 0,6-0,8 mEq/litro. &lt;i&gt;Se requieren 6 meses de medicación para     
      determinar la eficacia total del tratamiento de  
      mantenimiento.&lt;/i&gt;&lt;/li&gt;
			&lt;/ul&gt;
            &lt;/li&gt;
            &lt;/ul&gt;
        &lt;/li&gt;
      &lt;li&gt; &lt;b&gt;Efectos Secundarios:&lt;/b&gt;
            &lt;ul&gt;
            &lt;li&gt;
            &lt;b&gt;Comunes:&lt;/b&gt;  sedación, problemas cognoscitivos, temblor,
deterioro de la coordinación, hipotensión, leucocitosis,
poliuria, polidipsia, náuseas, diarrea, aumento de peso,
pérdida del cabello, exantema.  
            &lt;/li&gt;
            &lt;li&gt;&lt;b&gt;Graves:&lt;/b&gt; diabetes insípida, hipotiroidismo,
alteraciones electrocardiográficas (arritmia,
disfunción del nodo sinusal, alteraciones de la onda
T).                 
            &lt;/li&gt;
            &lt;/ul&gt;
        &lt;/li&gt;
		&lt;li&gt; &lt;b&gt;Contraindicaciones / Precauciones:&lt;/b&gt; 
            &lt;ul&gt;
            &lt;li&gt;
            &lt;b&gt;Contraindicado en los pacientes con: &lt;/b&gt;enfermedades cardíacas o renales graves. Úselo solo si es factible el seguimiento clínico y de laboratorio. La deshidratación puede aumentar los niveles de litio. 
            &lt;/li&gt;  
			&lt;li&gt;
            &lt;b&gt;Interacciones medicamentos: &lt;/b&gt; los medicamentos antiinflamatorios no esteroideos (AINES), los inhibidores de la enzima convertidora de la angiotensina, los diuréticos tiazídicos, el metronidazol y la tetraciclina pueden aumentar los niveles de litio.  
            &lt;/li&gt; 
			&lt;li&gt;
            &lt;b&gt;La toxicidad del litio puede causar crisis convulsivas, delirio, coma y muerte. &lt;/b&gt;  
            &lt;/li&gt;
            &lt;/ul&gt;
        &lt;/li&gt;
    &lt;/ul&gt;
    &lt;br/&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;b&gt;&amp;#128138;VALPROATO SÓDICO.&lt;/b&gt;&lt;/li&gt;
      &lt;li&gt; &lt;b&gt;Dosificación:&lt;/b&gt;
            &lt;ul&gt;
            &lt;li&gt;&lt;b&gt;Comience&lt;/b&gt; con 500 mg/día. 
            &lt;/li&gt;
            &lt;li&gt;&lt;b&gt;Aumente&lt;/b&gt; lentamente a 1000-2000 mg/día (60 mg/kg/día como máximo).                
            &lt;/li&gt;
            &lt;li&gt;&lt;b&gt;Vía de administración:&lt;/b&gt;  oral. 
            &lt;/li&gt;
			&lt;li&gt;&lt;b&gt;Opción preferida para personas que viven
con la infección por el VIH/SIDA debido a las
interacciones medicamentos.&lt;/b&gt;&lt;/li&gt;
            &lt;/ul&gt;
        &lt;/li&gt;
      &lt;li&gt; &lt;b&gt;Efectos Secundarios:&lt;/b&gt;
            &lt;ul&gt;
            &lt;li&gt;
            &lt;b&gt;Comunes:&lt;/b&gt; sedación, cefalea, temblor, ataxia, náuseas,
vómitos, diarrea, aumento de peso, pérdida transitoria del
cabello. 
            &lt;/li&gt;
            &lt;li&gt;&lt;b&gt;Graves:&lt;/b&gt;  deterioro de la función hepática,
trombocitopenia, leucopenia, somnolencia/confusión,
insuficiencia hepática, pancreatitis hemorrágica.               
            &lt;/li&gt;
            &lt;/ul&gt;
        &lt;/li&gt;
        &lt;li&gt; &lt;b&gt;Contraindicaciones / Precauciones:&lt;/b&gt; 
            &lt;ul&gt;
            &lt;li&gt;
            &lt;b&gt;Precaución en los pacientes con: &lt;/b&gt;: enfermedades subyacentes o presunta hepatopatía. Monitoree las pruebas de la función hepática y las plaquetas si es posible. 
            &lt;/li&gt; 
            &lt;li&gt;
                &lt;b&gt;Interacciones medicamentos:&lt;/b&gt; Los niveles de valproato disminuyen con la carbamazepina y aumentan con la aspirina. 
                &lt;/li&gt;            
            &lt;/ul&gt;
        &lt;/li&gt;
    &lt;/ul&gt;
&lt;br/&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;b&gt;&amp;#128138;CARBAMAZEPINA.&lt;/b&gt;&lt;/li&gt;
      &lt;li&gt; &lt;b&gt;Dosificación:&lt;/b&gt;
            &lt;ul&gt;
            &lt;li&gt;&lt;b&gt;Comience&lt;/b&gt; con 200 mg/día
            &lt;/li&gt;
            &lt;li&gt;&lt;b&gt;Aumente&lt;/b&gt;  200 mg
semanalmente hasta 400-600 mg/día en dos dosis
divididas (1.200 mg/día como máximo).                                
            &lt;/li&gt;
            &lt;li&gt;&lt;b&gt;Vía de administración:&lt;/b&gt;  oral. 
            &lt;/li&gt;
			&lt;li&gt;&lt;b&gt;Nota:&lt;/b&gt;  Puede ser necesario ajustar las dosis después de 2 semanas debido a la inducción de su propio metabolismo. 
            &lt;/li&gt;
            &lt;/ul&gt;
        &lt;/li&gt;
      &lt;li&gt; &lt;b&gt;Efectos Secundarios:&lt;/b&gt;
            &lt;ul&gt;
            &lt;li&gt;
            &lt;b&gt;Comunes:&lt;/b&gt;  sedación, confusión, mareos, ataxia, visión
doble, náuseas, diarrea, leucopenia benigna. 
            &lt;/li&gt;
            &lt;li&gt;&lt;b&gt;Graves:&lt;/b&gt;  hepatotoxicidad, conducción cardíaca retardada, niveles bajos de sodio, exantema grave.             
            &lt;/li&gt;
            &lt;/ul&gt;
        &lt;/li&gt;
        &lt;li&gt; &lt;b&gt;Contraindicaciones / Precauciones:&lt;/b&gt; 
            &lt;ul&gt;
                &lt;li&gt;&lt;b&gt;Contraindicado en los pacientes con: &lt;/b&gt; antecedentes de trastornos sanguíneos, renales y hepáticos o cardiopatías. &lt;/li&gt;
            &lt;li&gt;
                &lt;b&gt;Interacciones medicamentos:&lt;/b&gt;
                &lt;ul&gt;
                    &lt;li&gt;
                         Puede reducir los efectos del control hormonal de la natalidad, de los  medicamentos inmunodepresores, antiepilépticos, antipsicóticos, de la metadona y de algunos antirretrovíricos.
                    &lt;/li&gt;
                    &lt;li&gt;Los niveles en sangre pueden aumentar cuando se administran ciertos antifúngicos y antibióticos. 
                    &lt;/li&gt;                    
                &lt;/ul&gt;
                &lt;/li&gt;            
            &lt;/ul&gt;
        &lt;/li&gt;
    &lt;/ul&gt;
	&lt;br/&gt;
	
&lt;h3 class=&quot;titulo&quot;&gt;&amp;#128681;Fin de esta Ruta&lt;/h3&gt;
&lt;table style=&quot;width:100%&quot;&gt;
  &lt;tr&gt;
    &lt;td style=&quot;text-align:left&quot;&gt;&amp;#128073;{back link , label : &#39;Devolverse&#39;}&amp;#128072;&lt;/td&gt;
    &lt;td style=&quot;text-align:right&quot;&gt;&amp;nbsp;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
&lt;br/&gt;</tw-passagedata><tw-passagedata pid="27" name="No hay Mejoria" tags="" position="868,104" size="100,100">config.header.left:&quot;{embed image: &#39;imgs/seguimiento32.png&#39;, alt: &#39;Evaluación&#39;} Módulo Psicosis (PSI) - Seguimiento. Psicosis&quot;
--
&lt;center&gt;&lt;h3 class=&quot;titulo&quot;&gt;
La Persona NO está Mejorando
&lt;/h3&gt;&lt;/center&gt;

&amp;#11088;&lt;b&gt;¿Está la persona tomando medicación?&lt;/b&gt;

&lt;br/&gt;&lt;br/&gt;

&lt;table style=&quot;width:100%&quot;&gt;
  &lt;tr&gt;
    &lt;td style=&quot;text-align:left&quot;&gt;&amp;#128073;[[Responder NO|No Toma Medicacion]]&amp;#128072;&lt;/td&gt;
    &lt;td style=&quot;text-align:right&quot;&gt;&amp;#128073;[[Responder SI|Si Toma Medicacion]]&amp;#128072;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
&lt;br/&gt;
</tw-passagedata><tw-passagedata pid="28" name="Si hay Mejoria" tags="" position="828,0" size="100,100">config.header.left:&quot;{embed image: &#39;imgs/seguimiento32.png&#39;, alt: &#39;Evaluación&#39;} Módulo Psicosis (PSI) - Seguimiento. Psicosis&quot;
--
&lt;center&gt;&lt;h3 class=&quot;titulo&quot;&gt;
La Persona está Mejorando
&lt;/h3&gt;&lt;/center&gt;
&lt;ul&gt;
&lt;li&gt;
 Continúe el plan de tratamiento.   
&lt;/li&gt;
&lt;li&gt;
 Reduzca la frecuencia de las sesiones de
seguimiento una vez que han cedido los
síntomas. 
&lt;/li&gt;
&lt;li&gt;
Efectúe sesiones de seguimiento según
sea necesario.
&lt;/li&gt;
&lt;/ul&gt;

&lt;table style=&quot;width:100%&quot;&gt;
  &lt;tr&gt;
    &lt;td style=&quot;text-align:left&quot;&gt;&amp;nbsp;&lt;/td&gt;
    &lt;td style=&quot;text-align:right&quot;&gt;&amp;#128073;[[Ir al Paso 2 de Seguimiento|Seguimiento Paso 2]]&amp;#128072;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;

</tw-passagedata><tw-passagedata pid="29" name="Seguimiento Paso 2" tags="" position="1009,1" size="100,100">config.header.left:&quot;{embed image: &#39;imgs/seguimiento32.png&#39;, alt: &#39;Evaluación&#39;} Módulo Psicosis (PSI) - Seguimiento. Psicosis&quot;
--
&lt;h4 class=&quot;pregunta&quot;&gt;
&lt;span class=&quot;listacirculo&quot;&gt;2&lt;/span&gt;Monitoree Sistemáticamente el Tratamiento
&lt;/h4&gt;

&lt;ul&gt;
	&lt;li&gt; Examine las intervenciones psicosociales.&lt;/li&gt;
	&lt;li&gt;Si la persona está recibiendo medicación, examine la observancia del tratamiento, los efectos secundarios y la dosificación (&amp;#128204;[[Evalúe la observancia del tratamiento|Cuadro 4 Evaluar Observancia]]). Vigile el peso, la presión arterial y la glucemia.
&lt;/li&gt;
	&lt;li&gt;  Si la persona comienza a usar otros medicamentos con posibles interacciones medicamentosas, considere la posibilidad de revisar las dosis.&lt;/li&gt;
	&lt;li&gt;  Pregunte sobre la aparición de síntomas, episodios anteriores y los detalles previos de todo tratamiento anterior o actual.&lt;/li&gt;
&lt;/ul&gt;


&lt;table style=&quot;width:100%&quot;&gt;
  &lt;tr&gt;
    &lt;td style=&quot;text-align:left&quot;&gt;&amp;nbsp;&lt;/td&gt;
    &lt;td style=&quot;text-align:right&quot;&gt;&amp;#128073;[[Ir al Paso 3 de Seguimiento|Seguimiento Paso 3]]&amp;#128072;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
</tw-passagedata><tw-passagedata pid="30" name="No Toma Medicacion" tags="" position="1004,171" size="100,100">config.header.left:&quot;{embed image: &#39;imgs/seguimiento32.png&#39;, alt: &#39;Evaluación&#39;} Módulo Psicosis (PSI) - Seguimiento. Psicosis&quot;
--
&lt;center&gt;&lt;h3 class=&quot;titulo&quot;&gt;
La Persona NO está tomando Medicación 
&lt;/h3&gt;&lt;/center&gt;
&lt;ul&gt;
&lt;li&gt;
 &lt;b&gt;COMIENCE LA ADMINISTRACIÓN 
DE MEDICAMENTOS ANTIPSICÓTICOS&lt;/b&gt;
(&amp;#128204;[[Ver Medicamentos antipsicóticos|Cuadro 1 Med Antipsicoticos]]). 
&lt;/li&gt;
&lt;li&gt;
Mantenga una alta frecuencia de contacto hasta que
los síntomas comiencen a responder al tratamiento.
&lt;/li&gt;
&lt;li&gt;
  Incluya a la persona y los cuidadores en las modificaciones del plan de tratamiento y las decisiones.
&lt;/li&gt;
&lt;/ul&gt;

&lt;table style=&quot;width:100%&quot;&gt;
  &lt;tr&gt;
    &lt;td style=&quot;text-align:left&quot;&gt;&amp;nbsp;&lt;/td&gt;
    &lt;td style=&quot;text-align:right&quot;&gt;&amp;#128073;[[Ir al Paso 2 de Seguimiento|Seguimiento Paso 2]]&amp;#128072;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;

</tw-passagedata><tw-passagedata pid="31" name="Si Toma Medicacion" tags="" position="1178,151" size="100,100">config.header.left:&quot;{embed image: &#39;imgs/seguimiento32.png&#39;, alt: &#39;Evaluación&#39;} Módulo Psicosis (PSI) - Seguimiento. Psicosis&quot;
--
&lt;center&gt;&lt;h3 class=&quot;titulo&quot;&gt;
La Persona está tomando Medicación 
&lt;/h3&gt;&lt;/center&gt;
&lt;ul&gt;
&lt;li&gt;
 &lt;b&gt;Asegúrese de que la persona haya recibido
una dosificación eficaz típica por un mínimo
de 4 a 6 semanas.
&lt;/b&gt;
&lt;/li&gt;
&lt;li&gt;
 Mantenga una alta frecuencia de contacto hasta
que los síntomas comiencen a responder al
tratamiento. 
&lt;/li&gt;
&lt;li&gt;
   Haga que la persona y los cuidadores participen
en los cambios del plan de tratamiento y las
decisiones.
&lt;/li&gt;
&lt;/ul&gt;

&lt;table style=&quot;width:100%&quot;&gt;
  &lt;tr&gt;
    &lt;td style=&quot;text-align:left&quot;&gt;&amp;nbsp;&lt;/td&gt;
    &lt;td style=&quot;text-align:right&quot;&gt;&amp;#128073;[[Ir al Paso 2 de Seguimiento|Seguimiento Paso 2]]&amp;#128072;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;

</tw-passagedata><tw-passagedata pid="32" name="Seguimiento Paso 3" tags="" position="1303,15" size="100,100">config.header.left:&quot;{embed image: &#39;imgs/seguimiento32.png&#39;, alt: &#39;Evaluación&#39;} Módulo Psicosis (PSI) - Seguimiento. Psicosis&quot;
--
&lt;h4 class=&quot;pregunta&quot;&gt;
&lt;span class=&quot;listacirculo&quot;&gt;3&lt;/span&gt;Suspensión de los Medicamentos
&lt;/h4&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;b&gt;Persona con un primer episodio, una recaída o
un empeoramiento de los síntomas de psicosis:&lt;/b&gt;Considere la suspensión de los medicamentos 12
MESES después de que hayan remitido por
completo los síntomas.&lt;/li&gt;
	&lt;li&gt;&lt;b&gt;Persona con síntomas psicóticos 
que persisten más de 3 meses:Considere la suspensión de los medicamentos si ha habido una REMISIÓN TOTAL de los síntomas 
durante varios años.&lt;/b&gt;&lt;/li&gt;
	&lt;li&gt;Aborde con la persona y la familia los riesgos de sufrir una recaída, en comparación con los  
efectos secundarios de la medicación a largo plazo. &lt;/li&gt;
	&lt;li&gt; Si es posible, consulte a un especialista.&lt;/li&gt;
	&lt;li&gt;  Reduzca gradual y lentamente las dosis de los medicamentos. Cuando se suspenden los
medicamentos, se debe enseñar a las personas y sus familiares cómo pueden detectar los
primeros síntomas de una recaída. Se recomienda una vigilancia clínica minuciosa. &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 class=&quot;titulo&quot;&gt;&amp;#128681;Fin de esta Ruta&lt;/h3&gt;
&lt;table style=&quot;width:100%&quot;&gt;
  &lt;tr&gt;
    &lt;td style=&quot;text-align:left&quot;&gt;&amp;#128073;{back link, label: &#39;Devolverse&#39;}&amp;#128072;&lt;/td&gt;
    &lt;td style=&quot;text-align:right&quot;&gt;&amp;#128073;{restart link, label: &#39;Reiniciar Ruta&#39;}&amp;#128072;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;

</tw-passagedata><tw-passagedata pid="33" name="Seguimiento Psicosis" tags="" position="652,20" size="100,100">config.header.left:&quot;{embed image: &#39;imgs/seguimiento32.png&#39;, alt: &#39;Evaluación&#39;} Módulo Psicosis (PSI) - Seguimiento. Psicosis&quot;
--
&lt;center&gt;&lt;h3 class=&quot;titulo&quot;&gt;
Segumiento Psicosis
&lt;/h3&gt;&lt;/center&gt;
&lt;hr/&gt;
&lt;span style=&quot;color:red&quot;&gt;Recomendaciones sobre la Frecuencia de Contacto&lt;/span&gt; 
&lt;ul&gt;
&lt;li&gt;
 El seguimiento inicial debe ser lo más
frecuente posible, incluso diario, hasta
que los síntomas agudos respondan al
tratamiento.   
&lt;/li&gt;
&lt;li&gt;
  Se requiere un seguimiento periódico.
Una vez que los síntomas responden,
se recomienda una consulta mensual
de seguimiento, bimestral o trimestral,
(de acuerdo con la necesidad clínica y
los factores de factibilidad, como la
disponibilidad de personal, la distancia
que se debe recorrer para llegar al
consultorio, etc.)
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr/&gt;

&lt;h4 class=&quot;pregunta&quot;&gt;
&lt;span class=&quot;listacirculo&quot;&gt;1&lt;/span&gt;Evalúe para Determinar si hay Mejoría
&lt;/h4&gt;

&amp;#11088;&lt;b&gt;¿Está mejorando la persona?&lt;/b&gt;


&lt;table style=&quot;width:100%&quot;&gt;
  &lt;tr&gt;
    &lt;td style=&quot;text-align:left&quot;&gt;&amp;#128073;[[Responder NO|No hay Mejoria]]&amp;#128072;&lt;/td&gt;
    &lt;td style=&quot;text-align:right&quot;&gt;&amp;#128073;[[Responder SI|Si hay Mejoria]]&amp;#128072;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
&lt;br/&gt;
</tw-passagedata><tw-passagedata pid="34" name="Seguimiento Episocio Maniatico" tags="" position="1281,294" size="100,100">config.header.left:&quot;{embed image: &#39;imgs/seguimiento32.png&#39;, alt: &#39;Evaluación&#39;} Módulo Psicosis (PSI) - Seguimiento Episodio Maníaco&quot;
--
&lt;center&gt;&lt;h3 class=&quot;titulo&quot;&gt;
Segumiento. Episodio Maníaco en el Trastono Bipolar
&lt;/h3&gt;&lt;/center&gt;
&lt;hr/&gt;
&lt;span style=&quot;color:red&quot;&gt;Recomendaciones sobre la Frecuencia de Contacto&lt;/span&gt; 
&lt;ul&gt;
&lt;li&gt;
 Para la manía aguda: Las consultas
del seguimiento inicial deben ser lo
más frecuente que sea posible,
incluso diarias, hasta que los
síntomas agudos respondan al
tratamiento. Una vez que los
síntomas responden, se recomienda
una consulta de seguimiento
mensual, bimestral o trimestral.  
&lt;/li&gt;
&lt;li&gt;
 Para las personas que actualmente no
muestran estados maníacos u
deprimidos, efectúe una consulta de
seguimiento por lo menos cada tres
meses. Considere un seguimiento más
frecuente cuando sea necesario. Vigile
estrechamente a la persona para
detectar una recaída.
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr/&gt;

&lt;h4 class=&quot;pregunta&quot;&gt;
&lt;span class=&quot;listacirculo&quot;&gt;1&lt;/span&gt;Evalúe al Paciente para Determinar si hay Mejoría
&lt;/h4&gt;

&amp;#11088;&lt;b&gt;¿Está mejorando la persona?&lt;/b&gt;


&lt;table style=&quot;width:100%&quot;&gt;
  &lt;tr&gt;
    &lt;td style=&quot;text-align:left&quot;&gt;&amp;#128073;[[Responder NO|No hay Mejoria Maniaco]]&amp;#128072;&lt;/td&gt;
    &lt;td style=&quot;text-align:right&quot;&gt;&amp;#128073;[[Responder SI|Si hay Mejoria Maniaco]]&amp;#128072;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
&lt;br/&gt;
</tw-passagedata><tw-passagedata pid="35" name="No hay Mejoria Maniaco" tags="" position="1450,338" size="100,100">config.header.left:&quot;{embed image: &#39;imgs/seguimiento32.png&#39;, alt: &#39;Evaluación&#39;} Módulo Psicosis (PSI) - Seguimiento Episodio Maníaco&quot;
--
&lt;center&gt;&lt;h3 class=&quot;titulo&quot;&gt;
La Persona NO está Mejorando
&lt;/h3&gt;&lt;/center&gt;

&amp;#11088;&lt;b&gt;¿Está tomando medicamentos la persona?&lt;/b&gt;

&lt;br/&gt;&lt;br/&gt;

&lt;table style=&quot;width:100%&quot;&gt;
  &lt;tr&gt;
    &lt;td style=&quot;text-align:left&quot;&gt;&amp;#128073;[[Responder NO|No Toma Medicacion Maniaco]]&amp;#128072;&lt;/td&gt;
    &lt;td style=&quot;text-align:right&quot;&gt;&amp;#128073;[[Responder SI|Si Toma Medicacion Maniaco]]&amp;#128072;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
&lt;br/&gt;
</tw-passagedata><tw-passagedata pid="36" name="Si hay Mejoria Maniaco" tags="" position="1425,74" size="100,100">config.header.left:&quot;{embed image: &#39;imgs/seguimiento32.png&#39;, alt: &#39;Evaluación&#39;} Módulo Psicosis (PSI) - Seguimiento Episodio Maníaco&quot;
--
&lt;center&gt;&lt;h3 class=&quot;titulo&quot;&gt;
La Persona está Mejorando
&lt;/h3&gt;&lt;/center&gt;
&lt;ul&gt;
&lt;li&gt;
 Efectúe el seguimiento según sea
necesario hasta que los síntomas hayan
remitido.
&lt;/li&gt;
&lt;li&gt;
 Continúe los medicamentos de 
mantenimiento por al menos 2 años. 
&lt;/li&gt;
&lt;/ul&gt;

&lt;table style=&quot;width:100%&quot;&gt;
  &lt;tr&gt;
    &lt;td style=&quot;text-align:left&quot;&gt;&amp;nbsp;&lt;/td&gt;
    &lt;td style=&quot;text-align:right&quot;&gt;&amp;#128073;[[Ir al Paso 2 de Seguimiento|Seguimiento Paso 2 Mania]]&amp;#128072;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;

</tw-passagedata><tw-passagedata pid="37" name="Seguimiento Paso 2 Mania" tags="" position="1679,317" size="100,100">config.header.left:&quot;{embed image: &#39;imgs/seguimiento32.png&#39;, alt: &#39;Evaluación&#39;} Módulo Psicosis (PSI) - Seguimiento Episodio Maníaco&quot;
--
&lt;h4 class=&quot;pregunta&quot;&gt;
&lt;span class=&quot;listacirculo&quot;&gt;2&lt;/span&gt;Monitoree Sistemáticamente el Tratamiento
&lt;/h4&gt;

&lt;ul&gt;
	&lt;li&gt;  Examine y proporcione intervenciones psicosociales. &lt;/li&gt;
	&lt;li&gt; Si la persona está recibiendo medicamentos, analice la observancia al tratamiento, los efectos secundarios y la dosificación. (&amp;#128204;[[Evalúe la observancia del tratamiento|Cuadro 4 Evaluar Observancia]]).
&lt;/li&gt;
	&lt;li&gt;   Si la persona comienza a usar otros medicamentos con posibles interacciones medicamentosas, considere la posibilidad de revisar las dosis.&lt;/li&gt;
&lt;/ul&gt;


&lt;table style=&quot;width:100%&quot;&gt;
  &lt;tr&gt;
    &lt;td style=&quot;text-align:left&quot;&gt;&amp;nbsp;&lt;/td&gt;
    &lt;td style=&quot;text-align:right&quot;&gt;&amp;#128073;[[Ir al Paso 3 de Seguimiento|Seguimiento Paso 3 Mania]]&amp;#128072;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
</tw-passagedata><tw-passagedata pid="38" name="No Toma Medicacion Maniaco" tags="" position="1640,109" size="100,100">config.header.left:&quot;{embed image: &#39;imgs/seguimiento32.png&#39;, alt: &#39;Evaluación&#39;} Módulo Psicosis (PSI) - Seguimiento Episodio Maníaco&quot;
--
&lt;center&gt;&lt;h3 class=&quot;titulo&quot;&gt;
La Persona NO está tomando Medicación 
&lt;/h3&gt;&lt;/center&gt;
&lt;ul&gt;
&lt;li&gt;
 &lt;b&gt;Si es apropiado, inicie la medicación.&lt;/b&gt;
&lt;/li&gt;
&lt;/ul&gt;

&lt;table style=&quot;width:100%&quot;&gt;
  &lt;tr&gt;
    &lt;td style=&quot;text-align:left&quot;&gt;&amp;nbsp;&lt;/td&gt;
    &lt;td style=&quot;text-align:right&quot;&gt;&amp;#128073;[[Ir al Paso 2 de Seguimiento|Seguimiento Paso 2 Mania]]&amp;#128072;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;

</tw-passagedata><tw-passagedata pid="39" name="Si Toma Medicacion Maniaco" tags="" position="1713,452" size="100,100">config.header.left:&quot;{embed image: &#39;imgs/seguimiento32.png&#39;, alt: &#39;Evaluación&#39;} Módulo Psicosis (PSI) - Seguimiento Episodio Maníaco&quot;
--
&lt;center&gt;&lt;h3 class=&quot;titulo&quot;&gt;
La Persona está tomando Medicación 
&lt;/h3&gt;&lt;/center&gt;
&lt;ul&gt;
&lt;li&gt;
 Verifique la dosificación y los efectos secundarios. &amp;#128204;[[Vaya a Medicamentos antipsicóticos|Cuadro 1 Med Antipsicoticos]] o a &amp;#128204;[[Estabilizadores del estado de ánimo|Cuadro 3 Estabilizadores Animo]].
&lt;/li&gt;
&lt;li&gt;
   Asegúrese de que la persona haya recibido una dosificación 
eficaz típica por un mínimo de 4 a 6 semanas. 
&lt;/li&gt;
&lt;li&gt;
  Si ha recibido la dosificación eficaz típica de los medicamentos
durante cuatro a seis semanas sin mejorar, considere cambiar la
medicación. &amp;#128204;[[Ver Estabilizadores del estado de ánimo|Cuadro 3 Estabilizadores Animo]].
&lt;/li&gt;
&lt;li&gt;
Si la respuesta sigue siendo deficiente, consulte a un especialista.&amp;#128657; 
&lt;/li&gt;
&lt;li&gt;
Examine las intervenciones 
psicosociales. 
&lt;/li&gt;
&lt;li&gt;
 Evalúe a la persona para detectar problemas médicos.
&lt;/li&gt;
&lt;li&gt;
 &lt;b&gt;&amp;#128657;CONSEJO CLÍNICO:&lt;/b&gt; Si cambia a otro medicamento,
empiece con ese medicamento
primero y trate al paciente con
ambos medicamentos durante 
2 semanas antes de reducir la
primera medicación.
&lt;/li&gt;
&lt;/ul&gt;

&lt;table style=&quot;width:100%&quot;&gt;
  &lt;tr&gt;
    &lt;td style=&quot;text-align:left&quot;&gt;&amp;nbsp;&lt;/td&gt;
    &lt;td style=&quot;text-align:right&quot;&gt;&amp;#128073;[[Ir al Paso 2 de Seguimiento|Seguimiento Paso 2 Mania]]&amp;#128072;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;

</tw-passagedata><tw-passagedata pid="40" name="Seguimiento Paso 3 Mania" tags="" position="1800,146" size="100,100">config.header.left:&quot;{embed image: &#39;imgs/seguimiento32.png&#39;, alt: &#39;Evaluación&#39;} Módulo Psicosis (PSI) - Seguimiento Episodio Maníaco&quot;
--
&lt;h4 class=&quot;pregunta&quot;&gt;
&lt;span class=&quot;listacirculo&quot;&gt;3&lt;/span&gt;Suspensión de los Medicamentos
&lt;/h4&gt;

&amp;#11088;&lt;b&gt;¿Ha experimentado la persona una remisión total de los 
síntomas sin episodios de trastorno bipolar durante al menos
dos años?&lt;/b&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;table style=&quot;width:100%&quot;&gt;
  &lt;tr&gt;
    &lt;td style=&quot;text-align:left&quot;&gt;&amp;#128073;[[Responder NO|No Experimenta]]&amp;#128072;&lt;/td&gt;
    &lt;td style=&quot;text-align:right&quot;&gt;&amp;#128073;[[Responder SI|Si Experimenta]]&amp;#128072;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
&lt;br/&gt;</tw-passagedata><tw-passagedata pid="41" name="No Experimenta" tags="" position="1894,266" size="100,100">config.header.left:&quot;{embed image: &#39;imgs/seguimiento32.png&#39;, alt: &#39;Evaluación&#39;} Módulo Psicosis (PSI) - Seguimiento Episodio Maníaco&quot;
--
&lt;h3 class=&quot;titulo&quot;&gt;
Efectúe un seguimiento sistemático y vigile 
el tratamiento
&lt;/h3&gt;
&lt;br/&gt;&lt;br/&gt;

&lt;h4 class=&quot;titulo&quot;&gt;&amp;#128681;Fin de esta Ruta&lt;/h4&gt;
&lt;table style=&quot;width:100%&quot;&gt;
  &lt;tr&gt;
    &lt;td style=&quot;text-align:left&quot;&gt;&amp;#128073;{back link, label: &#39;Devolverse&#39;}&amp;#128072;&lt;/td&gt;
    &lt;td style=&quot;text-align:right&quot;&gt;&amp;#128073;{restart link, label: &#39;Reiniciar Ruta&#39;}&amp;#128072;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;

</tw-passagedata><tw-passagedata pid="42" name="Si Experimenta" tags="" position="1936,117" size="100,100">config.header.left:&quot;{embed image: &#39;imgs/seguimiento32.png&#39;, alt: &#39;Evaluación&#39;} Módulo Psicosis (PSI) - Seguimiento Episodio Maníaco&quot;
--
&lt;h4 class=&quot;pregunta&quot;&gt;
Considere la suspensión de los medicamentos.
&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Aborde con la persona y el cuidador el riesgo de la sus 
 pensión de la medicación. &lt;/li&gt;
&lt;li&gt;Consulte a un especialista con respecto a la decisión de
suspender el tratamiento de mantenimiento después de 2
años.&lt;/li&gt;
&lt;li&gt;Reduzca gradualmente la medicación en un período de
semanas o meses.&lt;/li&gt;
&lt;/ul&gt;


&lt;h3 class=&quot;titulo&quot;&gt;&amp;#128681;Fin de esta Ruta&lt;/h3&gt;
&lt;table style=&quot;width:100%&quot;&gt;
  &lt;tr&gt;
    &lt;td style=&quot;text-align:left&quot;&gt;&amp;#128073;{back link, label: &#39;Devolverse&#39;}&amp;#128072;&lt;/td&gt;
    &lt;td style=&quot;text-align:right&quot;&gt;&amp;#128073;{restart link, label: &#39;Reiniciar Ruta&#39;}&amp;#128072;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;

</tw-passagedata></tw-storydata><script>!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=28)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.get=t.set=t.defaults=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.init=function(){var e=(0,u.ifid)(),t=(0,u.name)();if(void 0===t)throw new Error("Cannot set up state: the story has no name");d="chapbook-state-"+t+"-"+e},t.reset=m,t.sameObject=function(e,t){for(var n=e.split("."),r=t.split("."),o=0;o<n.length&&o<r.length;o++)if(n[o]!==r[o])return!1;return!0},t.setDefault=function(e,t){var n=y(e);f('Defaulting "'+e+'" to '+JSON.stringify(t)),(0,i.default)(h,e,t),v(window,e),null==n&&s.default.emit("state-change",{name:e,value:t,previous:n})},t.setLookup=function(e,t){var n=y(e);f("Adding lookup variable "+e),(0,i.default)(g,e,t),function(e,t){if(!e[t]){for(var n=t.split("."),r=n[n.length-1],o=0;o<n.length-1;o++)e[n[o]]=e[n[o]]||{},e=e[n[o]];Object.defineProperty(e,r,{get:function(){return y(t)},set:function(){throw new Error("Chapbook lookup variables may only be read.")},configurable:!0})}}(window,e),null==n&&s.default.emit("state-change",{name:e,value:y(e),previous:n})},t.saveToObject=k,t.restoreFromObject=w,t.canSaveToStorage=x,t.saveToStorage=_,t.canRestoreFromStorage=function(){return x()&&null!==window.localStorage.getItem(d)},t.restoreFromStorage=function(){f("Restoring variables from local storage"),w(JSON.parse(window.localStorage.getItem(d))),f("Restore complete")},t.purgeFromStorage=function(e){e||f("Purging variables from local storage");w(JSON.parse(window.localStorage.getItem(d))),e||f("Purge complete")},t.varNames=function(e){function t(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return Object.keys(e).reduce(function(o,i){if("object"===r(e[i])&&e[i]&&!Array.isArray(e[i]))t(e[i],n?n+"."+i:i,o);else{var a=n?n+"."+i:i;-1===o.indexOf(a)&&o.push(a)}return o},o)}if(e)return t(h,null,t(p,null)).sort();return t(p).sort()};var o=c(n(34)),i=c(n(35)),a=c(n(37)),s=c(n(1)),l=c(n(4)),u=n(6);function c(e){return e&&e.__esModule?e:{default:e}}var f=(0,l.default)("state").log,d=void 0,p={},h={},g={};function v(e,t){if(!e[t]){Object.defineProperty(e,t,{get:function(){return y(t)},set:function(e){b(t,e)},configurable:!0});var n=t.split(".");n.length>1&&(n.pop(),v(e,n.join(".")))}}function m(){!function e(t,n){Object.keys(t).forEach(function(o){var i,l,u=""===n?o:n+"."+o;if("object"!==r(t[o])||Array.isArray(t[o])){var c=t[o];delete t[o],i=window,l=n,(0,a.default)(i,l),s.default.emit("state-change",{name:u,value:y(u),previous:c})}else e(t[o],u)})}(p,""),s.default.emit("state-reset"),y("config.state.autosave")&&_()}function b(e,t){var n=y(e);(0,i.default)(p,e,t),v(window,e),t!==n&&s.default.emit("state-change",{name:e,previous:n,value:t}),y("config.state.autosave")&&_()}function y(e){var t=(0,o.default)(g,e);if("function"==typeof t)return t(y,b);var n=(0,o.default)(p,e);return null==n?(0,o.default)(h,e):n}function k(){return Object.assign({},p)}function w(e){m(),Object.keys(e).forEach(function(t){return b(t,e[t])})}function x(){try{return window.localStorage.setItem("chapbook-test","a"),window.localStorage.removeItem("chapbook-test"),!0}catch(e){return!1}}function _(){f("Saving to local storage: "+JSON.stringify(k())),window.localStorage.setItem(d,JSON.stringify(k())),f("Save complete")}t.defaults={"config.state.autosave":!0},t.set=b,t.get=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(30),i=(r=o)&&r.__esModule?r:{default:r};t.default=(0,i.default)()},function(e,t,n){"use strict";n.r(t),n.d(t,"h",function(){return s}),n.d(t,"createElement",function(){return s}),n.d(t,"cloneElement",function(){return f}),n.d(t,"createRef",function(){return I}),n.d(t,"Component",function(){return N}),n.d(t,"render",function(){return D}),n.d(t,"rerender",function(){return g}),n.d(t,"options",function(){return o});var r=function(){},o={},i=[],a=[];function s(e,t){var n,s,l,u,c=a;for(u=arguments.length;u-- >2;)i.push(arguments[u]);for(t&&null!=t.children&&(i.length||i.push(t.children),delete t.children);i.length;)if((s=i.pop())&&void 0!==s.pop)for(u=s.length;u--;)i.push(s[u]);else"boolean"==typeof s&&(s=null),(l="function"!=typeof e)&&(null==s?s="":"number"==typeof s?s=String(s):"string"!=typeof s&&(l=!1)),l&&n?c[c.length-1]+=s:c===a?c=[s]:c.push(s),n=l;var f=new r;return f.nodeName=e,f.children=c,f.attributes=null==t?void 0:t,f.key=null==t?void 0:t.key,void 0!==o.vnode&&o.vnode(f),f}function l(e,t){for(var n in t)e[n]=t[n];return e}function u(e,t){null!=e&&("function"==typeof e?e(t):e.current=t)}var c="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout;function f(e,t){return s(e.nodeName,l(l({},e.attributes),t),arguments.length>2?[].slice.call(arguments,2):e.children)}var d=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,p=[];function h(e){!e._dirty&&(e._dirty=!0)&&1==p.push(e)&&(o.debounceRendering||c)(g)}function g(){for(var e;e=p.pop();)e._dirty&&T(e)}function v(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}function m(e){var t=l({},e.attributes);t.children=e.children;var n=e.nodeName.defaultProps;if(void 0!==n)for(var r in n)void 0===t[r]&&(t[r]=n[r]);return t}function b(e){var t=e.parentNode;t&&t.removeChild(e)}function y(e,t,n,r,o){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)u(n,null),u(r,e);else if("class"!==t||o)if("style"===t){if(r&&"string"!=typeof r&&"string"!=typeof n||(e.style.cssText=r||""),r&&"object"==typeof r){if("string"!=typeof n)for(var i in n)i in r||(e.style[i]="");for(var i in r)e.style[i]="number"==typeof r[i]&&!1===d.test(i)?r[i]+"px":r[i]}}else if("dangerouslySetInnerHTML"===t)r&&(e.innerHTML=r.__html||"");else if("o"==t[0]&&"n"==t[1]){var a=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),r?n||e.addEventListener(t,k,a):e.removeEventListener(t,k,a),(e._listeners||(e._listeners={}))[t]=r}else if("list"!==t&&"type"!==t&&!o&&t in e){try{e[t]=null==r?"":r}catch(e){}null!=r&&!1!==r||"spellcheck"==t||e.removeAttribute(t)}else{var s=o&&t!==(t=t.replace(/^xlink:?/,""));null==r||!1===r?s?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!=typeof r&&(s?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),r):e.setAttribute(t,r))}else e.className=r||""}function k(e){return this._listeners[e.type](o.event&&o.event(e)||e)}var w=[],x=0,_=!1,S=!1;function j(){for(var e;e=w.shift();)o.afterMount&&o.afterMount(e),e.componentDidMount&&e.componentDidMount()}function O(e,t,n,r,o,i){x++||(_=null!=o&&void 0!==o.ownerSVGElement,S=null!=e&&!("__preactattr_"in e));var a=C(e,t,n,r,i);return o&&a.parentNode!==o&&o.appendChild(a),--x||(S=!1,i||j()),a}function C(e,t,n,r,o){var i=e,a=_;if(null!=t&&"boolean"!=typeof t||(t=""),"string"==typeof t||"number"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||o)?e.nodeValue!=t&&(e.nodeValue=t):(i=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(i,e),M(e,!0))),i.__preactattr_=!0,i;var s,l,u=t.nodeName;if("function"==typeof u)return function(e,t,n,r){var o=e&&e._component,i=o,a=e,s=o&&e._componentConstructor===t.nodeName,l=s,u=m(t);for(;o&&!l&&(o=o._parentComponent);)l=o.constructor===t.nodeName;o&&l&&(!r||o._component)?($(o,u,3,n,r),e=o.base):(i&&!s&&(z(i),e=a=null),o=P(t.nodeName,u,n),e&&!o.nextBase&&(o.nextBase=e,a=null),$(o,u,1,n,r),e=o.base,a&&e!==a&&(a._component=null,M(a,!1)));return e}(e,t,n,r);if(_="svg"===u||"foreignObject"!==u&&_,u=String(u),(!e||!v(e,u))&&(s=u,(l=_?document.createElementNS("http://www.w3.org/2000/svg",s):document.createElement(s)).normalizedNodeName=s,i=l,e)){for(;e.firstChild;)i.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(i,e),M(e,!0)}var c=i.firstChild,f=i.__preactattr_,d=t.children;if(null==f){f=i.__preactattr_={};for(var p=i.attributes,h=p.length;h--;)f[p[h].name]=p[h].value}return!S&&d&&1===d.length&&"string"==typeof d[0]&&null!=c&&void 0!==c.splitText&&null==c.nextSibling?c.nodeValue!=d[0]&&(c.nodeValue=d[0]):(d&&d.length||null!=c)&&function(e,t,n,r,o){var i,a,s,l,u,c=e.childNodes,f=[],d={},p=0,h=0,g=c.length,m=0,y=t?t.length:0;if(0!==g)for(var k=0;k<g;k++){var w=c[k],x=w.__preactattr_,_=y&&x?w._component?w._component.__key:x.key:null;null!=_?(p++,d[_]=w):(x||(void 0!==w.splitText?!o||w.nodeValue.trim():o))&&(f[m++]=w)}if(0!==y)for(var k=0;k<y;k++){l=t[k],u=null;var _=l.key;if(null!=_)p&&void 0!==d[_]&&(u=d[_],d[_]=void 0,p--);else if(h<m)for(i=h;i<m;i++)if(void 0!==f[i]&&(S=a=f[i],O=o,"string"==typeof(j=l)||"number"==typeof j?void 0!==S.splitText:"string"==typeof j.nodeName?!S._componentConstructor&&v(S,j.nodeName):O||S._componentConstructor===j.nodeName)){u=a,f[i]=void 0,i===m-1&&m--,i===h&&h++;break}u=C(u,l,n,r),s=c[k],u&&u!==e&&u!==s&&(null==s?e.appendChild(u):u===s.nextSibling?b(s):e.insertBefore(u,s))}var S,j,O;if(p)for(var k in d)void 0!==d[k]&&M(d[k],!1);for(;h<=m;)void 0!==(u=f[m--])&&M(u,!1)}(i,d,n,r,S||null!=f.dangerouslySetInnerHTML),function(e,t,n){var r;for(r in n)t&&null!=t[r]||null==n[r]||y(e,r,n[r],n[r]=void 0,_);for(r in t)"children"===r||"innerHTML"===r||r in n&&t[r]===("value"===r||"checked"===r?e[r]:n[r])||y(e,r,n[r],n[r]=t[r],_)}(i,t.attributes,f),_=a,i}function M(e,t){var n=e._component;n?z(n):(null!=e.__preactattr_&&u(e.__preactattr_.ref,null),!1!==t&&null!=e.__preactattr_||b(e),A(e))}function A(e){for(e=e.lastChild;e;){var t=e.previousSibling;M(e,!0),e=t}}var E=[];function P(e,t,n){var r,o=E.length;for(e.prototype&&e.prototype.render?(r=new e(t,n),N.call(r,t,n)):((r=new N(t,n)).constructor=e,r.render=L);o--;)if(E[o].constructor===e)return r.nextBase=E[o].nextBase,E.splice(o,1),r;return r}function L(e,t,n){return this.constructor(e,n)}function $(e,t,n,r,i){e._disable||(e._disable=!0,e.__ref=t.ref,e.__key=t.key,delete t.ref,delete t.key,void 0===e.constructor.getDerivedStateFromProps&&(!e.base||i?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,r)),r&&r!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=r),e.prevProps||(e.prevProps=e.props),e.props=t,e._disable=!1,0!==n&&(1!==n&&!1===o.syncComponentUpdates&&e.base?h(e):T(e,1,i)),u(e.__ref,e))}function T(e,t,n,r){if(!e._disable){var i,a,s,u=e.props,c=e.state,f=e.context,d=e.prevProps||u,p=e.prevState||c,h=e.prevContext||f,g=e.base,v=e.nextBase,b=g||v,y=e._component,k=!1,_=h;if(e.constructor.getDerivedStateFromProps&&(c=l(l({},c),e.constructor.getDerivedStateFromProps(u,c)),e.state=c),g&&(e.props=d,e.state=p,e.context=h,2!==t&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(u,c,f)?k=!0:e.componentWillUpdate&&e.componentWillUpdate(u,c,f),e.props=u,e.state=c,e.context=f),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!k){i=e.render(u,c,f),e.getChildContext&&(f=l(l({},f),e.getChildContext())),g&&e.getSnapshotBeforeUpdate&&(_=e.getSnapshotBeforeUpdate(d,p));var S,C,A=i&&i.nodeName;if("function"==typeof A){var E=m(i);(a=y)&&a.constructor===A&&E.key==a.__key?$(a,E,1,f,!1):(S=a,e._component=a=P(A,E,f),a.nextBase=a.nextBase||v,a._parentComponent=e,$(a,E,0,f,!1),T(a,1,n,!0)),C=a.base}else s=b,(S=y)&&(s=e._component=null),(b||1===t)&&(s&&(s._component=null),C=O(s,i,f,n||!g,b&&b.parentNode,!0));if(b&&C!==b&&a!==y){var L=b.parentNode;L&&C!==L&&(L.replaceChild(C,b),S||(b._component=null,M(b,!1)))}if(S&&z(S),e.base=C,C&&!r){for(var N=e,D=e;D=D._parentComponent;)(N=D).base=C;C._component=N,C._componentConstructor=N.constructor}}for(!g||n?w.push(e):k||(e.componentDidUpdate&&e.componentDidUpdate(d,p,_),o.afterUpdate&&o.afterUpdate(e));e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);x||r||j()}}function z(e){o.beforeUnmount&&o.beforeUnmount(e);var t=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?z(n):t&&(null!=t.__preactattr_&&u(t.__preactattr_.ref,null),e.nextBase=t,b(t),E.push(e),A(t)),u(e.__ref,null)}function N(e,t){this._dirty=!0,this.context=t,this.props=e,this.state=this.state||{},this._renderCallbacks=[]}function D(e,t,n){return O(n,e,{},!1,t,!1)}function I(){return{}}l(N.prototype,{setState:function(e,t){this.prevState||(this.prevState=this.state),this.state=l(l({},this.state),"function"==typeof e?e(this.state,this.props):e),t&&this._renderCallbacks.push(t),h(this)},forceUpdate:function(e){e&&this._renderCallbacks.push(e),T(this,2)},render:function(){}});var R={h:s,createElement:s,cloneElement:f,createRef:I,Component:N,render:D,rerender:g,options:o};t.default=R},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.warn=t.log=t.defaults=void 0,t.default=function(e){return{log:function(t){l(e,t)},warn:function(t){u(e,t)}}};var r,o=n(1),i=(r=o)&&r.__esModule?r:{default:r},a=n(0);t.defaults={"config.logger.show.parse":!1,"config.logger.show.render":!1,"config.logger.show.sound":!1,"config.logger.show.state":!1,"config.logger.show.story":!1,"config.logger.show.style":!1};function s(e){return e+": "}function l(e,t){(0,a.get)("config.logger.show."+e)&&console.log(s(e)+t),i.default.emit("log",{source:e,message:t})}function u(e,t){console.warn(s(e)+t),i.default.emit("log-warning",{source:e,message:t})}t.log=l,t.warn=u,window.logger={log:l,warn:u}},function(e,t,n){"use strict";function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=document.createElement(e);return Object.keys(t).forEach(function(e){void 0!==t[e]&&r.setAttribute(e,t[e])}),n.forEach(function(e){"string"==typeof e?r.appendChild(document.createTextNode(e)):r.appendChild(e)}),r}Object.defineProperty(t,"__esModule",{value:!0}),t.domify=r,t.default=function(){return r.apply(void 0,arguments).outerHTML}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.passages=void 0,t.loadFromData=function(e){["name","creator","ifid","options"].forEach(function(t){return u[t]=e.getAttribute(t)}),u.startNode=parseInt(e.getAttribute("startnode")),u.creatorVersion=e.getAttribute("creator-version");var t=function(e){return e.map(function(e){return e.textContent})};u.customScripts=t((0,a.selectAll)(e,'[type="text/twine-javascript"]')),u.customStyles=t((0,a.selectAll)(e,'[type="text/twine-css"]')),c=(0,a.selectAll)(e,"tw-passagedata").map(function(e){var t={id:parseInt(e.getAttribute("pid")),name:e.getAttribute("name"),source:e.textContent},n=e.getAttribute("tags");return t.tags=n?n.split(" "):[],t})},t.init=function(){(0,s.setDefault)("trail",[d().name]),(0,s.setDefault)("config.testing","string"==typeof u.options&&-1!==u.options.indexOf("debug")||!1),document.title=u.name},t.runCustomScripts=function(){l.log("Running custom scripts ("+u.customScripts.length+")"),u.customScripts.forEach(function(e){new Function(e).apply(window)})},t.addCustomStyles=function(){l.log("Adding custom styles ("+u.customStyles.length+")"),u.customStyles.forEach(function(e){var t=document.createElement("style");t.innerHTML=e,document.head.appendChild(t)})},t.ifid=function(){return u.ifid},t.name=function(){return u.name},t.exportedPassages=f,t.startPassage=d,t.passageNamed=function(e){return c.find(function(t){return t.name===e})},t.passageWithId=function(e){return c.find(function(t){return t.id===e})};var r,o=n(4),i=(r=o)&&r.__esModule?r:{default:r},a=n(7),s=n(0);var l=(0,i.default)("story"),u={customScripts:[],customStyles:[]},c=[];function f(){return c}function d(){return c.find(function(e){return e.id===u.startNode})}t.passages=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.select=function(e,t){return e.querySelector(t)},t.selectAll=function(e,t){return Array.from(e.querySelectorAll(t))}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);n(46);t.default=class extends r.Component{constructor(e){super(e),this.state={open:void 0===this.props.initiallyOpen||this.props.initiallyOpen}}toggle(){this.setState({open:!this.state.open})}render(){return(0,r.h)("div",{class:"panel"+(this.state.open?" open":"")},(0,r.h)("h2",null,(0,r.h)("button",{onClick:()=>this.toggle()},this.props.title)),this.state.open&&(0,r.h)("div",{class:"content"},this.props.children))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaults=void 0,t.render=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,a.default)((0,i.default)(e),(0,s.get)("config.template.inserts")||[],(0,s.get)("config.template.modifiers")||[],t)};var r=l(n(60)),o=l(n(84)),i=l(n(94)),a=l(n(96)),s=n(0);function l(e){return e&&e.__esModule?e:{default:e}}t.defaults={"config.template.inserts":r.default,"config.template.modifiers":o.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaults=void 0,t.init=function(){(0,s.init)(),(0,l.init)(),h=document.querySelector("#page article"),v=document.querySelector("#page #spinner"),g={},["header","footer"].forEach(function(e){g[e]={container:document.querySelector("#page "+e)},["left","center","right"].forEach(function(t){g[e][t]=document.querySelector("#page "+e+" ."+t)})}),o.default.on("state-change",function(e){var t=e.name;return y("trail"===t)}),["change","click"].forEach(function(e){document.body.addEventListener(e,function(e){for(var t=e.target;t;)t.dataset&&Object.keys(t.dataset).some(function(e){return/^cb[A-Z]/.test(e)})&&o.default.emit("dom-"+e.type,t),t=t.parentNode})})},t.changeBody=function(e){(0,d.selectAll)(h,"input").forEach(function(e){e.setAttribute("value",e.value)}),(0,d.selectAll)(h,"select").forEach(function(e){for(var t=0;t<e.options.length;t++)t===e.options.selectedIndex?e.options[t].setAttribute("selected",""):e.options[t].removeAttribute("selected")});var t={x:window.scrollX,y:window.scrollY},n=h.innerHTML,r=document.createElement("div");for(;h.firstChild;)r.insertBefore(h.firstChild,r.firstChild);h.innerHTML=n,e(r),window.scrollX=t.x,window.scrollY=t.y,b(h,r.innerHTML,(0,a.get)("config.body.transition.name"),(0,a.get)("config.body.transition.duration"))};var r=p(n(20)),o=p(n(1)),i=n(64),a=n(0),s=n(66),l=n(69),u=n(6),c=n(11),f=p(n(71));n(72);var d=n(7);function p(e){return e&&e.__esModule?e:{default:e}}var h=void 0,g=void 0,v=void 0,m={crossfade:i.crossfade,fadeInOut:i.fadeInOut,none:i.none};t.defaults={"config.body.transition.name":"crossfade","config.body.transition.duration":"500ms","config.header.left":"","config.header.center":"","config.header.right":"","config.header.transition.name":"none","config.header.transition.duration":"500ms","config.footer.left":"_{story.name}_","config.footer.center":"","config.footer.right":"{restart link}","config.footer.transition.name":"none","config.footer.transition.duration":"500ms"};function b(e,t,n,r){m[n]?m[n](e,t,r):m.none(e,t)}var y=(0,r.default)(function(e){if(e.some(function(e){return e[0]})){var t=(0,a.get)("trail"),n=(0,u.passageNamed)(t[t.length-1]);if(!n)throw new Error('There is no passage named "'+t[t.length-1]+'".');window.scrollTo(0,0),b(h,(0,c.render)(n.source),(0,a.get)("config.body.transition.name"),(0,a.get)("config.body.transition.duration")),(0,f.default)(h,v)}["header","footer"].forEach(function(e){g[e].container.classList.remove("has-content"),["left","center","right"].forEach(function(t){var n=(0,c.render)((0,a.get)("config."+e+"."+t));""!==n&&g[e].container.classList.add("has-content"),b(g[e][t],n,(0,a.get)("config."+e+".transition.name"),(0,a.get)("config."+e+".transition.duration"))})})})},function(e,t,n){"use strict";e.exports=function(e,t,n){n=Object.assign({},r,n||{});let o=0,a=function(e){let t={ms:.001,s:1,m:60,h:3600};return t.d=e.hoursPerDay*t.h,t.w=e.daysPerWeek*t.d,t.mth=e.daysPerYear/e.monthsPerYear*t.d,t.y=e.daysPerYear*t.d,t}(n),s=e.toLowerCase().replace(/[^.\w+-]+/g,"").match(/[-+]?[0-9.]+[a-z]+/g);null!==s&&s.forEach(e=>{let t=e.match(/[0-9.]+/g)[0],n=e.match(/[a-z]+/g)[0];o+=function(e,t,n){return e*n[i(t)]}(t,n,a)});if(t)return function(e,t,n){return e/n[i(t)]}(o,t,a);return o};const r={hoursPerDay:24,daysPerWeek:7,weeksPerMonth:4,monthsPerYear:12,daysPerYear:365.25},o={ms:["ms","milli","millisecond","milliseconds"],s:["s","sec","secs","second","seconds"],m:["m","min","mins","minute","minutes"],h:["h","hr","hrs","hour","hours"],d:["d","day","days"],w:["w","week","weeks"],mth:["mon","mth","mths","month","months"],y:["y","yr","yrs","year","years"]};function i(e){for(let t of Object.keys(o))if(o[t].indexOf(e)>-1)return t;throw new Error(`The unit [${e}] is not supported by timestring`)}},function(e,t){function n(e,t){if(!e)throw new Error(t||"AssertionError")}n.notEqual=function(e,t,r){n(e!=t,r)},n.notOk=function(e,t){n(!e,t)},n.equal=function(e,t,r){n(e==t,r)},n.ok=n,e.exports=n},function(e,t,n){"use strict";
/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */e.exports=function(e){return null!=e&&"object"==typeof e&&!1===Array.isArray(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderLink=a,t.default=function(e){return e.replace(/\[\[(.*?)\]\]/g,function(e,t){var n=t,r=t.indexOf("|");if(-1!==r)n=t.substr(0,r),t=t.substr(r+1);else{var o=t.indexOf("->");if(-1!==o)n=t.substr(0,o),t=t.substr(o+2);else{var i=t.indexOf("<-");-1!==i&&(n=t.substr(i+2),t=t.substr(0,i))}}return a(t,n||t)})};var r,o=n(5),i=(r=o)&&r.__esModule?r:{default:r};function a(e,t){return/^\w+:\/\/\/?\w/i.test(e)?(0,i.default)("a",{href:e},[t||e]):(0,i.default)("a",{href:"javascript:void(0)","data-cb-go":e},[t||e])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.history=t.defaults=void 0,t.rewindTo=function(e){if(!s[e])throw new Error("There is no history at index "+e+" to rewind to.");l=!1,(0,a.restoreFromObject)(s[e].state),s.length=e+1,l=!0,i.default.emit("backstage-recorder-update")},t.init=function(){i.default.on("state-change",c),i.default.on("state-reset",u)};var r,o=n(1),i=(r=o)&&r.__esModule?r:{default:r},a=n(0);t.defaults={"config.backstage.trail.maxLength":100};var s=t.history=[],l=!0;function u(){l&&(t.history=s=[],i.default.emit("backstage-recorder-update"))}function c(e){var t=e.name,n=e.value;l&&(s.length===(0,a.get)("config.backstage.trail.maxLength")&&s.shift(),s.push({change:{name:t,value:n},state:(0,a.saveToObject)()}),i.default.emit("backstage-recorder-update"))}},function(e,t,n){(function(t){var n=1/0,r="[object Symbol]",o=/[&<>"'`]/g,i=RegExp(o.source),a="object"==typeof t&&t&&t.Object===Object&&t,s="object"==typeof self&&self&&self.Object===Object&&self,l=a||s||Function("return this")();var u,c=(u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},function(e){return null==u?void 0:u[e]}),f=Object.prototype.toString,d=l.Symbol,p=d?d.prototype:void 0,h=p?p.toString:void 0;function g(e){if("string"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&f.call(e)==r}(e))return h?h.call(e):"";var t=e+"";return"0"==t&&1/e==-n?"-0":t}e.exports=function(e){var t;return(e=null==(t=e)?"":g(t))&&i.test(e)?e.replace(o,c):e}}).call(this,n(19))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=[],n=!1;return function(){for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];n||(n=!0,Promise.resolve().then(function(){try{e(t)}catch(e){window.setTimeout(function(){throw e},0)}t=[],n=!1})),t.push(o)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="<span"+Object.keys(t).reduce(function(e,n){return e+" "+n+'="'+t[n]+'"'},"")+">",r=n+e.replace(/[\r\n]{2,}/g,"</span>$&"+n)+"</span>";return r=r.replace(/(<span.*?>)\s*(#+)/gi,"$2 $1")}},function(e,t,n){e.exports=function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function n(e,n){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){r&&(e=r);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}var r,o=(function(e){function t(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}e.exports={defaults:{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1},getDefaults:t,changeDefaults:function(t){e.exports.defaults=t}}}(r={exports:{}},r.exports),r.exports),i=(o.defaults,o.getDefaults,o.changeDefaults,/[&<>"']/),a=/[&<>"']/g,s=/[<>"']|&(?!#?\w+;)/,l=/[<>"']|&(?!#?\w+;)/g,u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},c=function(e){return u[e]},f=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function d(e){return e.replace(f,function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}var p=/(^|[^\[])\^/g,h=/[^\w:]/g,g=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i,v={},m=/^[^:]+:\/*[^/]*$/,b=/^([^:]+:)[\s\S]*$/,y=/^([^:]+:\/*[^/]*)[\s\S]*$/;function k(e,t){v[" "+e]||(m.test(e)?v[" "+e]=e+"/":v[" "+e]=w(e,"/",!0));var n=-1===(e=v[" "+e]).indexOf(":");return"//"===t.substring(0,2)?n?t:e.replace(b,"$1")+t:"/"===t.charAt(0)?n?t:e.replace(y,"$1")+t:e+t}function w(e,t,n){var r=e.length;if(0===r)return"";for(var o=0;o<r;){var i=e.charAt(r-o-1);if(i!==t||n){if(i===t||!n)break;o++}else o++}return e.substr(0,r-o)}var x={escape:function(e,t){if(t){if(i.test(e))return e.replace(a,c)}else if(s.test(e))return e.replace(l,c);return e},unescape:d,edit:function(e,t){e=e.source||e,t=t||"";var n={replace:function(t,r){return r=(r=r.source||r).replace(p,"$1"),e=e.replace(t,r),n},getRegex:function(){return new RegExp(e,t)}};return n},cleanUrl:function(e,t,n){if(e){var r;try{r=decodeURIComponent(d(n)).replace(h,"").toLowerCase()}catch(e){return null}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:")||0===r.indexOf("data:"))return null}t&&!g.test(n)&&(n=k(t,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(e){return null}return n},resolveUrl:k,noopTest:{exec:function(){}},merge:function(e){for(var t,n,r=1;r<arguments.length;r++)for(n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},splitCells:function(e,t){var n=e.replace(/\|/g,function(e,t,n){for(var r=!1,o=t;--o>=0&&"\\"===n[o];)r=!r;return r?"|":" |"}).split(/ \|/),r=0;if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n},rtrim:w,findClosingBracket:function(e,t){if(-1===e.indexOf(t[1]))return-1;for(var n=e.length,r=0,o=0;o<n;o++)if("\\"===e[o])o++;else if(e[o]===t[0])r++;else if(e[o]===t[1]&&--r<0)return o;return-1},checkSanitizeDeprecation:function(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")},repeatString:function(e,t){if(t<1)return"";for(var n="";t>1;)1&t&&(n+=e),t>>=1,e+=e;return n+e}},_=o.defaults,S=x.rtrim,j=x.splitCells,O=x.escape,C=x.findClosingBracket;function M(e,t,n){var r=t.href,o=t.title?O(t.title):null,i=e[1].replace(/\\([\[\]])/g,"$1");return"!"!==e[0].charAt(0)?{type:"link",raw:n,href:r,title:o,text:i}:{type:"image",raw:n,href:r,title:o,text:O(i)}}var A=function(){function e(e){this.options=e||_}var t=e.prototype;return t.space=function(e){var t=this.rules.block.newline.exec(e);if(t)return t[0].length>1?{type:"space",raw:t[0]}:{raw:"\n"}},t.code=function(e,t){var n=this.rules.block.code.exec(e);if(n){var r=t[t.length-1];if(r&&"paragraph"===r.type)return{raw:n[0],text:n[0].trimRight()};var o=n[0].replace(/^ {4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?o:S(o,"\n")}}},t.fences=function(e){var t=this.rules.block.fences.exec(e);if(t){var n=t[0],r=function(e,t){var n=e.match(/^(\s+)(?:```)/);if(null===n)return t;var r=n[1];return t.split("\n").map(function(e){var t=e.match(/^\s+/);if(null===t)return e;var n=t[0];return n.length>=r.length?e.slice(r.length):e}).join("\n")}(n,t[3]||"");return{type:"code",raw:n,lang:t[2]?t[2].trim():t[2],text:r}}},t.heading=function(e){var t=this.rules.block.heading.exec(e);if(t){var n=t[2].trim();if(/#$/.test(n)){var r=S(n,"#");this.options.pedantic?n=r.trim():r&&!/ $/.test(r)||(n=r.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:n}}},t.nptable=function(e){var t=this.rules.block.nptable.exec(e);if(t){var n={type:"table",header:j(t[1].replace(/^ *| *\| *$/g,"")),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:t[3]?t[3].replace(/\n$/,"").split("\n"):[],raw:t[0]};if(n.header.length===n.align.length){var r,o=n.align.length;for(r=0;r<o;r++)/^ *-+: *$/.test(n.align[r])?n.align[r]="right":/^ *:-+: *$/.test(n.align[r])?n.align[r]="center":/^ *:-+ *$/.test(n.align[r])?n.align[r]="left":n.align[r]=null;for(o=n.cells.length,r=0;r<o;r++)n.cells[r]=j(n.cells[r],n.header.length);return n}}},t.hr=function(e){var t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}},t.blockquote=function(e){var t=this.rules.block.blockquote.exec(e);if(t){var n=t[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:t[0],text:n}}},t.list=function(e){var t=this.rules.block.list.exec(e);if(t){var n,r,o,i,a,s,l,u,c=t[0],f=t[2],d=f.length>1,p={type:"list",raw:c,ordered:d,start:d?+f.slice(0,-1):"",loose:!1,items:[]},h=t[0].match(this.rules.block.item),g=!1,v=h.length;o=this.rules.block.listItemStart.exec(h[0]);for(var m=0;m<v;m++){if(n=h[m],c=n,m!==v-1){if((i=this.rules.block.listItemStart.exec(h[m+1]))[1].length>o[0].length||i[1].length>3){h.splice(m,2,h[m]+"\n"+h[m+1]),m--,v--;continue}(!this.options.pedantic||this.options.smartLists?i[2][i[2].length-1]!==f[f.length-1]:d===(1===i[2].length))&&(a=h.slice(m+1).join("\n"),p.raw=p.raw.substring(0,p.raw.length-a.length),m=v-1),o=i}r=n.length,~(n=n.replace(/^ *([*+-]|\d+[.)]) ?/,"")).indexOf("\n ")&&(r-=n.length,n=this.options.pedantic?n.replace(/^ {1,4}/gm,""):n.replace(new RegExp("^ {1,"+r+"}","gm"),"")),s=g||/\n\n(?!\s*$)/.test(n),m!==v-1&&(g="\n"===n.charAt(n.length-1),s||(s=g)),s&&(p.loose=!0),this.options.gfm&&(l=/^\[[ xX]\] /.test(n),u=void 0,l&&(u=" "!==n[1],n=n.replace(/^\[[ xX]\] +/,""))),p.items.push({type:"list_item",raw:c,task:l,checked:u,loose:s,text:n})}return p}},t.html=function(e){var t=this.rules.block.html.exec(e);if(t)return{type:this.options.sanitize?"paragraph":"html",raw:t[0],pre:!this.options.sanitizer&&("pre"===t[1]||"script"===t[1]||"style"===t[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):O(t[0]):t[0]}},t.def=function(e){var t=this.rules.block.def.exec(e);if(t){t[3]&&(t[3]=t[3].substring(1,t[3].length-1));var n=t[1].toLowerCase().replace(/\s+/g," ");return{tag:n,raw:t[0],href:t[2],title:t[3]}}},t.table=function(e){var t=this.rules.block.table.exec(e);if(t){var n={type:"table",header:j(t[1].replace(/^ *| *\| *$/g,"")),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:t[3]?t[3].replace(/\n$/,"").split("\n"):[]};if(n.header.length===n.align.length){n.raw=t[0];var r,o=n.align.length;for(r=0;r<o;r++)/^ *-+: *$/.test(n.align[r])?n.align[r]="right":/^ *:-+: *$/.test(n.align[r])?n.align[r]="center":/^ *:-+ *$/.test(n.align[r])?n.align[r]="left":n.align[r]=null;for(o=n.cells.length,r=0;r<o;r++)n.cells[r]=j(n.cells[r].replace(/^ *\| *| *\| *$/g,""),n.header.length);return n}}},t.lheading=function(e){var t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1]}},t.paragraph=function(e){var t=this.rules.block.paragraph.exec(e);if(t)return{type:"paragraph",raw:t[0],text:"\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1]}},t.text=function(e,t){var n=this.rules.block.text.exec(e);if(n){var r=t[t.length-1];return r&&"text"===r.type?{raw:n[0],text:n[0]}:{type:"text",raw:n[0],text:n[0]}}},t.escape=function(e){var t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:O(t[1])}},t.tag=function(e,t,n){var r=this.rules.inline.tag.exec(e);if(r)return!t&&/^<a /i.test(r[0])?t=!0:t&&/^<\/a>/i.test(r[0])&&(t=!1),!n&&/^<(pre|code|kbd|script)(\s|>)/i.test(r[0])?n=!0:n&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(r[0])&&(n=!1),{type:this.options.sanitize?"text":"html",raw:r[0],inLink:t,inRawBlock:n,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):O(r[0]):r[0]}},t.link=function(e){var t=this.rules.inline.link.exec(e);if(t){var n=t[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;var r=S(n.slice(0,-1),"\\");if((n.length-r.length)%2==0)return}else{var o=C(t[2],"()");if(o>-1){var i=0===t[0].indexOf("!")?5:4,a=i+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,a).trim(),t[3]=""}}var s=t[2],l="";if(this.options.pedantic){var u=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(s);u&&(s=u[1],l=u[3])}else l=t[3]?t[3].slice(1,-1):"";return s=s.trim(),/^</.test(s)&&(s=this.options.pedantic&&!/>$/.test(n)?s.slice(1):s.slice(1,-1)),M(t,{href:s?s.replace(this.rules.inline._escapes,"$1"):s,title:l?l.replace(this.rules.inline._escapes,"$1"):l},t[0])}},t.reflink=function(e,t){var n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){var r=(n[2]||n[1]).replace(/\s+/g," ");if(!(r=t[r.toLowerCase()])||!r.href){var o=n[0].charAt(0);return{type:"text",raw:o,text:o}}return M(n,r,n[0])}},t.strong=function(e,t,n){void 0===n&&(n="");var r=this.rules.inline.strong.start.exec(e);if(r&&(!r[1]||r[1]&&(""===n||this.rules.inline.punctuation.exec(n)))){t=t.slice(-1*e.length);var o,i="**"===r[0]?this.rules.inline.strong.endAst:this.rules.inline.strong.endUnd;for(i.lastIndex=0;null!=(r=i.exec(t));)if(o=this.rules.inline.strong.middle.exec(t.slice(0,r.index+3)))return{type:"strong",raw:e.slice(0,o[0].length),text:e.slice(2,o[0].length-2)}}},t.em=function(e,t,n){void 0===n&&(n="");var r=this.rules.inline.em.start.exec(e);if(r&&(!r[1]||r[1]&&(""===n||this.rules.inline.punctuation.exec(n)))){t=t.slice(-1*e.length);var o,i="*"===r[0]?this.rules.inline.em.endAst:this.rules.inline.em.endUnd;for(i.lastIndex=0;null!=(r=i.exec(t));)if(o=this.rules.inline.em.middle.exec(t.slice(0,r.index+2)))return{type:"em",raw:e.slice(0,o[0].length),text:e.slice(1,o[0].length-1)}}},t.codespan=function(e){var t=this.rules.inline.code.exec(e);if(t){var n=t[2].replace(/\n/g," "),r=/[^ ]/.test(n),o=/^ /.test(n)&&/ $/.test(n);return r&&o&&(n=n.substring(1,n.length-1)),n=O(n,!0),{type:"codespan",raw:t[0],text:n}}},t.br=function(e){var t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}},t.del=function(e){var t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2]}},t.autolink=function(e,t){var n,r,o=this.rules.inline.autolink.exec(e);if(o)return"@"===o[2]?(n=O(this.options.mangle?t(o[1]):o[1]),r="mailto:"+n):(n=O(o[1]),r=n),{type:"link",raw:o[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}},t.url=function(e,t){var n;if(n=this.rules.inline.url.exec(e)){var r,o;if("@"===n[2])r=O(this.options.mangle?t(n[0]):n[0]),o="mailto:"+r;else{var i;do{i=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0]}while(i!==n[0]);r=O(n[0]),o="www."===n[1]?"http://"+r:r}return{type:"link",raw:n[0],text:r,href:o,tokens:[{type:"text",raw:r,text:r}]}}},t.inlineText=function(e,t,n){var r,o=this.rules.inline.text.exec(e);if(o)return r=t?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(o[0]):O(o[0]):o[0]:O(this.options.smartypants?n(o[0]):o[0]),{type:"text",raw:o[0],text:r}},e}(),E=x.noopTest,P=x.edit,L=x.merge,$={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?! {0,3}bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:E,table:E,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};$.def=P($.def).replace("label",$._label).replace("title",$._title).getRegex(),$.bullet=/(?:[*+-]|\d{1,9}[.)])/,$.item=/^( *)(bull) ?[^\n]*(?:\n(?! *bull ?)[^\n]*)*/,$.item=P($.item,"gm").replace(/bull/g,$.bullet).getRegex(),$.listItemStart=P(/^( *)(bull)/).replace("bull",$.bullet).getRegex(),$.list=P($.list).replace(/bull/g,$.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+$.def.source+")").getRegex(),$._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",$._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,$.html=P($.html,"i").replace("comment",$._comment).replace("tag",$._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),$.paragraph=P($._paragraph).replace("hr",$.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",$._tag).getRegex(),$.blockquote=P($.blockquote).replace("paragraph",$.paragraph).getRegex(),$.normal=L({},$),$.gfm=L({},$.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n {0,3}([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n {0,3}\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),$.gfm.nptable=P($.gfm.nptable).replace("hr",$.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",$._tag).getRegex(),$.gfm.table=P($.gfm.table).replace("hr",$.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",$._tag).getRegex(),$.pedantic=L({},$.normal,{html:P("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",$._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:E,paragraph:P($.normal._paragraph).replace("hr",$.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",$.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var T={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:E,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",strong:{start:/^(?:(\*\*(?=[*punctuation]))|\*\*)(?![\s])|__/,middle:/^\*\*(?:(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)|\*(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)*?\*)+?\*\*$|^__(?![\s])((?:(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)|_(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)*?_)+?)__$/,endAst:/[^punctuation\s]\*\*(?!\*)|[punctuation]\*\*(?!\*)(?:(?=[punctuation_\s]|$))/,endUnd:/[^\s]__(?!_)(?:(?=[punctuation*\s])|$)/},em:{start:/^(?:(\*(?=[punctuation]))|\*)(?![*\s])|_/,middle:/^\*(?:(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)|\*(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)*?\*)+?\*$|^_(?![_\s])(?:(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)|_(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)*?_)+?_$/,endAst:/[^punctuation\s]\*(?!\*)|[punctuation]\*(?!\*)(?:(?=[punctuation_\s]|$))/,endUnd:/[^\s]_(?!_)(?:(?=[punctuation*\s])|$)/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:E,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\s*punctuation])/,_punctuation:"!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~"};T.punctuation=P(T.punctuation).replace(/punctuation/g,T._punctuation).getRegex(),T._blockSkip="\\[[^\\]]*?\\]\\([^\\)]*?\\)|`[^`]*?`|<[^>]*?>",T._overlapSkip="__[^_]*?__|\\*\\*\\[^\\*\\]*?\\*\\*",T._comment=P($._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),T.em.start=P(T.em.start).replace(/punctuation/g,T._punctuation).getRegex(),T.em.middle=P(T.em.middle).replace(/punctuation/g,T._punctuation).replace(/overlapSkip/g,T._overlapSkip).getRegex(),T.em.endAst=P(T.em.endAst,"g").replace(/punctuation/g,T._punctuation).getRegex(),T.em.endUnd=P(T.em.endUnd,"g").replace(/punctuation/g,T._punctuation).getRegex(),T.strong.start=P(T.strong.start).replace(/punctuation/g,T._punctuation).getRegex(),T.strong.middle=P(T.strong.middle).replace(/punctuation/g,T._punctuation).replace(/overlapSkip/g,T._overlapSkip).getRegex(),T.strong.endAst=P(T.strong.endAst,"g").replace(/punctuation/g,T._punctuation).getRegex(),T.strong.endUnd=P(T.strong.endUnd,"g").replace(/punctuation/g,T._punctuation).getRegex(),T.blockSkip=P(T._blockSkip,"g").getRegex(),T.overlapSkip=P(T._overlapSkip,"g").getRegex(),T._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,T._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,T._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,T.autolink=P(T.autolink).replace("scheme",T._scheme).replace("email",T._email).getRegex(),T._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,T.tag=P(T.tag).replace("comment",T._comment).replace("attribute",T._attribute).getRegex(),T._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,T._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,T._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,T.link=P(T.link).replace("label",T._label).replace("href",T._href).replace("title",T._title).getRegex(),T.reflink=P(T.reflink).replace("label",T._label).getRegex(),T.reflinkSearch=P(T.reflinkSearch,"g").replace("reflink",T.reflink).replace("nolink",T.nolink).getRegex(),T.normal=L({},T),T.pedantic=L({},T.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:P(/^!?\[(label)\]\((.*?)\)/).replace("label",T._label).getRegex(),reflink:P(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",T._label).getRegex()}),T.gfm=L({},T.normal,{escape:P(T.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),T.gfm.url=P(T.gfm.url,"i").replace("email",T.gfm._extended_email).getRegex(),T.breaks=L({},T.gfm,{br:P(T.br).replace("{2,}","*").getRegex(),text:P(T.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var z={block:$,inline:T},N=o.defaults,D=z.block,I=z.inline,R=x.repeatString;function q(e){return e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function F(e){var t,n,r="",o=e.length;for(t=0;t<o;t++)n=e.charCodeAt(t),Math.random()>.5&&(n="x"+n.toString(16)),r+="&#"+n+";";return r}var U=function(){function t(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||N,this.options.tokenizer=this.options.tokenizer||new A,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options;var t={block:D.normal,inline:I.normal};this.options.pedantic?(t.block=D.pedantic,t.inline=I.pedantic):this.options.gfm&&(t.block=D.gfm,this.options.breaks?t.inline=I.breaks:t.inline=I.gfm),this.tokenizer.rules=t}t.lex=function(e,n){var r=new t(n);return r.lex(e)},t.lexInline=function(e,n){var r=new t(n);return r.inlineTokens(e)};var n,r,o,i=t.prototype;return i.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.blockTokens(e,this.tokens,!0),this.inline(this.tokens),this.tokens},i.blockTokens=function(e,t,n){var r,o,i,a;for(void 0===t&&(t=[]),void 0===n&&(n=!0),e=e.replace(/^ +$/gm,"");e;)if(r=this.tokenizer.space(e))e=e.substring(r.raw.length),r.type&&t.push(r);else if(r=this.tokenizer.code(e,t))e=e.substring(r.raw.length),r.type?t.push(r):((a=t[t.length-1]).raw+="\n"+r.raw,a.text+="\n"+r.text);else if(r=this.tokenizer.fences(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.heading(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.nptable(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.hr(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.blockquote(e))e=e.substring(r.raw.length),r.tokens=this.blockTokens(r.text,[],n),t.push(r);else if(r=this.tokenizer.list(e)){for(e=e.substring(r.raw.length),i=r.items.length,o=0;o<i;o++)r.items[o].tokens=this.blockTokens(r.items[o].text,[],!1);t.push(r)}else if(r=this.tokenizer.html(e))e=e.substring(r.raw.length),t.push(r);else if(n&&(r=this.tokenizer.def(e)))e=e.substring(r.raw.length),this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});else if(r=this.tokenizer.table(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.lheading(e))e=e.substring(r.raw.length),t.push(r);else if(n&&(r=this.tokenizer.paragraph(e)))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.text(e,t))e=e.substring(r.raw.length),r.type?t.push(r):((a=t[t.length-1]).raw+="\n"+r.raw,a.text+="\n"+r.text);else if(e){var s="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(s);break}throw new Error(s)}return t},i.inline=function(e){var t,n,r,o,i,a,s=e.length;for(t=0;t<s;t++)switch((a=e[t]).type){case"paragraph":case"text":case"heading":a.tokens=[],this.inlineTokens(a.text,a.tokens);break;case"table":for(a.tokens={header:[],cells:[]},o=a.header.length,n=0;n<o;n++)a.tokens.header[n]=[],this.inlineTokens(a.header[n],a.tokens.header[n]);for(o=a.cells.length,n=0;n<o;n++)for(i=a.cells[n],a.tokens.cells[n]=[],r=0;r<i.length;r++)a.tokens.cells[n][r]=[],this.inlineTokens(i[r],a.tokens.cells[n][r]);break;case"blockquote":this.inline(a.tokens);break;case"list":for(o=a.items.length,n=0;n<o;n++)this.inline(a.items[n].tokens)}return e},i.inlineTokens=function(e,t,n,r){var o;void 0===t&&(t=[]),void 0===n&&(n=!1),void 0===r&&(r=!1);var i,a,s,l=e;if(this.tokens.links){var u=Object.keys(this.tokens.links);if(u.length>0)for(;null!=(i=this.tokenizer.rules.inline.reflinkSearch.exec(l));)u.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,i.index)+"["+R("a",i[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(i=this.tokenizer.rules.inline.blockSkip.exec(l));)l=l.slice(0,i.index)+"["+R("a",i[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;e;)if(a||(s=""),a=!1,o=this.tokenizer.escape(e))e=e.substring(o.raw.length),t.push(o);else if(o=this.tokenizer.tag(e,n,r))e=e.substring(o.raw.length),n=o.inLink,r=o.inRawBlock,t.push(o);else if(o=this.tokenizer.link(e))e=e.substring(o.raw.length),"link"===o.type&&(o.tokens=this.inlineTokens(o.text,[],!0,r)),t.push(o);else if(o=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(o.raw.length),"link"===o.type&&(o.tokens=this.inlineTokens(o.text,[],!0,r)),t.push(o);else if(o=this.tokenizer.strong(e,l,s))e=e.substring(o.raw.length),o.tokens=this.inlineTokens(o.text,[],n,r),t.push(o);else if(o=this.tokenizer.em(e,l,s))e=e.substring(o.raw.length),o.tokens=this.inlineTokens(o.text,[],n,r),t.push(o);else if(o=this.tokenizer.codespan(e))e=e.substring(o.raw.length),t.push(o);else if(o=this.tokenizer.br(e))e=e.substring(o.raw.length),t.push(o);else if(o=this.tokenizer.del(e))e=e.substring(o.raw.length),o.tokens=this.inlineTokens(o.text,[],n,r),t.push(o);else if(o=this.tokenizer.autolink(e,F))e=e.substring(o.raw.length),t.push(o);else if(n||!(o=this.tokenizer.url(e,F))){if(o=this.tokenizer.inlineText(e,r,q))e=e.substring(o.raw.length),s=o.raw.slice(-1),a=!0,t.push(o);else if(e){var c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}throw new Error(c)}}else e=e.substring(o.raw.length),t.push(o);return t},n=t,o=[{key:"rules",get:function(){return{block:D,inline:I}}}],(r=null)&&e(n.prototype,r),o&&e(n,o),t}(),B=o.defaults,H=x.cleanUrl,Z=x.escape,W=function(){function e(e){this.options=e||B}var t=e.prototype;return t.code=function(e,t,n){var r=(t||"").match(/\S*/)[0];if(this.options.highlight){var o=this.options.highlight(e,r);null!=o&&o!==e&&(n=!0,e=o)}return r?'<pre><code class="'+this.options.langPrefix+Z(r,!0)+'">'+(n?e:Z(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:Z(e,!0))+"</code></pre>\n"},t.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},t.html=function(e){return e},t.heading=function(e,t,n,r){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+r.slug(n)+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"},t.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},t.list=function(e,t,n){var r=t?"ol":"ul",o=t&&1!==n?' start="'+n+'"':"";return"<"+r+o+">\n"+e+"</"+r+">\n"},t.listitem=function(e){return"<li>"+e+"</li>\n"},t.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},t.paragraph=function(e){return"<p>"+e+"</p>\n"},t.table=function(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"},t.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},t.tablecell=function(e,t){var n=t.header?"th":"td",r=t.align?"<"+n+' align="'+t.align+'">':"<"+n+">";return r+e+"</"+n+">\n"},t.strong=function(e){return"<strong>"+e+"</strong>"},t.em=function(e){return"<em>"+e+"</em>"},t.codespan=function(e){return"<code>"+e+"</code>"},t.br=function(){return this.options.xhtml?"<br/>":"<br>"},t.del=function(e){return"<del>"+e+"</del>"},t.link=function(e,t,n){if(null===(e=H(this.options.sanitize,this.options.baseUrl,e)))return n;var r='<a href="'+Z(e)+'"';return t&&(r+=' title="'+t+'"'),r+=">"+n+"</a>"},t.image=function(e,t,n){if(null===(e=H(this.options.sanitize,this.options.baseUrl,e)))return n;var r='<img src="'+e+'" alt="'+n+'"';return t&&(r+=' title="'+t+'"'),r+=this.options.xhtml?"/>":">"},t.text=function(e){return e},e}(),V=function(){function e(){}var t=e.prototype;return t.strong=function(e){return e},t.em=function(e){return e},t.codespan=function(e){return e},t.del=function(e){return e},t.html=function(e){return e},t.text=function(e){return e},t.link=function(e,t,n){return""+n},t.image=function(e,t,n){return""+n},t.br=function(){return""},e}(),J=function(){function e(){this.seen={}}var t=e.prototype;return t.serialize=function(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},t.getNextSafeSlug=function(e,t){var n=e,r=0;if(this.seen.hasOwnProperty(n)){r=this.seen[e];do{n=e+"-"+ ++r}while(this.seen.hasOwnProperty(n))}return t||(this.seen[e]=r,this.seen[n]=0),n},t.slug=function(e,t){void 0===t&&(t={});var n=this.serialize(e);return this.getNextSafeSlug(n,t.dryrun)},e}(),G=o.defaults,X=x.unescape,Y=function(){function e(e){this.options=e||G,this.options.renderer=this.options.renderer||new W,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new V,this.slugger=new J}e.parse=function(t,n){var r=new e(n);return r.parse(t)},e.parseInline=function(t,n){var r=new e(n);return r.parseInline(t)};var t=e.prototype;return t.parse=function(e,t){void 0===t&&(t=!0);var n,r,o,i,a,s,l,u,c,f,d,p,h,g,v,m,b,y,k="",w=e.length;for(n=0;n<w;n++)switch((f=e[n]).type){case"space":continue;case"hr":k+=this.renderer.hr();continue;case"heading":k+=this.renderer.heading(this.parseInline(f.tokens),f.depth,X(this.parseInline(f.tokens,this.textRenderer)),this.slugger);continue;case"code":k+=this.renderer.code(f.text,f.lang,f.escaped);continue;case"table":for(u="",l="",i=f.header.length,r=0;r<i;r++)l+=this.renderer.tablecell(this.parseInline(f.tokens.header[r]),{header:!0,align:f.align[r]});for(u+=this.renderer.tablerow(l),c="",i=f.cells.length,r=0;r<i;r++){for(s=f.tokens.cells[r],l="",a=s.length,o=0;o<a;o++)l+=this.renderer.tablecell(this.parseInline(s[o]),{header:!1,align:f.align[o]});c+=this.renderer.tablerow(l)}k+=this.renderer.table(u,c);continue;case"blockquote":c=this.parse(f.tokens),k+=this.renderer.blockquote(c);continue;case"list":for(d=f.ordered,p=f.start,h=f.loose,i=f.items.length,c="",r=0;r<i;r++)v=f.items[r],m=v.checked,b=v.task,g="",v.task&&(y=this.renderer.checkbox(m),h?v.tokens.length>0&&"text"===v.tokens[0].type?(v.tokens[0].text=y+" "+v.tokens[0].text,v.tokens[0].tokens&&v.tokens[0].tokens.length>0&&"text"===v.tokens[0].tokens[0].type&&(v.tokens[0].tokens[0].text=y+" "+v.tokens[0].tokens[0].text)):v.tokens.unshift({type:"text",text:y}):g+=y),g+=this.parse(v.tokens,h),c+=this.renderer.listitem(g,b,m);k+=this.renderer.list(c,d,p);continue;case"html":k+=this.renderer.html(f.text);continue;case"paragraph":k+=this.renderer.paragraph(this.parseInline(f.tokens));continue;case"text":for(c=f.tokens?this.parseInline(f.tokens):f.text;n+1<w&&"text"===e[n+1].type;)f=e[++n],c+="\n"+(f.tokens?this.parseInline(f.tokens):f.text);k+=t?this.renderer.paragraph(c):c;continue;default:var x='Token with "'+f.type+'" type was not found.';if(this.options.silent)return void console.error(x);throw new Error(x)}return k},t.parseInline=function(e,t){t=t||this.renderer;var n,r,o="",i=e.length;for(n=0;n<i;n++)switch((r=e[n]).type){case"escape":o+=t.text(r.text);break;case"html":o+=t.html(r.text);break;case"link":o+=t.link(r.href,r.title,this.parseInline(r.tokens,t));break;case"image":o+=t.image(r.href,r.title,r.text);break;case"strong":o+=t.strong(this.parseInline(r.tokens,t));break;case"em":o+=t.em(this.parseInline(r.tokens,t));break;case"codespan":o+=t.codespan(r.text);break;case"br":o+=t.br();break;case"del":o+=t.del(this.parseInline(r.tokens,t));break;case"text":o+=t.text(r.text);break;default:var a='Token with "'+r.type+'" type was not found.';if(this.options.silent)return void console.error(a);throw new Error(a)}return o},e}(),K=x.merge,Q=x.checkSanitizeDeprecation,ee=x.escape,te=o.getDefaults,ne=o.changeDefaults,re=o.defaults;function oe(e,t,n){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if("function"==typeof t&&(n=t,t=null),t=K({},oe.defaults,t||{}),Q(t),n){var r,o=t.highlight;try{r=U.lex(e,t)}catch(e){return n(e)}var i=function(e){var i;if(!e)try{i=Y.parse(r,t)}catch(t){e=t}return t.highlight=o,e?n(e):n(null,i)};if(!o||o.length<3)return i();if(delete t.highlight,!r.length)return i();var a=0;return oe.walkTokens(r,function(e){"code"===e.type&&(a++,setTimeout(function(){o(e.text,e.lang,function(t,n){if(t)return i(t);null!=n&&n!==e.text&&(e.text=n,e.escaped=!0),0==--a&&i()})},0))}),void(0===a&&i())}try{var s=U.lex(e,t);return t.walkTokens&&oe.walkTokens(s,t.walkTokens),Y.parse(s,t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+ee(e.message+"",!0)+"</pre>";throw e}}return oe.options=oe.setOptions=function(e){return K(oe.defaults,e),ne(oe.defaults),oe},oe.getDefaults=te,oe.defaults=re,oe.use=function(e){var t=K({},e);if(e.renderer&&function(){var n=oe.defaults.renderer||new W,r=function(t){var r=n[t];n[t]=function(){for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];var s=e.renderer[t].apply(n,i);return!1===s&&(s=r.apply(n,i)),s}};for(var o in e.renderer)r(o);t.renderer=n}(),e.tokenizer&&function(){var n=oe.defaults.tokenizer||new A,r=function(t){var r=n[t];n[t]=function(){for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];var s=e.tokenizer[t].apply(n,i);return!1===s&&(s=r.apply(n,i)),s}};for(var o in e.tokenizer)r(o);t.tokenizer=n}(),e.walkTokens){var n=oe.defaults.walkTokens;t.walkTokens=function(t){e.walkTokens(t),n&&n(t)}}oe.setOptions(t)},oe.walkTokens=function(e,t){for(var r,o=n(e);!(r=o()).done;){var i=r.value;switch(t(i),i.type){case"table":for(var a,s=n(i.tokens.header);!(a=s()).done;){var l=a.value;oe.walkTokens(l,t)}for(var u,c=n(i.tokens.cells);!(u=c()).done;)for(var f,d=n(u.value);!(f=d()).done;){var p=f.value;oe.walkTokens(p,t)}break;case"list":oe.walkTokens(i.items,t);break;default:i.tokens&&oe.walkTokens(i.tokens,t)}}},oe.parseInline=function(e,t){if(null==e)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");t=K({},oe.defaults,t||{}),Q(t);try{var n=U.lexInline(e,t);return t.walkTokens&&oe.walkTokens(n,t.walkTokens),Y.parseInline(n,t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+ee(e.message+"",!0)+"</pre>";throw e}},oe.Parser=Y,oe.parser=Y.parse,oe.Renderer=W,oe.TextRenderer=V,oe.Lexer=U,oe.lexer=U.lex,oe.Tokenizer=A,oe.Slugger=J,oe.parse=oe,oe}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaults=void 0,t.init=function(){(p=document.createElement("div")).setAttribute("hidden",!0),p.dataset.cbSounds="",document.body.appendChild(p),i.default.on("state-change",function(e){var t=e.name,n=e.value,o=(0,s.sameObject)(t,"sound.ambient"),i=(0,s.sameObject)(t,"sound.effect");if(o){var a=(0,s.get)("sound.ambient");a&&Object.keys(a).forEach(function(e){a[e].url&&h(e,a[e].url,!1),a[e].volume&&m(e,a[e].volume),void 0!==a[e].muted&&b(e,a[e].muted),a[e].playing&&g(e,!0).catch(function(t){return f('Could not resume playing ambient sound "'+e+'" ('+t.message+")")})})}if(i){var l=(0,s.get)("sound.effect");l&&Object.keys(l).forEach(function(e){l[e].url&&h(e,l[e].url,!0),l[e].volume&&m(e,l[e].volume),void 0!==l[e].muted&&b(e,l[e].muted),l[e].playing&&g(e,!1).then(function(){return(0,s.set)("sound.effect."+e+".playing",!1)}).catch(function(t){return f('Could not resume playing sound effect "'+e+'" ('+t.message)})})}if(!o&&!i){var u=/^sound\.(ambient|effect)\.(.+?)\.(.+)$/i.exec(t);if(u)switch(u[3].toLowerCase()){case"playing":n?"ambient"===u[1]?g(u[2],!0,(0,r.default)((0,s.get)(u[2]+".transitionDuration")||(0,s.get)("sound.transitionDuration")||"0s","ms")):g(u[2],!1).then(function(){return(0,s.set)(t,!1)}):"ambient"===u[1]?v(u[2],(0,r.default)((0,s.get)(u[2]+".transitionDuration")||(0,s.get)("sound.transitionDuration")||"0s","ms")):v(u[2]);break;case"url":h(u[2],n,"effect"===u[1]);break;case"volume":m(u[2],n)}}})};var r=l(n(13)),o=l(n(4)),i=l(n(1)),a=l(n(99)),s=n(0);function l(e){return e&&e.__esModule?e:{default:e}}var u=(0,o.default)("sound"),c=u.log,f=u.warn,d={},p=void 0;t.defaults={"sound.mute":!1,"sound.volume":1,"sound.transitionDuration":"1s"};function h(e,t,n){d[e]?(d[e].setAttribute("src",t),n?d[e].setAttribute("preload","auto"):d[e].removeAttribute("preload"),c('Updated <audio> element in sound bank for "'+e+'" to use '+t)):(d[e]=document.createElement("audio"),d[e].setAttribute("src",t),n&&d[e].setAttribute("preload","auto"),p.appendChild(d[e]),c('Added new <audio> element to sound bank for "'+e+'" for '+t))}function g(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!d[e])throw new Error("There is no sound loaded named "+e+".");return c('Playing sound "'+e+'" (looping: '+t+")"),n>0&&(d[e].volume=0,(0,a.default)(d[e],1,n)),t?(d[e].loop=!0,d[e].play()):(d[e].loop=!1,new Promise(function(t,n){try{d[e].addEventListener("ended",function n(){d[e].removeEventListener("ended",n),t()}),d[e].play().catch(function(e){return n(e)})}catch(e){n(e)}}))}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!d[e])throw new Error("There is no sound loaded named "+e+".");if(t<=0)d[e].pause(),d[e].currentTime=0;else{var n=d[e].volume;(0,a.default)(d[e],0,t).then(function(){d[e].pause(),d[e].volume=n,d[e].currentTime=0})}}function m(e,t){if(!d[e])throw new Error("There is no sound loaded named "+e+".");if(t<0||t>1)throw new Error("A sound volume must be between 0 and 1.");d[e].volume=t}function b(e,t){if(!d[e])throw new Error("There is no sound loaded named "+e+".");d[e].muted=t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaults=void 0,t.default=function(e){e("random.coinFlip",function(){var e=l();return(0,o.default)(u),e>.5}),e("random.fraction",function(){var e=l();return(0,o.default)(u),e}),[4,5,6,8,10,12,20,25,50,100,1e3].forEach(function(t){e("random.d"+t,function(){var e=1+Math.round(l()*(t-1));return(0,o.default)(u),e})})};var r=s(n(106)),o=s(n(20)),i=s(n(1)),a=n(0);function s(e){return e&&e.__esModule?e:{default:e}}t.defaults={"config.random.seed":function(){return new Date},"config.random.privateState":null};var l=(0,r.default)(new Date,{state:!0});function u(){(0,a.set)("config.random.privateState",l.state())}i.default.on("state-change",function(e){var t=e.name,n=e.value;"config.random.seed"===t&&(l=(0,r.default)(n,{state:!0}))})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaults=void 0,t.style=d,t.init=function(){(0,a.init)(),f.dataset.cbAuthorStyles="",document.head.appendChild(f),o.default.on("state-change",function(e){var t=e.name,n=e.value;if((0,i.sameObject)(t,"config.style.backdrop")&&(u("Setting backdrop color"),d("#backdrop",{"background-color":(0,s.parseColor)((0,i.get)("config.style.backdrop")).color})),(0,i.sameObject)(t,"config.style.page.fork.divider.color")&&(u("Setting fork divider color"),d("#page .fork p a + a",{"border-top-color":(0,s.parseColor)((0,i.get)("config.style.page.fork.divider.color")).color})),(0,i.sameObject)(t,"config.style.page.fork.divider.size")&&(u("Setting fork divider size"),d("#page .fork p a + a",{"border-top-width":(0,i.get)("config.style.page.fork.divider.size")+"px"})),(0,i.sameObject)(t,"config.style.page.fork.divider.style")&&(u("Setting fork divider style"),d("#page .fork p a + a",{"border-top-style":(0,i.get)("config.style.page.fork.divider.style")})),(0,i.sameObject)(t,"config.style.page.style")||(0,i.sameObject)(t,"config.style.page.style.borderColor"))switch(u("Setting page style"),(0,i.get)("config.style.page.style")){case"none":d("#page",{border:"none","box-shadow":"none"});break;case"shadow":d("#page",{border:"none","box-shadow":"0 4px 8px hsla(0, 0%, 0%, 0.25)"});break;case"thick-line":d("#page",{border:"4px solid "+(0,s.parseColor)((0,i.get)("config.style.page.style.borderColor")).color,"box-shadow":"none"});break;case"thin-line":d("#page",{border:"1px solid "+(0,s.parseColor)((0,i.get)("config.style.page.style.borderColor")).color,"box-shadow":"none"})}if((0,i.sameObject)(t,"config.style.page.verticalAlign"))switch(u("Setting page vertical alignment"),(0,i.get)("config.style.page.verticalAlign")){case"top":d("#page article",{"align-items":"flex-start"});break;case"center":d("#page article",{"align-items":"center"});break;case"bottom":d("#page article",{"align-items":"flex-end"})}if(/^config\.style\.page\..*\.((line)?color|font)$/i.test(t)&&p(t,n),(0,i.sameObject)(t,"config.style.page")){["config.style.page","config.style.page.header","config.style.page.footer"].forEach(function(e){var t=(0,i.get)(e);t&&function(e,t){["color","font","lineColor"].forEach(function(n){t[n]&&p(e+"."+n,t[n]),t.link&&(t.link[n]&&p(e+".link."+n,t.link[n]),t.link.active&&t.link.active[n]&&p(e+".link.active."+n,t.link.active[n]))})}(e,t)})}})};var r=l(n(4)),o=l(n(1)),i=n(0),a=n(117),s=n(118);function l(e){return e&&e.__esModule?e:{default:e}}var u=(0,r.default)("style").log,c=(t.defaults={"config.style.backdrop":"gray-0","config.style.page.style":"shadow","config.style.page.style.borderColor":"gray-2","config.style.page.font":"Iowan Old Style/Constantia/Georgia/serif 18","config.style.page.color":"gray-9 on white","config.style.page.fork.divider.color":"gray-3","config.style.page.fork.divider.style":"dashed","config.style.page.fork.divider.size":1,"config.style.page.link.color":"gray-9","config.style.page.link.lineColor":"red-8","config.style.page.link.font":"underline","config.style.page.link.active.color":"red-8 on red-0","config.style.page.verticalAlign":"center","config.style.page.header.font":"16","config.style.page.header.link.font":"small caps","config.style.page.footer.font":"16","config.style.page.footer.link.font":"small caps"},{}),f=document.createElement("style");function d(e,t){c[e]=c[e]||{},Object.assign(c[e],t),function(){f.innerHTML=Object.keys(c).reduce(function(e,t){return e+(n=t,r=c[t],n+"{"+Object.keys(r).sort().reduce(function(e,t){return r[t]?e+t+":"+r[t].toString()+";":e},"")+"}");var n,r},"")}()}function p(e,t){var n="#page",r=e.replace(/^config\.style\.page\./i,"").split(".");switch("header"===r[0].toLowerCase()?(n+=" header",r.shift()):"footer"===r[0].toLowerCase()&&(n+=" footer",r.shift()),"link"===r[0].toLowerCase()&&(n+=" a",r.shift()),"active"===r[0].toLowerCase()&&(n=n+":hover, "+n+":active",r.shift()),r[0].toLowerCase()){case"color":u("Setting color for "+n),d(n,(0,s.parseColor)(t));break;case"linecolor":u("Setting line color for "+n);var o=(0,s.parseColor)(t).color;d(n,{"text-decoration-color":o,"-webkit-text-decoration-color":o});break;case"font":u("Setting font for "+n),d(n,(0,s.parseFont)(t))}}},function(e,t){var n=/-?\d+(\.\d+)?%?/g;e.exports=function(e){return e.match(n)}},function(e,t){e.exports=function(e,t,n){return Math.min(Math.max(e,t),n)}},function(e,t,n){"use strict";var r=n(29),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(44)),i=p(n(59)),a=n(0),s=n(23),l=p(n(100)),u=p(n(116)),c=n(12),f=n(6),d=n(25);function p(e){return e&&e.__esModule?e:{default:e}}n(126),(0,f.loadFromData)(document.querySelector("tw-storydata")),(0,i.default)(),(0,a.init)(),Object.assign(window,{go:r.go,restart:r.restart}),(0,d.init)(),(0,u.default)(),(0,l.default)(),(0,c.init)(),(0,s.init)(),(0,f.init)(),o&&(0,a.get)("config.testing")&&o.init(),!(0,a.get)("config.testing")&&(0,a.canRestoreFromStorage)()&&(0,a.restoreFromStorage)(),(0,f.addCustomStyles)(),(0,f.runCustomScripts)()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.go=f,t.restart=d;var r,o=n(1),i=(r=o)&&r.__esModule?r:{default:r},a=n(0),s=n(4),l=n(6),u=n(43);function c(e){(0,s.log)("actions",e)}function f(e){c('Going to passage "'+e+'"');var t=(0,l.passageNamed)(e);if(!t)throw new Error('There is no passage with the name "'+e+'"');(0,u.transferToState)(),(0,a.set)("trail",(0,a.get)("trail").concat(t.name))}function d(){c("Restarting"),(0,a.reset)(),window.location.reload()}i.default.on("dom-click",function(e){e.dataset.cbGo&&(0,u.validate)().then(function(){return f(e.dataset.cbGo)})}),i.default.on("dom-click",function(e){e.dataset.cbRestart&&d()})},function(e,t,n){var r=n(31),o=n(32),i=n(14);function a(e){if(!(this instanceof a))return new a(e);this._name=e||"nanobus",this._starListeners=[],this._listeners={}}e.exports=a,a.prototype.emit=function(e){i.ok("string"==typeof e||"symbol"==typeof e,"nanobus.emit: eventName should be type string or symbol");for(var t=[],n=1,r=arguments.length;n<r;n++)t.push(arguments[n]);var a=o(this._name+"('"+e.toString()+"')"),s=this._listeners[e];return s&&s.length>0&&this._emit(this._listeners[e],t),this._starListeners.length>0&&this._emit(this._starListeners,e,t,a.uuid),a(),this},a.prototype.on=a.prototype.addListener=function(e,t){return i.ok("string"==typeof e||"symbol"==typeof e,"nanobus.on: eventName should be type string or symbol"),i.equal(typeof t,"function","nanobus.on: listener should be type function"),"*"===e?this._starListeners.push(t):(this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t)),this},a.prototype.prependListener=function(e,t){return i.ok("string"==typeof e||"symbol"==typeof e,"nanobus.prependListener: eventName should be type string or symbol"),i.equal(typeof t,"function","nanobus.prependListener: listener should be type function"),"*"===e?this._starListeners.unshift(t):(this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].unshift(t)),this},a.prototype.once=function(e,t){i.ok("string"==typeof e||"symbol"==typeof e,"nanobus.once: eventName should be type string or symbol"),i.equal(typeof t,"function","nanobus.once: listener should be type function");var n=this;return this.on(e,function r(){t.apply(n,arguments);n.removeListener(e,r)}),this},a.prototype.prependOnceListener=function(e,t){i.ok("string"==typeof e||"symbol"==typeof e,"nanobus.prependOnceListener: eventName should be type string or symbol"),i.equal(typeof t,"function","nanobus.prependOnceListener: listener should be type function");var n=this;return this.prependListener(e,function r(){t.apply(n,arguments);n.removeListener(e,r)}),this},a.prototype.removeListener=function(e,t){return i.ok("string"==typeof e||"symbol"==typeof e,"nanobus.removeListener: eventName should be type string or symbol"),i.equal(typeof t,"function","nanobus.removeListener: listener should be type function"),"*"===e?(this._starListeners=this._starListeners.slice(),n(this._starListeners,t)):(void 0!==this._listeners[e]&&(this._listeners[e]=this._listeners[e].slice()),n(this._listeners[e],t));function n(e,t){if(e){var n=e.indexOf(t);return-1!==n?(r(e,n,1),!0):void 0}}},a.prototype.removeAllListeners=function(e){return e?"*"===e?this._starListeners=[]:this._listeners[e]=[]:(this._starListeners=[],this._listeners={}),this},a.prototype.listeners=function(e){var t="*"!==e?this._listeners[e]:this._starListeners,n=[];if(t)for(var r=t.length,o=0;o<r;o++)n.push(t[o]);return n},a.prototype._emit=function(e,t,n,r){if(void 0!==e&&0!==e.length){void 0===n&&(n=t,t=null),t&&(n=void 0!==r?[t].concat(n,r):[t].concat(n));for(var o=e.length,i=0;i<o;i++){var a=e[i];a.apply(a,n)}}}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r,o=e.length;if(!(t>=o||0===n)){var i=o-(n=t+n>o?o-t:n);for(r=t;r<i;++r)e[r]=e[r+n];e.length=i}}},function(e,t,n){var r,o=n(33)(),i=n(14);a.disabled=!0;try{r=window.performance,a.disabled="true"===window.localStorage.DISABLE_NANOTIMING||!r.mark}catch(e){}function a(e){if(i.equal(typeof e,"string","nanotiming: name should be type string"),a.disabled)return s;var t=(1e4*r.now()).toFixed()%Number.MAX_SAFE_INTEGER,n="start-"+t+"-"+e;function l(i){var a="end-"+t+"-"+e;r.mark(a),o.push(function(){var o=null;try{var s=e+" ["+t+"]";r.measure(s,n,a),r.clearMarks(n),r.clearMarks(a)}catch(e){o=e}i&&i(o,e)})}return r.mark(n),l.uuid=t,l}function s(e){e&&o.push(function(){e(new Error("nanotiming: performance API unavailable"))})}e.exports=a},function(e,t,n){var r=n(14),o="undefined"!=typeof window;function i(e){this.hasWindow=e,this.hasIdle=this.hasWindow&&window.requestIdleCallback,this.method=this.hasIdle?window.requestIdleCallback.bind(window):this.setTimeout,this.scheduled=!1,this.queue=[]}i.prototype.push=function(e){r.equal(typeof e,"function","nanoscheduler.push: cb should be type function"),this.queue.push(e),this.schedule()},i.prototype.schedule=function(){if(!this.scheduled){this.scheduled=!0;var e=this;this.method(function(t){for(;e.queue.length&&t.timeRemaining()>0;)e.queue.shift()(t);e.scheduled=!1,e.queue.length&&e.schedule()})}},i.prototype.setTimeout=function(e){setTimeout(e,0,{timeRemaining:function(){return 1}})},e.exports=function(){var e;return o?(window._nanoScheduler||(window._nanoScheduler=new i(!0)),e=window._nanoScheduler):e=new i,e}},function(e,t,n){
/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2018, Jon Schlinkert.
 * Released under the MIT License.
 */
const r=n(15);function o(e,t,n){return"function"==typeof n.join?n.join(e):e[0]+t+e[1]}function i(e,t,n){return"function"!=typeof n.isValid||n.isValid(e,t)}function a(e){return r(e)||Array.isArray(e)||"function"==typeof e}e.exports=function(e,t,n){if(r(n)||(n={default:n}),!a(e))return void 0!==n.default?n.default:e;"number"==typeof t&&(t=String(t));const s=Array.isArray(t),l="string"==typeof t,u=n.separator||".",c=n.joinChar||("string"==typeof u?u:".");if(!l&&!s)return e;if(l&&t in e)return i(t,e,n)?e[t]:n.default;let f=s?t:function(e,t,n){if("function"==typeof n.split)return n.split(e);return e.split(t)}(t,u,n),d=f.length,p=0;do{let t=f[p];for("number"==typeof t&&(t=String(t));t&&"\\"===t.slice(-1);)t=o([t.slice(0,-1),f[++p]||""],c,n);if(t in e){if(!i(t,e,n))return n.default;e=e[t]}else{let r=!1,a=p+1;for(;a<d;)if(r=(t=o([t,f[a++]],c,n))in e){if(!i(t,e,n))return n.default;e=e[t],p=a-1;break}if(!r)return n.default}}while(++p<d&&a(e));return p===d?e:n.default}},function(e,t,n){"use strict";
/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2018, Jon Schlinkert.
 * Released under the MIT License.
 */const r=n(36);function o(e,t,n,r){if(!s(e))return e;let l=r||{};const u=Array.isArray(t);if(!u&&"string"!=typeof t)return e;let c=l.merge;c&&"function"!=typeof c&&(c=Object.assign);const f=(u?t:function(e,t){const n=function(e,t){let n=e;if(void 0===t)return n+"";const r=Object.keys(t);for(let e=0;e<r.length;e++){const o=r[e];n+=";"+o+"="+String(t[o])}return n}(e,t);if(o.memo[n])return o.memo[n];const r=t&&t.separator?t.separator:".";let i=[],a=[];i=t&&"function"==typeof t.split?t.split(e):e.split(r);for(let e=0;e<i.length;e++){let t=i[e];for(;t&&"\\"===t.slice(-1)&&i[e+1];)t=t.slice(0,-1)+r+i[++e];a.push(t)}return o.memo[n]=a,a}(t,l)).filter(a),d=f.length,p=e;if(!r&&1===f.length)return i(e,f[0],n,c),e;for(let t=0;t<d;t++){let r=f[t];if(s(e[r])||(e[r]={}),t===d-1){i(e,r,n,c);break}e=e[r]}return p}function i(e,t,n,o){o&&r(e[t])&&r(n)?e[t]=o({},e[t],n):e[t]=n}function a(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e}function s(e){return null!==e&&("object"==typeof e||"function"==typeof e)}o.memo={},e.exports=o},function(e,t,n){"use strict";
/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var r=n(15);function o(e){return!0===r(e)&&"[object Object]"===Object.prototype.toString.call(e)}e.exports=function(e){var t,n;return!1!==o(e)&&("function"==typeof(t=e.constructor)&&(!1!==o(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf")))}},function(e,t,n){"use strict";
/*!
 * unset-value <https://github.com/jonschlinkert/unset-value>
 *
 * Copyright (c) 2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var r=n(15),o=n(38);e.exports=function(e,t){if(!r(e))throw new TypeError("expected an object.");if(e.hasOwnProperty(t))return delete e[t],!0;if(o(e,t)){for(var n=t.split("."),i=n.pop();n.length&&"\\"===n[n.length-1].slice(-1);)i=n.pop().slice(0,-1)+"."+i;for(;n.length;)e=e[t=n.shift()];return delete e[i]}return!0}},function(e,t,n){"use strict";
/*!
 * has-value <https://github.com/jonschlinkert/has-value>
 *
 * Copyright (c) 2014-2016, Jon Schlinkert.
 * Licensed under the MIT License.
 */var r=n(39),o=n(41),i=n(42);e.exports=function(e,t,n){return r(e)?o(i(e,t),n):o(e,t)}},function(e,t,n){"use strict";
/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var r=n(40);e.exports=function(e){return null!=e&&"object"==typeof e&&!1===r(e)}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";
/*!
 * has-values <https://github.com/jonschlinkert/has-values>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */e.exports=function(e,t){if(null==e)return!1;if("boolean"==typeof e)return!0;if("number"==typeof e)return 0!==e||!0!==t;if(void 0!==e.length)return 0!==e.length;for(var n in e)if(e.hasOwnProperty(n))return!0;return!1}},function(e,t){function n(e){return e?Array.isArray(e)?e.join("."):e:""}
/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */
e.exports=function(e,t,r,o,i){if(null===(a=e)||"object"!=typeof a&&"function"!=typeof a||!t)return e;var a;if(t=n(t),r&&(t+="."+n(r)),o&&(t+="."+n(o)),i&&(t+="."+n(i)),t in e)return e[t];for(var s=t.split("."),l=s.length,u=-1;e&&++u<l;){for(var c=s[u];"\\"===c[c.length-1];)c=c.slice(0,-1)+"."+s[++u];e=e[c]}return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validate=function(){var e=document.querySelector("form#cb-validation"),t=(0,r.selectAll)(e,"input, select");return new Promise(function(n,r){var o=function n(){e.removeEventListener("submit",i),t.forEach(function(e){return e.removeEventListener("invalid",n)}),r()},i=function r(){e.removeEventListener("submit",r),t.forEach(function(e){return e.removeEventListener("invalid",o)}),n()};t.forEach(function(e){return e.addEventListener("invalid",o)}),e.addEventListener("submit",i),document.querySelector("button#cb-validation-tester").click()})},t.transferToState=function(){(0,r.selectAll)(document,"[data-cb-set]").forEach(function(e){var t=e.dataset.set;switch(e.nodeName){case"INPUT":(0,o.set)(t,e.value);break;case"SELECT":(0,o.set)(t,e.options[e.selectedIndex].value);break;default:(0,o.set)(t,e.textContent)}})};var r=n(7),o=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Backstage=void 0,t.init=function(){(0,o.init)(),(0,r.render)((0,r.h)(f,null),document.body)};var r=n(2),o=n(17),i=c(n(45)),a=c(n(48)),s=c(n(49)),l=c(n(52)),u=c(n(56));function c(e){return e&&e.__esModule?e:{default:e}}n(58);class f extends r.Component{constructor(e){super(e),this.state={open:!0}}setBodyClass(){this.state.open?document.body.classList.add("backstage-visible"):document.body.classList.remove("backstage-visible")}toggle(){this.setState({open:!this.state.open})}render(){const e=this.state.open?{icon:"→",text:"Close"}:{icon:"←",text:"Open"};return(0,r.h)("div",{id:"backstage",class:this.state.open&&"open"},(0,r.h)("button",{onClick:e=>this.toggle(),title:e.text+" backstage panel",class:"toggle-visibility"},e.icon),(0,r.h)(u.default,null,(0,r.h)(s.default,{label:"State"}),(0,r.h)(i.default,{label:"History"}),(0,r.h)(l.default,{label:"Style"}),(0,r.h)(a.default,{label:"Notes"})))}componentDidMount(){this.setBodyClass()}componentDidUpdate(){this.setBodyClass()}}t.Backstage=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=l(n(10)),i=l(n(1)),a=n(17),s=n(0);function l(e){return e&&e.__esModule?e:{default:e}}function u(e){if(0===e.length)return[];const t=[];let n,r=[];return e.forEach(({change:e},o)=>{"trail"===e.name?(t.push({historyIndex:o-1,passage:n,varChanges:r}),r=[],n=e.value[e.value.length-1]):r.push({name:e.name,value:e.value})}),t.push({historyIndex:e.length-1,passage:n,varChanges:r}),console.log("Parsed",e,t),t}function c({historyIndex:e,passage:t,varChanges:n}){const o=[(0,r.h)("tr",null,(0,r.h)("td",{class:"actions",rowspan:n.length+1},(0,r.h)("button",{onClick:e>=0?()=>(0,a.rewindTo)(e):s.reset},"↪")),(0,r.h)("td",{class:"go",rowspan:n.length+1,colspan:n.length>0?1:2},t?`Go to "${t}"`:"Startup"))];return n.forEach(e=>{o.push((0,r.h)("tr",null,(0,r.h)("td",null,e.name," ← ",JSON.stringify(e.value))))}),o}n(47);t.default=class extends r.Component{constructor(e){super(e),this.state={history:u(a.history)},this.updateBound=(()=>this.update())}update(){this.setState({history:u(a.history)})}render(){let e;return e=this.state.history.length>0?(0,r.h)("table",{class:"history"},this.state.history.map(c)):(0,r.h)("table",{class:"history"},(0,r.h)("tr",null,(0,r.h)("td",{class:"actions"},(0,r.h)("button",{onClick:s.reset},"↪")),(0,r.h)("td",{class:"go"},"Startup"))),(0,r.h)(o.default,{title:"History"},e)}componentDidMount(){i.default.on("backstage-recorder-update",this.updateBound)}componentDidUnmount(){i.default.removeEventListener("backstage-recorder-update",this.updateBound)}}},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(n(18)),o=n(2),i=l(n(1)),a=n(7),s=n(0);function l(e){return e&&e.__esModule?e:{default:e}}t.default=class extends o.Component{constructor(e){super(e);const t=(0,s.get)("trail");this.state={currentPassage:t[t.length-1],notes:{}},this.restore(),this.syncBound=(e=>this.sync(e))}sync({name:e,value:t}){"trail"===e&&this.setState({currentPassage:t[t.length-1]})}restore(){const e=window.localStorage.getItem(`cb-passage-notes-${(0,s.get)("config.state.saveKey")}`);e&&this.setState({notes:JSON.parse(e)})}save(){window.localStorage.setItem(`cb-passage-notes-${(0,s.get)("config.state.saveKey")}`,JSON.stringify(this.state.notes))}saveNote(e,t){const n=Object.assign({},this.state.notes);n[e]=t,this.setState({notes:n}),this.save()}export(){const e=Object.keys(this.state.notes).reduce((e,t)=>e+`<li class="note"><span class="passage">${(0,r.default)(t)}</span><pre>${(0,r.default)(this.state.notes[t])}</pre></li>`,""),t=document.createElement("a");t.setAttribute("download",`${(0,s.get)("story.name")} Notes - ${(new Date).toDateString()} ${(new Date).toTimeString()}.html`),t.setAttribute("href","data:text/html;base64,"+window.btoa(`<style>body {font-family: sans-serif}</style><h1>Notes for &ldquo;${(0,r.default)((0,s.get)("story.name"))}&rdquo;</h1><ul data-cb-backstage-notes data-cb-version="${(0,s.get)("engine.version")}">${e}</ul>`)),document.body.appendChild(t),t.click(),document.body.removeChild(t)}startImport(){this.upload.click()}import(e){const t=this.upload.files[0];if(!t)return;const n=new FileReader(t);n.onload=(e=>{const t=document.createElement("div"),n=Object.assign({},this.state.notes);let r=0;t.innerHTML=e.target.result;const o=(0,a.selectAll)(t,"ul[data-cb-backstage-notes] li");0!==o.length?(o.forEach(e=>{const t=(0,a.select)(e,"span.passage"),o=(0,a.select)(e,"pre");t&&o&&(n[t.textContent]=(n[t.textContent]||"")+"\n\n"+o.textContent,r++)}),this.setState({notes:n}),this.save(),window.alert(`${r} note(s) were imported.`)):window.alert("No notes were found in this file.")}),n.readAsText(t)}deleteAll(){window.confirm("Are you sure? This will delete all text entered in the Notes panel of Backstage, and cannot be undone.")&&(this.setState({notes:{}}),this.save())}render(){return(0,o.h)("div",null,(0,o.h)("p",null,(0,o.h)("label",null,"Notes on “",this.state.currentPassage,"”")),(0,o.h)("p",null,(0,o.h)("textarea",{value:this.state.notes[this.state.currentPassage],onInput:e=>this.saveNote(this.state.currentPassage,e.target.value)})),(0,o.h)("p",null,(0,o.h)("button",{onClick:()=>this.export()},"Export All Notes"),(0,o.h)("button",{onClick:()=>this.startImport()},"Import Notes From File"),(0,o.h)("button",{onClick:()=>this.deleteAll()},"Delete All Notes")),(0,o.h)("input",{type:"file",hidden:!0,ref:e=>this.upload=e,onChange:()=>this.import()}))}componentDidMount(){i.default.on("state-change",this.syncBound)}componentDidUnmount(){i.default.removeListener("state-change",this.syncBound)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return(0,r.h)("div",null,(0,r.h)(i.default,null),(0,r.h)(o.default,null))};var r=n(2),o=a(n(50)),i=a(n(51));function a(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(2),i=n(0),a=n(10),s=(r=a)&&r.__esModule?r:{default:r};t.default=class extends o.Component{constructor(e){super(e),this.state={snapshots:[]},this.restore()}addSnapshot(){const e=window.prompt("Enter a name for this snapshot:");e&&this.setState({snapshots:this.state.snapshots.concat({name:e,state:(0,i.saveToObject)()})})}loadSnapshot(e){(0,i.restoreFromObject)(this.state.snapshots[e].state)}deleteSnapshot(e){window.confirm(`Are you sure you want to delete the snapshot "${this.state.snapshots[e].name}"? This cannot be undone.`)&&this.setState({snapshots:this.state.snapshots.filter((t,n)=>n!==e)})}save(){window.localStorage.setItem(`cb-snapshots-${(0,i.get)("config.state.saveKey")}`,JSON.stringify(this.state.snapshots))}restore(){const e=window.localStorage.getItem(`cb-snapshots-${(0,i.get)("config.state.saveKey")}`);e&&this.setState({snapshots:JSON.parse(e)})}render(){const e=this.state.snapshots.map((e,t)=>(0,o.h)("div",{class:"segmented-button block"},(0,o.h)("button",{onClick:()=>this.loadSnapshot(t),title:'Load snapshot "{s.name}"'},e.name),(0,o.h)("button",{onClick:()=>this.deleteSnapshot(t),class:"fixed",title:'Delete snapshot "{s.name}"'},(0,o.h)("strong",null,"×"))));return(0,o.h)(s.default,{title:"Snapshots"},e,(0,o.h)("button",{class:"block",onClick:()=>this.addSnapshot()},"Add Snapshot"))}componentDidUpdate(){this.save()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=s(n(10)),i=n(0),a=s(n(1));function s(e){return e&&e.__esModule?e:{default:e}}t.default=class extends r.Component{constructor(e){super(e),this.state={varNames:[],showDefaults:!1},this.syncBound=(()=>this.syncWithState())}syncWithState(){this.setState({varNames:(0,i.varNames)(this.state.showDefaults)})}onChangeDefaults(e){this.setState({showDefaults:e.target.checked})}onChangeVar(e,t){(0,i.set)(t,JSON.parse(e.target.value))}render(){return(0,r.h)(o.default,{title:"Variables"},(0,r.h)("p",null,(0,r.h)("input",{type:"checkbox",id:"cb-backstage-show-defaults",checked:this.state.showDefaults,onChange:e=>this.onChangeDefaults(e)}),(0,r.h)("label",{for:"cb-backstage-show-defaults"},"Show Defaults")),(0,r.h)("table",null,this.state.varNames.map(e=>(0,r.h)("tr",null,(0,r.h)("td",null,e),(0,r.h)("td",null,(0,r.h)("input",{type:"text",value:JSON.stringify((0,i.get)(e)),onChange:t=>this.onChangeVar(t,e)}))))))}componentWillMount(){this.syncWithState(),a.default.on("state-change",this.syncBound)}componentDidUpdate(e,t){t.showDefaults!==this.state.showDefaults&&this.syncWithState()}componentWillUnmount(){a.default.removeListener("state-change",this.syncBound)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return(0,r.h)("div",null,(0,r.h)(o.default,null),(0,r.h)(i.default,{title:"Page",prefix:"page"}),(0,r.h)(i.default,{title:"Header",prefix:"page.header"}),(0,r.h)(i.default,{title:"Footer",prefix:"page.footer"}))};var r=n(2),o=a(n(53)),i=a(n(54));function a(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(0),i=s(n(10)),a=s(n(1));function s(e){return e&&e.__esModule?e:{default:e}}const l=["page","page.header","page.footer"].reduce((e,t)=>e.concat([`config.style.${t}.font`,`config.style.${t}.color`,`config.style.${t}.link.font`,`config.style.${t}.link.color`,`config.style.${t}.link.lineColor`,`config.style.${t}.link.active.font`,`config.style.${t}.link.active.color`,`config.style.${t}.link.active.lineColor`]),[]);t.default=class extends r.Component{constructor(e){super(e),this.state=l.reduce((e,t)=>(e[t]=(0,o.get)(t),e),{}),this.onStateChangeBound=(({name:e,value:t})=>this.onStateChange(e,t))}onStateChange(e,t){this.state[e]&&this.setState({[e]:t})}render(){const e=Object.keys(this.state).reduce((e,t)=>{const n=(0,o.get)(t);return n?e+`${t}: ${JSON.stringify(n)}\n`:e},"").trim();return(0,r.h)(i.default,{title:"Config"},(0,r.h)("p",null,(0,r.h)("label",{for:"cb-backstage-style-config"},"Enter this code into your first passage’s vars section to permanently use this style:")),(0,r.h)("p",null,(0,r.h)("textarea",{readonly:!0,id:"cb-backstage-style-config",onClick:e=>e.target.select()},e)))}componentWillMount(){a.default.on("state-change",this.onStateChangeBound)}componentWillUnmount(){a.default.removeListener("state-change",this.onStateChangeBound)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({title:e,prefix:t}){return(0,r.h)(o.default,{title:e,initiallyOpen:!1},(0,r.h)(i.default,{label:"Font",binding:`config.style.${t}.font`}),(0,r.h)(i.default,{label:"Color",binding:`config.style.${t}.color`}),(0,r.h)(i.default,{label:"Link Font",binding:`config.style.${t}.link.font`}),(0,r.h)(i.default,{label:"Link Color",binding:`config.style.${t}.link.color`}),(0,r.h)(i.default,{label:"Link Line Color",binding:`config.style.${t}.link.lineColor`}),(0,r.h)(i.default,{label:"Active Link Font",binding:`config.style.${t}.link.active.font`}),(0,r.h)(i.default,{label:"Active Link Color",binding:`config.style.${t}.link.active.color`}),(0,r.h)(i.default,{label:"Active Link Line Color",binding:`config.style.${t}.link.active.lineColor`}))};var r=n(2),o=a(n(10)),i=a(n(55));function a(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({label:e,binding:t}){return(0,r.h)("p",{class:"input-group"},(0,r.h)("label",{for:`cb-backstage-${t}`},e),(0,r.h)("input",{type:"text",id:`cb-backstage-${t}`,value:(0,o.get)(t),onChange:e=>(0,o.set)(t,e.target.value)}))};var r=n(2),o=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);n(57);t.default=class extends r.Component{constructor(e){super(e),this.state={selected:0}}select(e){this.setState({selected:e})}render(){const e=this.props.children.map((e,t)=>(0,r.h)("li",null,(0,r.h)("button",{onClick:()=>this.select(t),class:t===this.state.selected&&"active"},e.attributes.label)));return(0,r.h)("div",null,(0,r.h)("ul",{class:"tabs"},e),(0,r.h)("div",{class:"tab-content"},this.props.children[this.state.selected]))}}},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){window.engine={extend:function(e,t){var n=a.get("engine.version"),r=d(e),o=d(n);o[0]<r[0]?f("The current engine version ("+n+") has a lower major version than requested ("+e+"); skipping"):(o[0]>r[0]?f("The current engine version ("+n+") has a higher major version than requested ("+e+"); running code but you may encounter problems"):(o[1]<r[1]&&f("The current engine version ("+n+") has a lower minor version than requested ("+e+"); running code but you may encounter problems"),o[1]===r[1]&&o[2]<r[2]&&f("The current engine version ("+n+") has a lower patch version than requested ("+e+"); running code but you may encounter problems")),t())},event:r.default,log:o.log,render:l.render,state:a,story:s,warn:o.warn}};var r=c(n(1)),o=n(4),i=c(o),a=u(n(0)),s=u(n(6)),l=n(11);function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function c(e){return e&&e.__esModule?e:{default:e}}var f=(0,i.default)("extensibility").warn;function d(e){return e.split(".").map(window.parseInt)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=m(n(61)),o=m(n(62)),i=m(n(63)),a=m(n(73)),s=m(n(74)),l=m(n(75)),u=m(n(76)),c=m(n(77)),f=m(n(78)),d=m(n(79)),p=m(n(80)),h=m(n(81)),g=m(n(82)),v=m(n(83));function m(e){return e&&e.__esModule?e:{default:e}}t.default=[r.default,o.default,i.default,a.default,s.default,l.default,u.default,c.default,f.default,d.default,p.default,h.default,g.default,v.default]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default={match:/^(no )?ambient\s+sound/i,render:function(e,t){var n=(0,r.get)("sound.ambient");if(n&&Object.keys(n).forEach(function(t){t!==e&&n[t].playing&&(0,r.set)("sound.ambient."+t+".playing",!1)}),e){var o=(0,r.get)("sound.ambient."+e+".description")||"";return t.volume&&(0,r.set)("sound.ambient."+e+".volume",t.volume),(0,r.set)("sound.ambient."+e+".playing",!0),"<audio>"+o+"</audio>"}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(16),o=n(0);t.default={match:/^back\s+link/i,render:function(e,t){var n=(0,o.get)("trail");return(0,r.renderLink)(n.length>1?n[n.length-2]:n[0],t.label||"Back")}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(12),o=n(0),i=s(n(1)),a=s(n(5));function s(e){return e&&e.__esModule?e:{default:e}}t.default={match:/^cycling\s+link(\s+for)?/i,render:function(e,t){var n=void 0;return e?void 0===(n=(0,o.get)(e))&&((0,o.set)(e,t.choices[0]),n=t.choices[0]):n=t.choices[0],(0,a.default)("a",{href:"javascript:void(0)","data-cb-cycle-set":e||void 0,"data-cb-cycle-choices":JSON.stringify(t.choices)},[n])}},i.default.on("dom-click",function(e){if(e.dataset.cbCycleChoices){var t=JSON.parse(e.dataset.cbCycleChoices),n=t.indexOf(e.textContent)+1;n===t.length&&(n=0),(0,r.changeBody)(function(){return e.textContent=t[n]}),e.dataset.cbCycleSet&&(0,o.set)(e.dataset.cbCycleSet,t[n])}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.none=function(e,t){return new Promise(function(n){e.innerHTML="<div>"+t+"</div>",n()})},t.fadeInOut=function(e,t,n){return new Promise(function(r){var o=e.style.pointerEvents,a=(0,i.default)(n,"s")/2;s(e),e.style.pointerEvents="none";var u=document.createElement("div");if(u.innerHTML=t,u.style.visibility="hidden",u.style.animationDuration=a+"s",u.addEventListener("animationend",function t(){u.removeEventListener("animationend",t),u.className="",u.style.animationDuration=a+"s",e.style.pointerEvents=o,r()}),""!==e.innerHTML.trim()){var c=l(e);c.style.position="absolute",c.style.top="0",c.style.left="0",c.className="fade-out",c.style.animationDuration=a+"s",c.addEventListener("animationend",function e(){c.removeEventListener("animationend",e),c.parentNode.removeChild(c),u.style.visibility="visible",u.className="fade-in"}),e.innerHTML="",e.appendChild(u),e.appendChild(c)}else u.className="fade-in",u.animationDuration=2*a,u.style.visibility="visible",u.className="fade-in",e.appendChild(u)})},t.crossfade=function(e,t,n){return new Promise(function(r){var o=e.style.pointerEvents,a=(0,i.default)(n,"s");s(e),e.style.pointerEvents="none";var u=document.createElement("div");if(u.innerHTML=t,u.className="fade-in",u.style.animationDuration=a+"s",u.addEventListener("animationend",function t(){u.removeEventListener("animationend",t),u.style.animationDuration=null,u.className="",e.style.pointerEvents=o,r()}),""!==e.innerHTML.trim()){var c=l(e);c.style.position="absolute",c.style.top="0",c.style.left="0",c.className="fade-out",c.style.animationDuration=a+"s",c.addEventListener("animationend",function e(){c.removeEventListener("animationend",e),c.style.opacity=.5,c.parentNode.removeChild(c)}),e.innerHTML="",e.appendChild(u),e.appendChild(c)}else e.innerHTML="",e.appendChild(u)})};var r,o=n(13),i=(r=o)&&r.__esModule?r:{default:r},a=n(7);function s(e){"static"===window.getComputedStyle(e).position&&(e.style.position="relative")}function l(e){var t=document.createElement(e.nodeName.toLowerCase());return t.innerHTML=e.innerHTML,t.style.width=e.clientWidth+"px",t.style.height=e.clientHeight+"px",t.setAttribute("aria-hidden",!0),t.style.pointerEvents="none",(0,a.selectAll)(t,"audio").forEach(function(e){return e.parentNode.removeChild(e)}),t}n(65)},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=function(){window.addEventListener("error",s),window.addEventListener("unhandledrejection",function(e){return s(e.reason)})};var r,o=n(67),i=(r=o)&&r.__esModule?r:{default:r},a=n(0);function s(e){try{var t="";t=(t=e.error&&e.error.stack?e.message+"\n\nStack trace:\n"+e.error.stack:e.message+"\n\n[No stack trace available]").replace("\nPlease report this to https://github.com/chjj/marked.","");var n=document.createElement("div"),r=document.querySelector("#page article"),o=(0,a.get)("trail");n.className="error",n.innerHTML="\n\t\t\t<p>\n\t\t\tAn unexpected error has occurred.\n\t\t\t</p>\n\t\t\t<pre>"+((0,a.get)("config.testing")?t:"")+'</pre>\n\t\t\t<ul>\n\t\t\t\t<li>\n\t\t\t\t\t<a href="javascript:void(0)" '+(o.length>1?"data-cb-back":"data-cb-refresh")+'>Go back</a> to the previous passage.\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<a href="javascript:void(0)" data-cb-hard-restart>Hard restart</a>, clearing all progress and beginning from the start.\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t',n.addEventListener("click",function(e){if((0,i.default)(e.target,"[data-cb-back]",!0)){var t=(0,a.get)("trail");Array.isArray(t)?(0,a.set)("trail",t.slice(0,t.length-1)):window.alert("Sorry, going back was not successful. Please try hard restarting.")}else{if((0,i.default)(e.target,"[data-cb-refresh]",!0))(0,a.set)("trail",[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}((0,a.get)("trail"))));else(0,i.default)(e.target,"[data-cb-hard-restart]",!0)&&((0,a.purgeFromStorage)(!0),window.location.reload())}}),r.innerHTML="",r.appendChild(n)}catch(e){console.error(e)}}},function(e,t,n){var r=n(68);e.exports=function(e,t,n){for(var o=n?e:e.parentNode;o&&o!==document;){if(r(o,t))return o;o=o.parentNode}}},function(e,t){var n=Element.prototype,r=n.matchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector;e.exports=function(e,t){if(r)return r.call(e,t);for(var n=e.parentNode.querySelectorAll(t),o=0;o<n.length;++o)if(n[o]==e)return!0;return!1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=function(){var e=window.console.warn,t=document.querySelector("#page .warnings");console.warn=function(){for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];if((0,o.get)("config.testing"))try{t.removeAttribute("hidden"),i.forEach(function(e){var n=document.createElement("li");n.className="warning",n.innerHTML="Warning: "+(0,r.default)(e),t.appendChild(n)})}catch(e){}e.apply(window.console,i)},i.default.on("state-change",function(e){var n=e.name;"trail"===n&&(t.setAttribute("hidden",""),t.innerHTML="")})};var r=a(n(18)),o=n(0),i=a(n(1));function a(e){return e&&e.__esModule?e:{default:e}}n(70)},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=Date.now(),r=void 0,o=(0,a.selectAll)(e,"[data-cb-skippable]").map(function(e){return{el:e,delay:1e3*(0,i.default)(window.getComputedStyle(e).animationDelay)}}).sort(function(e,t){return e.delay-t.delay});if(0===o.length)return;function s(){var e=Date.now()-n,t=Object.assign({},o.find(function(t){return t.delay>e}));t?(o.forEach(function(e){e.delay<=t.delay?(e.delay=0,e.el.classList.add("skip-animation")):(e.delay-=t.delay,e.el.style.animationDelay=e.delay+"ms")}),n=Date.now(),window.clearTimeout(r),l()):u()}function l(){r&&window.clearTimeout(r),r=window.setTimeout(u,o[o.length-1].delay)}function u(){t.classList.remove("visible"),document.body.removeEventListener("click",s),document.body.removeEventListener("keyup",s)}t.classList.add("visible"),l(),window.setTimeout(function(){document.body.addEventListener("click",s),document.body.addEventListener("keyup",s)},50)};var r,o=n(13),i=(r=o)&&r.__esModule?r:{default:r},a=n(7)},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(5),i=(r=o)&&r.__esModule?r:{default:r};t.default={match:/^embed\s+flickr(\s+image)?/i,render:function(e,t){return(0,i.default)("img",Object.assign({},t,{src:/img src="(.+?)"/.exec(e)[1]}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(5),i=(r=o)&&r.__esModule?r:{default:r};t.default={match:/^embed\s+image?/i,render:function(e,t){return(0,i.default)("img",Object.assign({},t,{src:e}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),o=n(11);t.default={match:/^embed\s+passage(\s+named)?/i,render:function(e){return(0,o.render)((0,r.passageNamed)(e).source)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(5),i=(r=o)&&r.__esModule?r:{default:r};t.default={match:/^embed\s+unsplash(\s+image)?/i,render:function(e,t){return(0,i.default)("img",Object.assign({},t,{src:"https://source.unsplash.com/"+e.replace(/.*\//,"")+"/"+t.width+"x"+t.height}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(5),i=(r=o)&&r.__esModule?r:{default:r};t.default={match:/^embed\s+youtube(\s+video)?/i,render:function(e,t){var n="https://www.youtube-nocookie.com/embed/"+e.replace(/.*\?v=/,"")+"?modestbranding=1&rel=0&controls="+(t.controls?1:0)+"&";return t.autoplay&&(n+="autoplay=1&"),t.loop&&(n+="loop=1&"),(0,i.default)("div",{style:"position: relative; height: 0; padding-bottom: 56.25%; margin-bottom: 1em"},[(0,o.domify)("iframe",{src:n,frameBorder:0,style:"position: absolute; top: 0; left: 0; width: 100%; height: 100%"})])}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(16);t.default={match:/^link\s+to/i,render:function(e,t){return(0,r.renderLink)(e,t.label)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(1)),o=n(0),i=n(5),a=s(i);function s(e){return e&&e.__esModule?e:{default:e}}t.default={match:/^dropdown menu(\s+for)?/i,render:function(e,t){var n=void 0;return e&&void 0===(n=(0,o.get)(e))&&((0,o.set)(e,t.choices[0]),n=t.choices[0]),(0,a.default)("select",{"data-cb-menu-set":e||void 0},t.choices.map(function(t){var r={value:t};return e&&n===t&&(r.selected=""),(0,i.domify)("option",r,[t])}))}},r.default.on("dom-change",function(e){e.dataset.cbMenuSet&&(0,o.set)(e.dataset.cbMenuSet,e.querySelectorAll("option")[e.selectedIndex].value)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(5),i=(r=o)&&r.__esModule?r:{default:r};t.default={match:/^restart\s+link/i,render:function(e,t){return(0,i.default)("a",{href:"javascript:void(0)","data-cb-restart":!0},[t.label||"Restart"])}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(12),o=l(n(1)),i=l(n(5)),a=n(6),s=n(11);function l(e){return e&&e.__esModule?e:{default:e}}t.default={match:/^reveal\s+link/i,render:function(e,t){return t.text?(0,i.default)("a",{href:"javascript:void(0)","data-cb-reveal-text":t.text},[e]):t.passage?(0,i.default)("a",{href:"javascript:void(0)","data-cb-reveal-passage":t.passage},[e]):void 0}},o.default.on("dom-click",function(e){var t=e.dataset.cbRevealText;if(e.dataset.cbRevealPassage&&(t=(0,a.passageNamed)(e.dataset.cbRevealPassage).source),t){var n=document.createElement("div");n.innerHTML=(0,s.render)(t).trim(),(0,r.changeBody)(function(){var t=n.children.length;if(t>0){var r=document.createElement("span");if(r.innerHTML=n.firstChild.innerHTML,e.parentNode.insertBefore(r,e),n.removeChild(n.firstChild),t>1){for(var o=n.lastChild;n.lastChild;)e.parentNode.parentNode.insertBefore(n.lastChild,e.parentNode.nextSibling);for(;e.nextSibling;)o.insertBefore(e.nextSibling,null)}}e.parentNode.removeChild(e)})}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default={match:/^sound\s+effect/i,render:function(e,t){var n=(0,r.get)("sound.effect."+e+".description")||"";return t.volume&&(0,r.set)("sound.effect."+e+".volume",t.volume),(0,r.set)("sound.effect."+e+".playing",!0),"<audio>"+n+"</audio>"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(1)),o=n(0),i=a(n(5));function a(e){return e&&e.__esModule?e:{default:e}}t.default={match:/^text\s+input(\s+for)?/i,render:function(e,t){return(0,i.default)("input",{type:"text",value:e?(0,o.get)(e):"","data-cb-text-field-set":e||void 0,required:!1!==t.required?"":void 0})}},r.default.on("dom-change",function(e){e.dataset.cbTextFieldSet&&(0,o.set)(e.dataset.cbTextFieldSet,e.value)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=f(n(85)),o=f(n(86)),i=f(n(87)),a=f(n(88)),s=f(n(89)),l=f(n(90)),u=f(n(91)),c=f(n(93));function f(e){return e&&e.__esModule?e:{default:e}}t.default=[r.default,o.default,i.default,a.default,s.default,l.default,u.default,c.default]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(13)),o=i(n(21));function i(e){return e&&e.__esModule?e:{default:e}}t.default={match:/^after\s/i,process:function(e,t){var n=t.invocation,i=(0,r.default)(n.replace(/^after\s/i,""),"ms");e.text=(0,o.default)(e.text,{"data-cb-skippable":"",class:"fade-in",style:"animation-delay: "+i+"ms"})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(21),i=(r=o)&&r.__esModule?r:{default:r};t.default={match:/^align\s+(left|right|center)/i,process:function(e,t){var n=t.invocation.replace(/^align\s+/i,"");e.text=(0,i.default)(e.text,{style:"display: block; text-align: "+n})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={match:/^append$/i,process:function(e){e.startsNewParagraph=!1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={match:/^if(always|never)?\s|else$|unless\s/i,processRaw:function(e,t){var n=t.invocation,r=t.state,o=n.replace(/\s.*/,"").toLowerCase(),i=void 0;switch("else"!==o&&(i=new Function("return "+n.replace(/.*?\s/,""))),o){case"if":r.conditionEval=i.apply(window);break;case"ifalways":r.conditionEval=!0;break;case"ifnever":r.conditionEval=!1;break;case"unless":r.conditionEval=!i.apply(window);break;case"else":if(void 0===r.conditionEval)throw new Error("There was no matching if modifier for an else modifier.");r.conditionEval=!r.conditionEval}r.conditionEval||(e.text="")}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={match:/^continued?|cont('d)?$/i,process:function(){}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={match:/^css$/i,process:function(e){e.text="<style>"+e.text+"</style>"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(92),i=(r=o)&&r.__esModule?r:{default:r},a=n(0);t.default={match:/^javascript$/i,process:function(e){try{var t=new Function("\n\t\t\t\t\t\tfunction write() { write.__out += write.__join.call(arguments, ''); }\n\t\t\t\t\t\twrite.__out = '';\n\t\t\t\t\t\twrite.__join = Array.prototype.join;\n\t\t\t\t\t\t"+(0,i.default)(e.text)+";\n\t\t\t\t\t\treturn write.__out;\n\t\t\t\t\t");e.text=t.apply(window)}catch(t){if(!(0,a.get)("config.testing"))throw t;var n="unknown error";n=t.error&&t.error.stack?t.error.stack:t.message+"\n[No stack trace available]",e.text='<div class="error">An error occured evaluating:<pre>'+e.text+"</pre><p><pre>"+n+"</pre></p></div>"}}}},function(e,t,n){(function(t){var n=1/0,r="[object Symbol]",o=/&(?:amp|lt|gt|quot|#39|#96);/g,i=RegExp(o.source),a="object"==typeof t&&t&&t.Object===Object&&t,s="object"==typeof self&&self&&self.Object===Object&&self,l=a||s||Function("return this")();var u,c=(u={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},function(e){return null==u?void 0:u[e]}),f=Object.prototype.toString,d=l.Symbol,p=d?d.prototype:void 0,h=p?p.toString:void 0;function g(e){if("string"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&f.call(e)==r}(e))return h?h.call(e):"";var t=e+"";return"0"==t&&1/e==-n?"-0":t}e.exports=function(e){var t;return(e=null==(t=e)?"":g(t))&&i.test(e)?e.replace(o,c):e}}).call(this,n(19))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={match:/^(note(\s+to\s+self)?|n?b?|todo|fixme)$/i,process:function(e){e.text=""}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u,n={vars:[],blocks:[]},i=e.split(t.varsSep,2),a=void 0,c=void 0;if(2===i.length){s("Detected vars section");var f=r(i,2);a=f[0],c=f[1],(0,o.default)(a).forEach(function(e){if(""!==e.trim()){var t=e.indexOf(":");if(-1!==t){var r=e.substr(0,t).trim(),o=e.substr(t+1).trim(),i={name:r,value:new Function("return ("+o+")")},a=r.match(/\(.+\)/);a?(i.condition=new Function("return ("+a[0]+")"),i.name=(i.name.substr(0,a.index)+i.name.substr(a.index+a[0].length)).trim(),s('Setting variable "'+i.name+'" to "'+o+'" with condition ('+a[0]+")")):s('Setting variable "'+r+'" to "'+o+'" without condition'),n.vars.push(i)}else l('The line "'+e+'" in the vars section is missing a colon. It was ignored.')}})}else s("No vars section detected"),c=i[0];var d=function(e,t){var r=t.trim();""!==r&&(s("Creating '"+e+"' block with content: \""+r+'"'),n.blocks.push({type:e,content:r}))},p=new RegExp(t.modifierPattern),h=0,g=p.exec(c);for(;g;){d("text",c.substring(h,g.index));for(var v=g[1],m="",b=0;b<v.length;b++)switch(v[b]){case'"':for(m+='"',b+=1;b<v.length&&(m+=v[b],'"'!==v[b]||"\\"===v[b-1]);b++);break;case";":d("modifier",m),m="";break;default:m+=v[b]}d("modifier",m),h=p.lastIndex,g=p.exec(c)}return d("text",c.substring(h)),n};var o=i(n(95));function i(e){return e&&e.__esModule?e:{default:e}}var a=(0,i(n(4)).default)("parse"),s=a.log,l=a.warn,u={varsSep:/^--$/m,modifierPattern:/^\[([^[].+[^\]])\]$/gm}},function(e,t,n){"use strict";e.exports=function(e,t){if("string"!=typeof e)throw new TypeError("Expected a string in the first argument, got "+typeof e);if(!(t&&t.preserveNewlines))return e.split(/\r?\n/);for(var n=e.split(/(\r?\n)/),r=[],o=0;o<n.length;o+=2)r.push(n[o]+(n[o+1]||""));return r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.markedOptions=void 0,t.default=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!e.vars)throw new Error("The renderer was given an object with no vars property.");if(!e.blocks)throw new Error("The renderer was given an object with no blocks property.");var i="";o||(c("Setting vars ("+e.vars.length+")"),e.vars.forEach(function(e){if(e.condition){var t=e.condition();t?(c('Setting var "'+name+'" (condition is currently true)'),(0,l.set)(e.name,e.value())):c('Not setting var "'+name+'" (condition is currently false)')}else c('Setting var "'+name+'"'),(0,l.set)(e.name,e.value())}));var u=[],d={};return e.blocks.forEach(function(e){switch(e.type){case"text":var r={text:e.content,startsNewParagraph:!0},o=u.filter(function(e){return!!e.mod.processRaw});c("Running "+o.length+" modifiers on raw source block"),o.forEach(function(e){e.mod.processRaw(r,{state:d[e.mod],invocation:e.invocation})}),r.text=(0,a.default)((0,s.default)(r.text),t);var l=u.filter(function(e){return!!e.mod.process});c("Running "+l.length+" modifiers on source block"),l.forEach(function(e){return e.mod.process(r,{state:d[e.mod],invocation:e.invocation})}),c("Output after modifiers: "+JSON.stringify(r)),""!==r.text.trim()&&(""!==i&&(i+=r.startsNewParagraph?"\n\n":" "),i+=r.text),u=[];break;case"modifier":var f=n.filter(function(t){return t.match.test(e.content)});if(1===f.length){var p=f[0];c('Activated "'+p.name+'" modifier matching ['+e.content+"]"),d[p]=d[p]||{},u.push({mod:p,invocation:e.content})}else 0===f.length?i+="\n\n["+e.content+"]\n\n":(console.warn('More than one modifier matched "['+e.content+']".'),i+="\n\n["+e.content+"]\n\n");break;default:throw new Error("Don't know how to render a block with type \""+e.type+'".')}}),i=i.replace(/^((>|-|\*).*$)\n+\2/gm,"$1\n$2"),r.default.setOptions(f),c("Final Markdown:\n"+i),(0,r.default)(i)};var r=u(n(22)),o=u(n(4)),i=u(n(97)),a=u(n(98)),s=u(n(16)),l=n(0);function u(e){return e&&e.__esModule?e:{default:e}}var c=(0,o.default)("render").log,f=t.markedOptions={renderer:i.default,smartypants:!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(22);var i=new((r=o)&&r.__esModule?r:{default:r}).default.Renderer;Object.assign(i,{blockquote:function(e){return'<div class="fork">'+e+"</div>"},del:function(e){return'<span class="small-caps">'+e+"</span>"}}),t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n="",r=0,i=e.indexOf("{");if(-1===i)return e;for(var a=!1,s=void 0,l=i+1;l<e.length;l++)switch(e[l]){case"{":i=l,a=!1;break;case'"':case"'":l>0&&"\\"!==e[l-1]&&(a?a&&s===e[l]&&(a=!1):(a=!0,s=e[l]));break;case"}":if(!a){var u=e.substring(i,l+1),c="";try{c=o(u,t)}catch(e){console.warn('An error occurred while rendering "'+u+'": '+e.message),c=u}void 0===c&&(c=""),n+=e.substring(r,i)+c,r=l+1,-1===(i=e.indexOf("{",r))&&(l=e.index)}}return n+e.substring(r)};var r=n(0);function o(e,t){var n=e.substr(1,e.length-2).trim();if(/\s/.test(n)){var o=n.match(/^[^:,]+/)[0],i=t.find(function(e){return e.match.test(o)});if(i){var a=n.replace(o,"");if(":"===a[0]){var s=new Function('return {"'+o+'" '+a+"}")(),l=s[o];return delete s[o],i.render(l,s,n)}if(","===a[0]){var u=new Function("return {"+a.substr(1)+"}")();return i.render(null,u,n)}if(""===a)return i.render(null,{},n)}}else{var c=/(.+)\[(.+)\]$/.exec(n),f=void 0;if(void 0!==(f=c?(0,r.get)(c[1])[c[2]]:(0,r.get)(n)))return f}return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=e.volume,o=t-r,i=void 0,a=0;return new Promise(function(t){return window.requestAnimationFrame(function(s){i=s,window.requestAnimationFrame(function s(l){a+=l-i;e.volume=function(e,t,n,r){if((e/=r/2)<1)return n/2*e*e+t;return-n/2*(--e*(e-2)-1)+t}(a,r,o,n);a<n?(i=l,window.requestAnimationFrame(s)):t()})})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){(0,r.default)(u.setLookup),(0,o.default)(u.setLookup),(0,i.default)(u.setLookup),(0,a.default)(u.setLookup),(0,s.default)(u.setLookup),(0,l.default)(u.setLookup)};var r=c(n(101)),o=c(n(102)),i=c(n(104)),a=c(n(105)),s=c(n(24)),l=c(n(115)),u=n(0);function c(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e("browser.height",function(){return window.innerHeight}),e("browser.online",function(){return window.navigator.onLine}),e("browser.width",function(){return window.innerWidth})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e("engine.version",function(){return i.default.version})};var r,o=n(103),i=(r=o)&&r.__esModule?r:{default:r}},function(e){e.exports={name:"Chapbook",author:"Chris Klimas <chris@twinery.org>",description:'A Twine story format emphasizing ease of authoring, multimedia, and playability on many different types of devices. Visit the <a href="https://klembot.github.io/chapbook/guide/">guide</a> for more information.',version:"1.2.1",main:"index.js",license:"MIT",devDependencies:{"@commitlint/cli":"^8.3.5","@commitlint/config-conventional":"^8.3.4","babel-core":"^6.26.0","babel-loader":"^7.1.4","babel-preset-env":"^1.6.1","babel-preset-preact":"^1.1.0","child-process-promise":"^2.2.1",cpy:"^7.2.0","cpy-cli":"^2.0.0","cross-env":"^5.2.0","css-loader":"^0.28.11",eslint:"^4.14.0","eslint-config-prettier":"^6.11.0","gitbook-cli":"^2.3.2","html-webpack-plugin":"^3.2.0",husky:"^4.2.5",jest:"^24.7.1","jest-localstorage-mock":"^2.2.0",jsdoc:"^3.6.2","jstransformer-marked":"^1.0.3","lodash.escape":"^4.0.1","mini-css-extract-plugin":"^0.4.0","mock-local-storage":"^1.0.5","node-sass":"^4.12.0","npm-run-all":"^4.1.3",prettier:"^2.0.5",pug:"^2.0.3",rimraf:"^2.6.3","rollup-plugin-uglify":"^3.0.0","sass-loader":"^7.0.3","title-case":"^2.1.1","twine-utils":"^1.2.6","url-loader":"^1.1.2",webpack:"^4.28.2","webpack-cli":"^3.1.2","webpack-dev-server":"^3.1.12",yargs:"^11.0.0"},dependencies:{closest:"^0.0.1","get-value":"^3.0.1","lodash.unescape":"^4.0.1",marked:"^1.2.7",nanobus:"^4.3.3","open-color":"^1.6.3",preact:"^8.2.9","pure-color":"^1.3.0",seedrandom:"^2.4.3","set-value":"^3.0.1","split-lines":"^1.1.0",timestring:"^5.0.0","unset-value":"^1.0.0"},scripts:{start:"webpack-dev-server",build:"npm-run-all --parallel build:main build:micro --serial build:format clean","build:format":"node scripts/build-format.js","build:main":"cross-env NODE_ENV=production webpack","build:micro":"cross-env NODE_ENV=production CHAPBOOK_MICRO=y webpack",clean:"rimraf dist/full; rimraf dist/micro",examples:"node scripts/build-examples.js",guide:"gitbook serve guide","guide:init":"cd guide && gitbook install && cd ..","guide:release":"cd guide && gitbook build",lint:"eslint src/",prettier:'prettier --write "src/**/*.{js,scss}"',release:"run-s -l build examples guide:release website",test:"jest","test:watch":"jest --watch","test:coverage":"jest --coverage",website:"node scripts/build-website.js"},config:{commitizen:{path:"cz-conventional-changelog"}},husky:{hooks:{"commit-msg":"commitlint -E HUSKY_GIT_PARAMS"}},jest:{setupFiles:["jest-localstorage-mock"]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e("now.second",function(){return(new Date).getSeconds()}),e("now.minute",function(){return(new Date).getMinutes()}),e("now.hour",function(){return(new Date).getHours()}),e("now.day",function(){return(new Date).getDate()}),e("now.weekday",function(){return(new Date).getDay()+1}),e("now.weekdayName",function(){return(new Date).toLocaleString(navigator.language,{weekday:"long"})}),e("now.month",function(){return(new Date).getMonth()+1}),e("now.monthName",function(){return(new Date).toLocaleString(navigator.language,{month:"long"})}),e("now.year",function(){return(new Date).getFullYear()}),e("now.timestamp",function(){return(new Date).toLocaleString(navigator.language,{hour:"numeric",minute:"numeric",second:"numeric"})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e("passage.name",function(){var e=(0,r.get)("trail");if(e)return e[e.length-1]}),e("passage.visits",function(){var e=(0,r.get)("trail"),t=(0,r.get)("passage.name");if(e)return e.reduce(function(e,n){return n===t?e+1:e},0)})};var r=n(0)},function(e,t,n){var r=n(107),o=n(108),i=n(109),a=n(110),s=n(111),l=n(112),u=n(113);u.alea=r,u.xor128=o,u.xorwow=i,u.xorshift7=a,u.xor4096=s,u.tychei=l,e.exports=u},function(e,t,n){(function(e){var r;!function(e,o,i){function a(e){var t,n=this,r=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function l(e,t){var n=new a(e),r=t&&t.state,o=n.next;return o.int32=function(){return 4294967296*n.next()|0},o.double=function(){return o()+1.1102230246251565e-16*(2097152*o()|0)},o.quick=o,r&&("object"==typeof r&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=l:n(3)&&n(9)?void 0===(r=function(){return l}.call(t,n,t,o))||(o.exports=r):this.alea=l}(0,e,n(3))}).call(this,n(8)(e))},function(e,t,n){(function(e){var r;!function(e,o,i){function a(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function l(e,t){var n=new a(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=l:n(3)&&n(9)?void 0===(r=function(){return l}.call(t,n,t,o))||(o.exports=r):this.xor128=l}(0,e,n(3))}).call(this,n(8)(e))},function(e,t,n){(function(e){var r;!function(e,o,i){function a(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function l(e,t){var n=new a(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=l:n(3)&&n(9)?void 0===(r=function(){return l}.call(t,n,t,o))||(o.exports=r):this.xorwow=l}(0,e,n(3))}).call(this,n(8)(e))},function(e,t,n){(function(e){var r;!function(e,o,i){function a(e){var t=this;t.next=function(){var e,n,r=t.x,o=t.i;return e=r[o],n=(e^=e>>>7)^e<<24,n^=(e=r[o+1&7])^e>>>10,n^=(e=r[o+3&7])^e>>>3,n^=(e=r[o+4&7])^e<<7,e=r[o+7&7],n^=(e^=e<<13)^e<<9,r[o]=n,t.i=o+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function l(e,t){null==e&&(e=+new Date);var n=new a(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&(r.x&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=l:n(3)&&n(9)?void 0===(r=function(){return l}.call(t,n,t,o))||(o.exports=r):this.xorshift7=l}(0,e,n(3))}).call(this,n(8)(e))},function(e,t,n){(function(e){var r;!function(e,o,i){function a(e){var t=this;t.next=function(){var e,n,r=t.w,o=t.X,i=t.i;return t.w=r=r+1640531527|0,n=o[i+34&127],e=o[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=o[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,o,i,a,s=[],l=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,l=Math.max(l,t.length)),o=0,i=-32;i<l;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(a=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(a=a+1640531527|0,o=0==(n=s[127&i]^=r+a)?o+1:0);for(o>=128&&(s[127&(t&&t.length||0)]=-1),o=127,i=512;i>0;--i)r=s[o+34&127],n=s[o=o+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[o]=r^n;e.w=a,e.X=s,e.i=o}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function l(e,t){null==e&&(e=+new Date);var n=new a(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&(r.X&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=l:n(3)&&n(9)?void 0===(r=function(){return l}.call(t,n,t,o))||(o.exports=r):this.xor4096=l}(0,e,n(3))}).call(this,n(8)(e))},function(e,t,n){(function(e){var r;!function(e,o,i){function a(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,o=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^o,o=o-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^o,t.a=o-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function l(e,t){var n=new a(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=l:n(3)&&n(9)?void 0===(r=function(){return l}.call(t,n,t,o))||(o.exports=r):this.tychei=l}(0,e,n(3))}).call(this,n(8)(e))},function(e,t,n){var r;!function(o,i){var a,s=(0,eval)("this"),l=256,u=6,c="random",f=i.pow(l,u),d=i.pow(2,52),p=2*d,h=l-1;function g(e,t,n){var r=[],h=b(function e(t,n){var r,o=[],i=typeof t;if(n&&"object"==i)for(r in t)try{o.push(e(t[r],n-1))}catch(e){}return o.length?o:"string"==i?t:t+"\0"}((t=1==t?{entropy:!0}:t||{}).entropy?[e,y(o)]:null==e?function(){try{var e;return a&&(e=a.randomBytes)?e=e(l):(e=new Uint8Array(l),(s.crypto||s.msCrypto).getRandomValues(e)),y(e)}catch(e){var t=s.navigator,n=t&&t.plugins;return[+new Date,s,n,s.screen,y(o)]}}():e,3),r),g=new v(r),k=function(){for(var e=g.g(u),t=f,n=0;e<d;)e=(e+n)*l,t*=l,n=g.g(1);for(;e>=p;)e/=2,t/=2,n>>>=1;return(e+n)/t};return k.int32=function(){return 0|g.g(4)},k.quick=function(){return g.g(4)/4294967296},k.double=k,b(y(g.S),o),(t.pass||n||function(e,t,n,r){return r&&(r.S&&m(r,g),e.state=function(){return m(g,{})}),n?(i[c]=e,t):e})(k,h,"global"in t?t.global:this==i,t.state)}function v(e){var t,n=e.length,r=this,o=0,i=r.i=r.j=0,a=r.S=[];for(n||(e=[n++]);o<l;)a[o]=o++;for(o=0;o<l;o++)a[o]=a[i=h&i+e[o%n]+(t=a[o])],a[i]=t;(r.g=function(e){for(var t,n=0,o=r.i,i=r.j,a=r.S;e--;)t=a[o=h&o+1],n=n*l+a[h&(a[o]=a[i=h&i+t])+(a[i]=t)];return r.i=o,r.j=i,n})(l)}function m(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function b(e,t){for(var n,r=e+"",o=0;o<r.length;)t[h&o]=h&(n^=19*t[h&o])+r.charCodeAt(o++);return y(t)}function y(e){return String.fromCharCode.apply(0,e)}if(i["seed"+c]=g,b(i.random(),o),e.exports){e.exports=g;try{a=n(114)}catch(e){}}else void 0===(r=function(){return g}.call(t,n,t,e))||(e.exports=r)}([],Math)},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e("story.name",r.name)};var r=n(6)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){[r.defaults,o.defaults,i.defaults,a.defaults,s.defaults,l.defaults,u.defaults].forEach(function(e){return Object.keys(e).forEach(function(t){"function"==typeof e[t]?(0,s.setDefault)(t,e[t]()):(0,s.setDefault)(t,e[t])})})};var r=n(12),o=n(4),i=n(24),a=n(23),s=n(0),l=n(25),u=n(11)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=function(){l.dataset.cbGoogleFontLoader="",l.setAttribute("hidden",!0),u.dataset.cbTypekitFontLoader="",u.setAttribute("hidden",!0),c.dataset.cbUrlFontLoader="",c.setAttribute("hidden",!0),document.body.appendChild(l),document.body.appendChild(u),document.body.appendChild(c),o.default.on("state-change",function(e){var t=e.name,n="config"===t||"config.style"===t||"config.style.fonts"===t;if(n){var r=(0,i.get)("config.style.fonts");if(!r)return;Object.keys(r).forEach(function(e){var t=r[e].name,n=r[e].url;t&&n&&d(e,n,t)})}else{var o=t.match(/^config\.style\.fonts\.([^.]+)/i);if(o){var a=o[1],c=(0,i.get)("config.style.fonts."+a+".name"),f=(0,i.get)("config.style.fonts."+a+".url");return void(f&&c&&(s("Adding font from URL ("+c+")"),d(a,f,c)))}}(0,i.sameObject)(t,"config.style.googleFont")&&(s("Adding Google font"),l.innerHTML=(0,i.get)("config.style.googleFont")),(0,i.sameObject)(t,"config.style.typekitFont")&&(s("Adding Typekit font"),u.innerHTML=(0,i.get)("config.style.typekitFont"))})};var r=a(n(4)),o=a(n(1)),i=n(0);function a(e){return e&&e.__esModule?e:{default:e}}var s=(0,r.default)("style").log,l=document.createElement("div"),u=document.createElement("div"),c=document.createElement("div"),f={};function d(e,t,n){var r=t.match(/\.(.+)$/);if(r&&r[1]){var o=r[1],i=f[e]||document.createElement("style");i.dataset.cbFontLoader=e,i.innerHTML='@font-face { font-family: "'+n+'"; src: url("'+t+'") format("'+o+'"); }',i.parentNode||c.appendChild(i)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.autopx=function(e){if("number"==typeof e)return e+"px";return e},t.parseColorValue=s,t.parseColor=function(e){if(void 0===e)return{"background-color":"inherit",color:"inherit"};if("string"!=typeof e)throw new Error("Only strings can be parsed as colors.");var t={color:"inherit","background-color":"inherit"},n=e.split(/ on /i);t.color=s(n[0].trim().toLowerCase()),2===n.length&&(t["background-color"]=s(n[1].trim().toLowerCase()));return t},t.parseFont=function(e){var t={"font-family":"inherit","font-size":"inherit","font-style":"inherit","font-weight":"inherit","letter-spacing":"inherit","text-decoration":"inherit","text-transform":"inherit"};if(void 0===e)return t;if("string"!=typeof e)throw new Error("Only strings can be parsed as fonts.");function n(e,t){e["font-family"]=t.split("/").map(function(e){var t=e;return'"'!==t[0]&&(t='"'+t),'"'!==t[t.length-1]&&(t+='"'),t}).join(",")}function r(e){e["font-weight"]="bold"}function o(e){e["font-style"]="italic"}function i(e){e["font-style"]="none",e["font-weight"]="normal",e["letter-spacing"]="normal",e["text-decoration"]="none",e["text-transform"]="none"}function a(e){e["letter-spacing"]="0.075em",e["text-transform"]="uppercase",e["font-size"]&&"inherit"!==e["font-size"]?e["font-size"]="calc(0.7 * "+e["font-size"]+")":e["font-size"]="70%"}function s(e){e["text-decoration"]="underline"}var l=/\b\d+(?:\.\d+)?(ch|cm|ex|in|mm|pc|pt|px|r?em|vh|vmax|vmin|vw|%)?/i.exec(e);if(l){/^\d+$/.test(l[0])?t["font-size"]=l[0]+"px":t["font-size"]=l[0],0!==l.index&&n(t,e.substr(0,l.index).trim());var u=e.substr(l.index);/\bregular\b/i.test(u)?(t["font-style"]="none",t["font-weight"]="normal",t["letter-spacing"]="normal",t["text-decoration"]="none",t["text-transform"]="none"):(/\bbold\b/.test(u)&&r(t),/\bitalics?\b/.test(u)&&o(t),/\bunderlined?/.test(u)&&s(t),/\bsmall caps?\b/.test(u)&&a(t))}else{for(var c=void 0,f=e;c=/(bold|italics?|regular|small caps|underlined?)$/.exec(f);){switch(c[0]){case"bold":r(t);break;case"italic":case"italics":o(t);break;case"regular":i(t);break;case"small caps":a(t);break;case"underline":case"underlined":s(t)}f=f.substr(0,c.index).trim()}""!==f.trim()&&n(t,f)}return t};var r=a(n(119)),o=a(n(120)),i=a(n(125));function a(e){return e&&e.__esModule?e:{default:e}}function s(e){if("string"!=typeof e)throw new Error("Only strings can be parsed as color values.");r.default[e]&&(e=Array.isArray(r.default[e])?r.default[e][r.default[e].length-1]:r.default[e]);var t=/^(\w+)-(\d)$/.exec(e);t&&r.default[t[1]]&&(e=r.default[t[1]][t[2]]);var n=(0,o.default)(e),a=(0,i.default)(n);return a[3]=void 0!==n[3]?n[3]:1,"hsla("+a[0]+", "+a[1]+"%, "+a[2]+"%, "+a[3]+")"}},function(e){e.exports={white:"#ffffff",black:"#000000",gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]}},function(e,t,n){var r=n(121),o=n(122),i=n(123),a=n(124);var s={"#":o,hsl:function(e){var t=r(e),n=a(t);return 4===t.length&&n.push(t[3]),n},rgb:i};function l(e){for(var t in s)if(0===e.indexOf(t))return s[t](e)}l.rgb=i,l.hsl=r,l.hex=o,e.exports=l},function(e,t,n){var r=n(26),o=n(27);function i(e,t){switch(e=parseFloat(e),t){case 0:return o(e,0,360);case 1:case 2:return o(e,0,100);case 3:return o(e,0,1)}}e.exports=function(e){return r(e).map(i)}},function(e,t){e.exports=function(e){4!==e.length&&5!==e.length||(e=function(e){for(var t="#",n=1;n<e.length;n++){var r=e.charAt(n);t+=r+r}return t}(e));var t=[parseInt(e.substring(1,3),16),parseInt(e.substring(3,5),16),parseInt(e.substring(5,7),16)];if(9===e.length){var n=parseFloat((parseInt(e.substring(7,9),16)/255).toFixed(2));t.push(n)}return t}},function(e,t,n){var r=n(26),o=n(27);function i(e,t){return t<3?-1!=e.indexOf("%")?Math.round(255*o(parseInt(e,10),0,100)/100):o(parseInt(e,10),0,255):o(parseFloat(e),0,1)}e.exports=function(e){return r(e).map(i)}},function(e,t){e.exports=function(e){var t,n,r,o,i,a=e[0]/360,s=e[1]/100,l=e[2]/100;if(0==s)return[i=255*l,i,i];t=2*l-(n=l<.5?l*(1+s):l+s-l*s),o=[0,0,0];for(var u=0;u<3;u++)(r=a+1/3*-(u-1))<0&&r++,r>1&&r--,i=6*r<1?t+6*(n-t)*r:2*r<1?n:3*r<2?t+(n-t)*(2/3-r)*6:t,o[u]=255*i;return o}},function(e,t){e.exports=function(e){var t,n,r=e[0]/255,o=e[1]/255,i=e[2]/255,a=Math.min(r,o,i),s=Math.max(r,o,i),l=s-a;return s==a?t=0:r==s?t=(o-i)/l:o==s?t=2+(i-r)/l:i==s&&(t=4+(r-o)/l),(t=Math.min(60*t,360))<0&&(t+=360),n=(a+s)/2,[t,100*(s==a?0:n<=.5?l/(s+a):l/(2-s-a)),100*n]}},function(e,t,n){}]);</script></body></html>